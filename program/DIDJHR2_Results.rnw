\section{Results}

<<>>=
zAobj <- rep(c("zEm.1999", "zSm.1999"), each = 3)
zsobj <- c("zAobj", "zAP2obj", "zAP9obj", "zCobj", "zYobj")
samples.age <- c("main", "placebo2", "placebo9", "mainC")#, "placeboY")
agegroupings1 <- list(
    main = rep(c("agewise", "AgeGroup1", "AgeGroup2"), 2)
  # agewise = (currently) Not age wise. Same as main. 
  # AgeGroup1 = AgeGroup: 6-10, 11-13, 14-15, 16-17, above17
  # AgeGroup2 = Agegroup: 6-10, 11-17, above17
  # mainC: Class wise = Group children by enrolled class in 1999
  # Note: placeboY only have one age group, below 10 in 1999
  , placebo2 = rep(c("agewise", "AgeGroup1", "AgeGroup2"), 2)
  , placebo9 = rep(c("agewise", "AgeGroup1", "AgeGroup2"), 2)
  , mainC = rep("Classwise", 2)
  , placeboY = "YoungCohorts"
)
zmobj <- c("zEm.1999", "zSm.1999")
zpobj <- c("zEp.2002", "zSp.2002", "zEp.1999", "zSp.1999")
zCobj <- c("zEm.1999", "zSm.1999") 
library(qs)
Enr.Base <- qread(paste0(pathsaveThisVer, "EnrBaseForTabGeneric.qs"))
Enrchg.Base <- qread(paste0(pathsaveThisVer, "EnrchgBaseForTabGeneric.qs"))
source("TabGeneric.R")
@

\subsection{Main}


\subsubsection{Main}

<<results = "hide">>=
source("TabGeneric.R")
#DisplayEstTable()
TabFNLine1 <- "\\\\[-1ex] Notes:& 1. A first-difference estimator with standard errors clustered at \\textit{thana} level. Standard errors with are clusterd at thana level. $P$ values are shown in the parentheses. Enrollment rates in 1999, 2002 are"
@
\Sexpr{
DisplayEstTable(
  TwoContinuedTables = T,
  TABFilePath1 = TabFilePathF(
    AgeCutoff = paste0("Older", 10), 
    Sample = paste0("zEm1999", c("", "Undemeaned")[1]), 
    CRSEMethod = "LiangZeger1",
    HHType = "Nuclear", AgHHDef = ""),
  TABFilePath2 = TabFilePathF(
    AgeCutoff = paste0("Older", 10), 
    Sample = paste0("zEm1999", c("", "Undemeaned")[1]), 
    CRSEMethod = "LiangZeger2",
    HHType = "Nuclear", AgHHDef = ""
  ),
  TABTitle="1999-2002, 10 years and older, direct offsprings")
}
<<>>=
source(paste0(pathprogram, "TabGeneric.R"))
@
\Sexpr{
DisplayEstTable(
  TwoContinuedTables = T,
  TABFilePath1 = TabFilePathF(
    AgeCutoff = paste0("Older", 10), 
    Sample = paste0("zEm1999", c("", "Undemeaned")[1]), 
    CRSEMethod = "Satterthwaite1",
    HHType = "Nuclear", AgHHDef = ""),
  TABFilePath2 = TabFilePathF(
    AgeCutoff = paste0("Older", 10), 
    Sample = paste0("zEm1999", c("", "Undemeaned")[1]), 
    CRSEMethod = "Satterthwaite2",
    HHType = "Nuclear", AgHHDef = ""
  ),
  TABTitle="1999-2002, 10 years and older, direct offsprings, Satterthwaite correction")
}
<<>>=
AddToTabFNT <- "Cohort of 10 - 18 year olds in 1999 using all children in a household. " 
@
\Sexpr{
DisplayEstTable(
  TwoContinuedTables = T,
  TABFilePath1 = TabFilePathF(
    AgeCutoff = paste0("Older", 10), 
    Sample = paste0("zEm1999", c("", "Undemeaned")[1]), 
    CRSEMethod = "Satterthwaite1",
    HHType = "", AgHHDef = ""),
  TABFilePath2 = TabFilePathF(
    AgeCutoff = paste0("Older", 10), 
    Sample = paste0("zEm1999", c("", "Undemeaned")[1]), 
    CRSEMethod = "Satterthwaite2",
    HHType = "", AgHHDef = ""
  ),
  TABTitle="1999-2002, 10 years and older, all children, Satterthwaite correction")
}
<<>>=
source(paste0(pathprogram, "TabGeneric.R"))
TabFNLine1 <- "\\\\[-1ex] Notes:& 1. A first-difference estimator with standard errors clustered at \\textit{thana} level. Standard errors are clusterd at thana level with wild cluster boostrap to adjust for a small number of clusters. $P$ values are shown in the parentheses. $95\\%$ confidence intervals are shown in square brackets. Enrollment rates in 1999, 2002 are"
@
<<>>=
source(paste0(pathprogram, "TabGeneric.R"))
AddToTabFNT <- "Cohort of 11 - 18 year olds in 1999. Only direct offspring of household head are used." 
@
\Sexpr{
DisplayEstTable(
  TwoContinuedTables = T,
  TABFilePath1 = TabFilePathF(
    AgeCutoff = paste0("Older", 11), 
    Sample = paste0("zEm1999", c("", "Undemeaned")[1]), 
    CRSEMethod = "Satterthwaite1",
    HHType = "Nuclear", AgHHDef = ""),
  TABFilePath2 = TabFilePathF(
    AgeCutoff = paste0("Older", 11), 
    Sample = paste0("zEm1999", c("", "Undemeaned")[1]), 
    CRSEMethod = "Satterthwaite2",
    HHType = "Nuclear", AgHHDef = ""
  ),
  TABTitle="1999-2002, 11 years and older, direct offsprings, Satterthwaite correction")
}
\Sexpr{
DisplayEstTable(
  TwoContinuedTables = T,
  TABFilePath1 = TabFilePathF(
    AgeCutoff = paste0("Older", 12), 
    Sample = paste0("zEm1999", c("", "Undemeaned")[1]), 
    CRSEMethod = "Satterthwaite1",
    HHType = "Nuclear", AgHHDef = ""),
  TABFilePath2 = TabFilePathF(
    AgeCutoff = paste0("Older", 12), 
    Sample = paste0("zEm1999", c("", "Undemeaned")[1]), 
    CRSEMethod = "Satterthwaite2",
    HHType = "Nuclear", AgHHDef = ""
  ),
  TABTitle="1999-2002, 12 years and older, direct offsprings, Satterthwaite correction")
}
<<>>=
source(paste0(pathprogram, "TabGeneric.R"))
@
\Sexpr{
DisplayEstTable0(
  TABFilePath = TabFilePathF(
    Estimator = "FD", AgeCutoff = "Older10", 
    Sample = "zEm1999", CRSEMethod = "Satterthwaite1",
    HHType = "Nuclear", AgHHDef = ""
  ),
  TABTitle = "1999-2002, DID, 10 years and older, direct offsprings, Satterthwaite correction",
  TABFNTHeader = "", AddToTABFNT = "", TABFNLine1 = "",
  ENRNote1 = "", ENRNote2 = "", ENRNote3 = "", ENRAg = "", ENRNonAg = "",
  TABFNLine1Continue = "", AddedTABFN = "", 
  TABFNTFooter = "", TABFNLine2 = "")
}

\clearpage
\Sexpr{
DisplayEstTable0(
  TABFilePath = TabFilePathF(
    Estimator = "FD", AgeCutoff = paste0("Older", 10), 
    Sample = "zEm1999", CRSEMethod = "Satterthwaite2",
    HHType = "Nuclear", AgHHDef = ""
  ),
  TABTitle="1999-2002, DID, 10 years and older, direct offsprings, Satterthwaite correction (continued)")
}

<<echo = F, results = "hide">>=
AddToTabFNT <- "Cohorts of 6 - 20 year olds in 1999. " 
@

\clearpage
\subsubsection{Placebo}


\Sexpr{
DisplayEstTable(
  TwoContinuedTables = T,
  TABFilePath1 = TabFilePathF(
    AgeCutoff = "Older10", 
    Sample = "zEp1999",
    CRSEMethod = "Satterthwaite1",
    HHType = "", AgHHDef = ""),
  TABFilePath2 = TabFilePathF(
    AgeCutoff = "Older10", Sample = "zEp1999",
    CRSEMethod = "Satterthwaite2",
    HHType = "", AgHHDef = ""
  ),
  TABTitle=" 2002-2006 (placebo), 10 years and older in 1999, all children, Satterthwaite correction")
}
\Sexpr{
DisplayEstTable(
  TwoContinuedTables = T,
  TABFilePath1 = TabFilePathF(
    AgeCutoff = "Older10", 
    Sample = "zEp1999",
    CRSEMethod = "Satterthwaite1",
    HHType = "Nuclear", AgHHDef = ""),
  TABFilePath2 = TabFilePathF(
    AgeCutoff = "Older10", Sample = "zEp1999",
    CRSEMethod = "Satterthwaite2",
    HHType = "Nuclear", AgHHDef = ""
  ),
  TABTitle=" 2002-2006 (placebo), 10 years and older in 1999, direct offsprings, Satterthwaite correction")
}
\clearpage

\Sexpr{
DisplayEstTable(
  TwoContinuedTables = T,
  TABFilePath1 = TabFilePathF(
    AgeCutoff = "Older10", 
    Sample = "zEp2002",
    CRSEMethod = "Satterthwaite1",
    HHType = "", AgHHDef = ""),
  TABFilePath2 = TabFilePathF(
    AgeCutoff = "Older10", Sample = "zEp2002",
    CRSEMethod = "Satterthwaite2",
    HHType = "", AgHHDef = ""
  ),
  TABTitle=" 2002-2006 (placebo), 10 years and older in 2002, all children, Satterthwaite correction")
}
\Sexpr{
DisplayEstTable(
  TwoContinuedTables = T,
  TABFilePath1 = TabFilePathF(
    AgeCutoff = "Older10", 
    Sample = "zEp2002",
    CRSEMethod = "Satterthwaite1",
    HHType = "Nuclear", AgHHDef = ""),
  TABFilePath2 = TabFilePathF(
    AgeCutoff = "Older10", Sample = "zEp2002",
    CRSEMethod = "Satterthwaite2",
    HHType = "Nuclear", AgHHDef = ""
  ),
  TABTitle=" 2002-2006 (placebo), 10 years and older in 2002, direct offsprings, Satterthwaite correction")
}


<<echo = F>>=
NumGrades <- qread(paste0(pathsaveThisVer, "NumGradesEnrollersGender.qs"))
NumGradeschg <- qread(paste0(pathsaveThisVer, "NumGradeschgEnrollersGender.qs"))
AddToTabFNT <- "Cohorts of 10 - 18 year olds in 1999. Regressand is the number of completed school years between 1999 and 2002. " 
TabFNLine1 <- "\\\\[-1ex] Notes:& 1. A first-difference estimator with standard errors clustered at \\textit{thana} level. Mean completed school years in 1999, 2002 are"
EnrNote1 <- NumGrades[grepl("zEm.1999", sample) & grepl("10", agelb)  & grepl("nu", HHtype) & grepl("def", agHHdef) & grepl("1", agHH) & grepl("s.g", gender), rate]
EnrAg = "for agricultural households,"
EnrNote2 <- NumGrades[grepl("zEm.1999", sample) & grepl("10", agelb) & grepl("nu", HHtype) & grepl("def", agHHdef) & grepl("0", agHH) & grepl("s.g", gender), rate]
EnrNonAg = "for non-agricultural households, respectively, with a difference-in-differences of"
EnrNote3 <- NumGradeschg[grepl("zEm.1999", sample) & grepl("10", agelb) & grepl("nu", HHtype) & grepl("def", agHHdef) & grepl("s.g", gender), "AgNonag", with = F]
@

\clearpage
\subsubsection{Other outcomes}

\Sexpr{
DisplayEstTable(
  TwoContinuedTables = T
  , TABFilePath1 = TabFilePathF(
      FolderPath = pathsaveThisVer, 
      Sample = paste0(gsub("\\.", "", zSobj[1]), 
        c("Initial", "AllTime", "Others")[1]),
      AgeCutoff = paste0("NumGradesOlder", (10:12)[1]),
      HHType = paste0(c("", "Nuclear")[j], c("Boys", "Girls", "")[3]),
      AgHHDef = c("", "Is", "Hd", "Occ")[1],
      CRSEMethod = "Satterthwaite1"
      )
  , TABFilePath2 = TabFilePathF(
      FolderPath = pathsaveThisVer, 
      Sample = paste0(gsub("\\.", "", zSobj[1]), 
        c("Initial", "AllTime", "Others")[1]),
      AgeCutoff = paste0("NumGradesOlder", (10:12)[1]),
      HHType = paste0(c("", "Nuclear")[j], c("Boys", "Girls", "")[3]),
      AgHHDef = c("", "Is", "Hd", "Occ")[1],
      CRSEMethod = "Satterthwaite2"
      )
  , TABTitle="Progression 1999-2002, enrolled at baseline, 10 years and older, direct offsprings, Satterthwaite correction")
}


<<echo = F, results = "hide">>=
DaysAbsent <- qread(paste0(pathsaveThisVer, "DaysAbsentEnrollersGender.qs"))
DaysAbsentchg <- qread(paste0(pathsaveThisVer, "DaysAbsentchgEnrollersGender.qs"))
AddToTabFNT <- "Cohorts of 6 - 10 or 15 year olds in 1999. Regressand is the monthly days of absence from school observed in 1999 and 2002. " 
TabFNLine1 <- "\\\\[-1ex] Notes:& 1. A first-difference estimator with standard errors clustered at \\textit{thana} level. Mean days of absence in 1999, 2002 are"
EnrNote1 <- DaysAbsent[grepl("zEm.1999", sample) & grepl("10", agelb)  & grepl("all", HHtype) & grepl("def", agHHdef) & grepl("1", agHH), rate]
EnrAg = "for agricultural households,"
EnrNote2 <- DaysAbsent[grepl("zEm.1999", sample) & grepl("10", agelb) & grepl("all", HHtype) & grepl("def", agHHdef) & grepl("0", agHH), rate]
EnrNonAg = "for non-agricultural households, respectively, with a difference-in-differences of"
EnrNote3 <- DaysAbsentchg[grepl("zEm.1999", sample) & grepl("10", agelb) & grepl("all", HHtype) & grepl("def", agHHdef), "AgNonag", with = F]
@

\Sexpr{
DisplayEstTable(
  TwoContinuedTables = T
  , TABFilePath1 = TabFilePathF(
      FolderPath = pathsaveThisVer, 
      Sample = gsub("\\.", "", zSobj[1]), 
      AgeCutoff = paste0("DaysAbsentEnrollersOlder", (10:12)[1]),
      HHType = paste0(c("", "Nuclear")[2], c("Boys", "Girls", "")[3]),
      AgHHDef = c("", "Is", "Hd", "Occ")[1],
    CRSEMethod = "Satterthwaite1")
  , TABFilePath2 = TabFilePathF(
      FolderPath = pathsaveThisVer, 
      Sample = gsub("\\.", "", zSobj[1]), 
      AgeCutoff = paste0("DaysAbsentEnrollersOlder", (10:12)[1]),
      HHType = paste0(c("", "Nuclear")[2], c("Boys", "Girls", "")[3]),
      AgHHDef = c("", "Is", "Hd", "Occ")[1],
    CRSEMethod = "Satterthwaite2")
  ,
  TABTitle="Days absent in a month 1999-2002, all time enrollers, direct offsprings, Satterthwaite correction")
}

<<echo = F, results = "hide">>=
Enr.Gender <- qread(paste0(pathsaveThisVer, "Enr.Base.qs"))
Enrchg.Gender <- qread(paste0(pathsaveThisVer, "Enrchg.Base.qs"))
setnames(Enr.Gender, "agHHdef", "gender")
setnames(Enrchg.Gender, "agHHdef", "gender")
AddToTabFNT <- "Cohorts of 10 to 18 year olds in 1999. Regressand is enrollment in 1999 and 2002. " 
TabFNLine1 <- "\\\\[-1ex] Notes:& 1. A first-difference estimator with standard errors clustered at \\textit{thana} level. Mean days of absence in 1999, 2002 are"
EnrNote1 <- Enr.Gender[grepl("zEm.1999", sample) & grepl("10", agelb)  & grepl("all", HHtype) & grepl("girl", gender) & grepl("1", agHH), rate]
EnrAg = "for agricultural households,"
EnrNote2 <- Enr.Gender[grepl("zEm.1999", sample) & grepl("10", agelb) & grepl("all", HHtype) & grepl("girl", gender) & grepl("0", agHH), rate]
EnrNonAg = "for non-agricultural households, respectively, with a difference-in-differences of"
EnrNote3 <- Enrchg.Gender[grepl("zEm.1999", sample) & grepl("10", agelb) & grepl("all", HHtype) & grepl("girl", gender), "AgNonag", with = F]
@

\clearpage
\subsubsection{Gender subsamples}


\renewcommand{\arraystretch}{.8}

<<echo = F, results = "hide">>=
Enr.Gender <- qread(paste0(pathsaveThisVer, "Enr.Base.qs"))
Enrchg.Gender <- qread(paste0(pathsaveThisVer, "Enrchg.Base.qs"))
setnames(Enr.Gender, "agHHdef", "gender")
setnames(Enrchg.Gender, "agHHdef", "gender")
AddToTabFNT <- "Cohorts of 10 to 18 year olds in 1999. Regressand is enrollment in 1999 and 2002. " 
TabFNLine1 <- "\\\\[-1ex] Notes:& 1. A first-difference estimator with standard errors clustered at \\textit{thana} level. Mean days of absence in 1999, 2002 are"
EnrNote1 <- Enr.Gender[grepl("zEm.1999", sample) & grepl("10", agelb)  & grepl("nu", HHtype) & grepl("girl", gender) & grepl("1", agHH), rate]
EnrAg = "for agricultural households,"
EnrNote2 <- Enr.Gender[grepl("zEm.1999", sample) & grepl("10", agelb) & grepl("nu", HHtype) & grepl("girl", gender) & grepl("0", agHH), rate]
EnrNonAg = "for non-agricultural households, respectively, with a difference-in-differences of"
EnrNote3 <- Enrchg.Gender[grepl("zEm.1999", sample) & grepl("10", agelb) & grepl("nu", HHtype) & grepl("girl", gender), "AgNonag", with = F]
@
\Sexpr{
DisplayEstTable(
  TwoContinuedTables = T
  , TABFilePath1 = TabFilePathF(
      FolderPath = pathsaveThisVer, 
      Sample = gsub("\\.", "", zSobj[1]), 
      AgeCutoff = paste0("Older", (10:12)[1]),
      HHType = paste0(c("Boys", "Girls", "")[2],
        c("", "Nuclear", "ExOnly")[2]),
      AgHHDef = c("", "Is", "Hd", "Occ")[1],
      CRSEMethod = "Satterthwaite1")
  , TABFilePath2 = TabFilePathF(
      FolderPath = pathsaveThisVer, 
      Sample = gsub("\\.", "", zSobj[1]), 
      AgeCutoff = paste0("Older", (10:12)[1]),
      HHType = paste0(c("Boys", "Girls", "")[2],
        c("", "Nuclear", "ExOnly")[2]),
      AgHHDef = c("", "Is", "Hd", "Occ")[1],
      CRSEMethod = "Satterthwaite2")
  , TABTitle="Girls 1999-2002, direct offsprings, Satterthwaite correction",
  ArrayStrech=".75")
}
<<echo = F, results = "hide">>=
EnrNote1 <- Enr.Gender[grepl("zEm.1999", sample) & grepl("10", agelb)  & grepl("all", HHtype) & grepl("bo", gender) & grepl("1", agHH), rate]
EnrNote2 <- Enr.Gender[grepl("zEm.1999", sample) & grepl("10", agelb) & grepl("all", HHtype) & grepl("bo", gender) & grepl("0", agHH), rate]
EnrNote3 <- Enrchg.Gender[grepl("zEm.1999", sample) & grepl("10", agelb) & grepl("all", HHtype) & grepl("bo", gender), "AgNonag", with = F]
@
\Sexpr{
DisplayEstTable(
  TwoContinuedTables = T,
  , TABFilePath1 = TabFilePathF(
      FolderPath = pathsaveThisVer, 
      Sample = gsub("\\.", "", zSobj[1]), 
      AgeCutoff = paste0("Older", (10:12)[1]),
      HHType = paste0(c("Boys", "Girls", "")[1],
        c("", "Nuclear", "ExOnly")[2]),
      AgHHDef = c("", "Is", "Hd", "Occ")[1],
      CRSEMethod = "Satterthwaite1")
  , TABFilePath2 = TabFilePathF(
      FolderPath = pathsaveThisVer, 
      Sample = gsub("\\.", "", zSobj[1]), 
      AgeCutoff = paste0("Older", (10:12)[1]),
      HHType = paste0(c("Boys", "Girls", "")[1],
        c("", "Nuclear", "ExOnly")[2]),
      AgHHDef = c("", "Is", "Hd", "Occ")[1],
      CRSEMethod = "Satterthwaite2")
  , TABTitle="Boys 1999-2002, direct offsprings, Satterthwaite correction")
}

\Sexpr{
DisplayEstTable(
  TwoContinuedTables = T,
  , TABFilePath1 = TabFilePathF(
      FolderPath = pathsaveThisVer, 
      Sample = "zEp1999", 
      AgeCutoff = paste0("Older", (10:12)[1]),
      HHType = paste0(c("Boys", "Girls", "")[1],
        c("", "Nuclear", "ExOnly")[2]),
      AgHHDef = c("", "Is", "Hd", "Occ")[1],
      CRSEMethod = "Satterthwaite1")
  , TABFilePath2 = TabFilePathF(
      FolderPath = pathsaveThisVer, 
      Sample = "zEp1999", 
      AgeCutoff = paste0("Older", (10:12)[1]),
      HHType = paste0(c("Boys", "Girls", "")[1],
        c("", "Nuclear", "ExOnly")[2]),
      AgHHDef = c("", "Is", "Hd", "Occ")[1],
      CRSEMethod = "Satterthwaite2")
  , TABTitle="Boys 2002-2006 (placebo), 10-18 in 1999, direct offsprings, Satterthwaite correction")
}

\Sexpr{
DisplayEstTable(
  TwoContinuedTables = T,
  , TABFilePath1 = TabFilePathF(
      FolderPath = pathsaveThisVer, 
      Sample = "zEp2002", 
      AgeCutoff = paste0("Older", (10:12)[1]),
      HHType = paste0(c("Boys", "Girls", "")[1],
        c("", "Nuclear", "ExOnly")[2]),
      AgHHDef = c("", "Is", "Hd", "Occ")[1],
      CRSEMethod = "Satterthwaite1")
  , TABFilePath2 = TabFilePathF(
      FolderPath = pathsaveThisVer, 
      Sample = "zEp2002", 
      AgeCutoff = paste0("Older", (10:12)[1]),
      HHType = paste0(c("Boys", "Girls", "")[1],
        c("", "Nuclear", "ExOnly")[2]),
      AgHHDef = c("", "Is", "Hd", "Occ")[1],
      CRSEMethod = "Satterthwaite2")
  , TABTitle="Boys 2002-2006 (placebo), 10-18 in 2002, direct offsprings, Satterthwaite correction")
}

<<echo = F, results = "hide">>=
EnrNote1 <- Enr.Gender[grepl("zEm.1999", sample) & grepl("10", agelb)  & grepl("nu", HHtype) & grepl("bo", gender) & grepl("1", agHH), rate]
EnrNote2 <- Enr.Gender[grepl("zEm.1999", sample) & grepl("10", agelb) & grepl("nu", HHtype) & grepl("bo", gender) & grepl("0", agHH), rate]
EnrNote3 <- Enrchg.Gender[grepl("zEm.1999", sample) & grepl("10", agelb) & grepl("nu", HHtype) & grepl("bo", gender), "AgNonag", with = F]
@
<<echo = F, results = "hide">>=
source(paste0(pathprogram, "TabGeneric.R"))
@

\Sexpr{
DisplayEstTable(
  TwoContinuedTables = T
  , TABFilePath1 = TabFilePathF(
      FolderPath = pathsaveThisVer, 
      Sample = gsub("\\.", "", zSobj[1]), 
      AgeCutoff = paste0("Older", (10:12)[1], "NonMuslim"),
      HHType = paste0(c("Boys", "Girls", "")[1],
        c("", "Nuclear", "ExOnly")[2]),
      AgHHDef = c("", "Is", "Hd", "Occ")[1],
    CRSEMethod = "Satterthwaite1")
  , TABFilePath2 = TabFilePathF(
      FolderPath = pathsaveThisVer, 
      Sample = gsub("\\.", "", zSobj[1]), 
      AgeCutoff = paste0("Older", (10:12)[1], "NonMuslim"),
      HHType = paste0(c("Boys", "Girls", "")[1],
        c("", "Nuclear", "ExOnly")[2]),
      AgHHDef = c("", "Is", "Hd", "Occ")[1],
    CRSEMethod = "Satterthwaite2")
  ,
  TABTitle="Non Muslim boys 1999-2002, direct offsprings, Satterthwaite correction")
}
\Sexpr{
DisplayEstTable(
  TwoContinuedTables = T
  , TABFilePath1 = TabFilePathF(
      FolderPath = pathsaveThisVer, 
      Sample = gsub("\\.", "", zSobj[1]), 
      AgeCutoff = paste0("Older", (10:12)[1], "Flood"),
      HHType = paste0(c("Boys", "Girls", "")[1],
        c("", "Nuclear", "ExOnly")[2]),
      AgHHDef = c("", "Is", "Hd", "Occ")[1],
    CRSEMethod = "Satterthwaite1")
  , TABFilePath2 = TabFilePathF(
      FolderPath = pathsaveThisVer, 
      Sample = gsub("\\.", "", zSobj[1]), 
      AgeCutoff = paste0("Older", (10:12)[1], "Flood"),
      HHType = paste0(c("Boys", "Girls", "")[1],
        c("", "Nuclear", "ExOnly")[2]),
      AgHHDef = c("", "Is", "Hd", "Occ")[1],
    CRSEMethod = "Satterthwaite2")
  ,
  TABTitle="Flood 1999-2002, boys, direct offspring, Satterthwaite correction")
}



\clearpage
\subsection{Selected main results for JHR}

<<plot main, eval = F>>=
library(ggplot2)
Res <- qread(paste0(pathsaveThisVer, "TabulatedAllResults.qs"))
re <- Res[grepl("Em", data) & grepl("ma", coeff) & grepl("4|6|7", reg) & grepl("B", inference)
   & grepl(0, agdef) & agelb == 10, ]
re[, yintercept := 0]
re[, spec := factor(reg, labels = 1:3)]
g <- 
ggplot(data = re, 
    aes(x = HHtype, y = beta, group = spec, fill = spec, shape = spec, colour = spec)) + 
  geom_pointrange(aes(ymin = CI_L, ymax = CI_U),
    stat = "identity", fatten = 1.75, 
    position = position_dodge(width = .5)) +
  scale_shape_manual(values = rep(c(0:6, 8), 2))+
  facet_grid(coeff ~ gender, scales = "free_y")+
  ThisThemeEnd+
  xlab("age groups") + 
  labs(color  = "regression specifications", fill = "regression specifications", 
    shape = "regression specifications") +
  guides(
    colour = guide_legend(title = "regression specifications", nrow = 1),
    fill = guide_legend(title = "regression specifications", nrow = 1),
    shape = guide_legend(title = "regression specifications", nrow = 1)
    ) +
  geom_hline(aes(yintercept = yintercept), colour = "lightgreen")
pdf(
  paste0(pathsaveThisVer, "MainImpactsByGender.pdf")
  , width = 2*12/2.54, height = 2*8/2.54)
print(g)
whatever <- dev.off()
@


<<select results for MainByAgHHdef for given Agelb>>=
Res <- qread(paste0(pathsaveThisVer, "TabulatedAllResults.qs"))
Enr <- qread(paste0(pathsaveThisVer, "TabulatedAllResultsEnr.qs"))
NR <- qread(paste0(pathsaveThisVer, "TabulatedAllResultsNR.qs"))
ii <- 1
agyr <- paste0("^agHH.yr|Sib.*H.*", (2:3)[ii], "$")
resl <- Res[grepl(agyr, Coef) & grepl(c("main", "placebo")[ii], objective), 
  .(Coef, data, gender, agdef, agelb, reg, HHtype, inference, beta, p, CI_L, CI_U)][
  order(data, gender, reg, HHtype, agdef, inference)]
resl[, Estimate := formatC(beta, digits = 4, format = "f")]
resl[, ci := paste0("\\mbox{\\tiny [", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), "]}")]
resl[grepl("^L", inference), ci := paste0("\\mbox{\\tiny (", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), ")}")]
AddStar <- T
if (AddStar) {
  resl[, est := Estimate]
  resl[, Estimate := paste0(est, "^{\\phantom{***}}")]
  resl[p < .1, Estimate := paste0(est, "^{*\\phantom{**}}")]
  resl[p < .05, Estimate := paste0(est, "^{**\\phantom{*}}")]
  resl[p < .01, Estimate := paste0(est, "^{***}")]
  resl[est > 0, Estimate := paste0("\\phantom{-}", Estimate)]
  resl[, est := NULL]
}
# main/placebo results
options(width=120)
for (s in 1:3) {
  mr <- resl[agelb == (10:12)[s] & grepl("m", data) & reg >= 5 & grepl("b.*g", gender), ]
  nR <- NR[agelb == (10:12)[s] & grepl("m", data) & reg >= 5 
    & grepl("^B", inference) & grepl("\\+", gender), ]
  enr0 <- Enr[agelb == (10:12)[s] & grepl("m", data) & grepl("B", inference) & grepl("\\+", gender), ]
  enr0[, EnRate := formatC(EnRate, digits = 4, format = "f")]
  for (m in 1:4) {
    # tabulate by specification
    main <- rbind(
      mr[grepl(aghh.defs[m], agdef) & grepl("^ag", Coef) & grepl("^B", inference), Estimate]
      ,
      unlist(mr[grepl(aghh.defs[m], agdef) & grepl("^ag", Coef) & grepl("Z", inference), ci])
      ,
      unlist(mr[grepl(aghh.defs[m], agdef) & grepl("^ag", Coef) & grepl("B", inference), ci])
    )
    sib <-  rbind(
       mr[grepl(aghh.defs[m], agdef)  & grepl("SibF.*H.*yr", Coef) & grepl("BR", inference), Estimate]
       , 
       mr[grepl(aghh.defs[m], agdef) & grepl("SibF.*H.*yr", Coef) & grepl("Z", inference), ci]
       ,
       mr[grepl(aghh.defs[m], agdef) & grepl("SibF.*H.*yr", Coef) & grepl("B", inference), ci]
       ,
       mr[grepl(aghh.defs[m], agdef) & grepl("SibM.*H.*yr", Coef) & grepl("BR", inference), Estimate]
       , 
       mr[grepl(aghh.defs[m], agdef) & grepl("SibM.*H.*yr", Coef) & grepl("Z", inference), ci]
       ,
       mr[grepl(aghh.defs[m], agdef) & grepl("SibM.*H.*yr", Coef) & grepl("B", inference), ci]
     )
     if (ncol(main) == 9) 
       sib <- cbind("", "", "", sib[, 1:2], "", sib[, 3:4], "") else
       sib <- cbind("", "", sib)
     nr <- rbind(
        formatC(nR[grepl(aghh.defs[m], agdef), ][order(reg, HHtype), R], digits = 4, format = "f")
      , formatC(nR[grepl(aghh.defs[m], agdef), ][order(reg, HHtype), Yes], digits = 0, format = "f")
      , formatC(nR[grepl(aghh.defs[m], agdef), ][order(reg, HHtype), n], digits = 0, format = "f")
     )
     enr <- matrix(
       enr0[grepl(aghh.defs[m], agdef), ][order(HHtype, agHH, tee), EnRate]
       , byrow = F, nrow = 4)
     if (ncol(main) == 9) enr <- enr[, rep(1:3, 3)] else enr <- enr[, rep(1:2, 3)]
     main <- rbind(main, sib, nr, enr)
     assign(paste0("main", m), main)
  }
  # ii = 1: 3 specs * 2 HHtypes = spec 1 all, spec 1 direct off, spec 2 all, ...
  mrtab <- rbind(main1, main2, main3, main4)
  mrtab <- 
    cbind(
        rep(c(
          "Agricultural households * year 2002", 
          "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
          "\\underline{\\phantom{mm}} * Older sisters",
          "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
          "\\underline{\\phantom{mm}} * Older brothers",
          "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
          "$\\bar{R}^{2}$", "N: Agricultural HHs", "N",
          paste0("Mean of ", rep(c("treated", "control"), each = 2), " in ", 
            list(rep(c(1999, 2002), 2), rep(c(2002, 2006), 2))[[1]])
           ), 4
        ), 
     mrtab)
  if (ncol(main)==9) SepCols <- c(3, 6) else SepCols <- c(2, 4) 
  ltb <- latextab(mrtab, delimiterline = NULL, 
      hcenter = c(3, rep(1.3, ncol(mrtab)-1)),
      hleft = c("\\scriptsize", rep("\\hfil\\scriptsize$", ncol(mrtab)-1)), 
      hright = c("\\hfill", rep("$", ncol(mrtab)-1)),
      headercolor = NULL, 
      adjustlineskip = "-1ex", adjlskiprows = grep("CI", mrtab[, 1])-1,
      addseparatingcols = SepCols, separatingcolwidth = rep(.1, 2), 
      separatingcoltitle = c("\\textsf{Specification 1}", "\\textsf{Specification 2}", "\\textsf{Specification 3}")
    ) 
  if (ncol(main)==9) 
    ltb <- c(
      ltb[1], 
      "\\hline", 
      ltb[2:grep("cline", ltb), ],
      paste0(
        "&\\textsf{All} & \\textsf{Direct} & \\textsf{ExOnly}",
        paste(rep("&&\\textsf{All} & \\textsf{Direct} & \\textsf{ExOnly}", 2), collapse = "")
        , "\\\\"),
      "&\\multicolumn{11}{l}{}\\\\",
      paste("AgHH def:", aghh.defs[1], "&",
        gsub("3\\)", "3)&", gsub("6\\)", "6)&", paste(paste0("(", 1:9, ")", collapse = "&"), "\\\\")))
        ),
      ltb[(grep("cline", ltb)+2):(grep("M.*rol in 2", ltb)[1]), ], 
      "&\\multicolumn{11}{l}{}\\\\",
      paste("AgHH def:", aghh.defs[2], "&",
        gsub("2\\)", "2)&", gsub("5\\)", "5)&", paste(paste0("(", 1:9+9, ")", collapse = "&"), "\\\\")))
        ),
      ltb[(grep("^Ag", ltb)[2]):(grep("M.*rol in 2", ltb)[2]), ],
      "&\\multicolumn{11}{l}{}\\\\",
      paste("AgHH def:", aghh.defs[3], "&",
        gsub("1\\)", "1)&", gsub("4\\)", "4)&", paste(paste0("(", 1:9+18, ")", collapse = "&"), "\\\\")))
        ),
      ltb[(grep("^Ag", ltb)[3]):(grep("M.*rol in 2", ltb)[3]), ], 
      "&\\multicolumn{11}{l}{}\\\\",
      paste("AgHH def:", aghh.defs[4], "&",
        gsub("0\\)", "0)&", gsub("3\\)", "3)&", paste(paste0("(", 1:9+27, ")", collapse = "&"), "\\\\")))
        ),
      ltb[(grep("^Ag", ltb)[4]):(grep("M.*rol in 2", ltb)[4]), ],
      "\\hline",
        ltb[nrow(ltb), ]
      ) else
    ltb <- c(
      ltb[1], 
      "\\hline", 
      ltb[2:grep("cline", ltb), ],
      paste0(
        "&\\textsf{All} & \\textsf{Direct}",
        paste(rep("&&\\textsf{All} & \\textsf{Direct}", 2), collapse = "")
        , "\\\\"),
      "&\\multicolumn{8}{l}{}\\\\",
      paste("AgHH def:", aghh.defs[1], "&",
        gsub("2\\)", "2)&", gsub("4\\)", "4)&", paste(paste0("(", 1:6, ")", collapse = "&"), "\\\\")))
        ),
      ltb[(grep("cline", ltb)+2):(grep("M.*rol in 2", ltb)[1]), ], 
      "&\\multicolumn{8}{l}{}\\\\",
      paste("AgHH def:", aghh.defs[2], "&",
        gsub("8\\)", "8)&", gsub("0\\)", "0)&", paste(paste0("(", 1:6+6, ")", collapse = "&"), "\\\\")))
        ),
      ltb[(grep("^Ag", ltb)[2]):(grep("M.*rol in 2", ltb)[2]), ],
      "&\\multicolumn{8}{l}{}\\\\",
      paste("AgHH def:", aghh.defs[3], "&",
        gsub("4\\)", "4)&", gsub("6\\)", "6)&", paste(paste0("(", 1:6+12, ")", collapse = "&"), "\\\\")))
        ),
      ltb[(grep("^Ag", ltb)[3]):(grep("M.*rol in 2", ltb)[3]), ], 
      "&\\multicolumn{8}{l}{}\\\\",
      paste("AgHH def:", aghh.defs[4], "&",
        gsub("0\\)", "0)&", gsub("2\\)", "2)&", paste(paste0("(", 1:6+18, ")", collapse = "&"), "\\\\")))
        ),
      ltb[(grep("^Ag", ltb)[4]):(grep("M.*rol in 2", ltb)[4]), ],
      "\\hline",
        ltb[nrow(ltb), ]
      )
  ltb <- gsub("CI \\(.*?\\)", "", ltb)
  ltb <- gsub("(^\\\\cline.*$)", "\\1[-1ex]", ltb)
  ltb <- gsub("households", "HHs", ltb)
  ltb <- gsub("Number of ol", "Ol", ltb)
  ltb <- ltb[!grepl("Raw", ltb)]
  write.tablev(ltb
    ,  paste0(pathsaveThisVer, "Main", (10:12)[s], "ByAgHHdefResults_Table.tex")
    ,  colnamestrue = F)
}
@
<<select results for MainByAgeLB for given agHH def>>=
Res <- qread(paste0(pathsaveThisVer, "TabulatedAllResults.qs"))
Enr <- qread(paste0(pathsaveThisVer, "TabulatedAllResultsEnr.qs"))
NR <- qread(paste0(pathsaveThisVer, "TabulatedAllResultsNR.qs"))
ii <- 1
Res[, ci := paste0("\\mbox{\\tiny [", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), "]}")]
Res[grepl("^L", inference), ci := paste0("\\mbox{\\tiny (", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), ")}")]
agyr <- paste0("^agHH.yr|Sib.*H.*", (2:3)[ii], "$")
mr0 <- Res[grepl(agyr, Coef) & grepl(c("main", "placebo")[ii], objective) 
  & grepl("\\+", gender), 
  .(Coef, data, agdef, agelb, reg, HHtype, inference, beta, p, ci)][
  order(data, reg, HHtype, agdef, inference)]
mr0[, Estimate := formatC(beta, digits = 4, format = "f")]
if (AddStar) {
  mr0[, est := Estimate]
  mr0[, Estimate := paste0(est, "^{\\phantom{***}}")]
  mr0[p < .1, Estimate := paste0(est, "^{*\\phantom{**}}")]
  mr0[p < .05, Estimate := paste0(est, "^{**\\phantom{*}}")]
  mr0[p < .01, Estimate := paste0(est, "^{***}")]
  mr0[est > 0, Estimate := paste0("\\phantom{-}", Estimate)]
  mr0[, est := NULL]
}
mr0[, inference := factor(inference, levels = c("LZ", "BRL", "WCB")[1:2])]

options(width=120)
for (m in 1:4) {
    mr <- mr0[grepl(aghh.defs[m], agdef) & grepl("m", data) & reg >= 5, ]
    nR <- NR[grepl(aghh.defs[m], agdef) & grepl("m", data) & reg >= 5
      & grepl("\\+", gender) & grepl("B", inference), ]
    enr0 <- Enr[grepl(aghh.defs[m], agdef) & grepl("m", data)
      & grepl("\\+", gender) & grepl("B", inference), ]
    enr0[, EnRate := formatC(EnRate, digits = 4, format = "f")]
  for (s in 1:3) {
    # tabulate by specification
    mr1 <- mr[agelb == (10:12)[s], ]
    nR1 <- nR[agelb == (10:12)[s], ]
    enr1 <- enr0[agelb == (10:12)[s], ]
    main <- rbind(
      mr1[grepl("^ag", Coef) & grepl("^B", inference), Estimate]
      ,
      unlist(mr1[grepl("^ag", Coef) & grepl("Z", inference), ci])
      ,
      unlist(mr1[grepl("^ag", Coef) & grepl("B", inference), ci])
    )
    sib <-  rbind(
       mr1[grepl("SibF.*H.*yr", Coef) & grepl("BR", inference), Estimate]
       , 
       mr1[grepl("SibF.*H.*yr", Coef) & grepl("Z", inference), ci]
       ,
       mr1[grepl("SibF.*H.*yr", Coef) & grepl("B", inference), ci]
       ,
       mr1[grepl("SibM.*H.*yr", Coef) & grepl("BR", inference), Estimate]
       , 
       mr1[grepl("SibM.*H.*yr", Coef) & grepl("Z", inference), ci]
       ,
       mr1[grepl("SibM.*H.*yr", Coef) & grepl("B", inference), ci]
     )
     if (ncol(main)==9) 
       sib <- cbind("", "", "", sib[, 1:2], "", sib[, 3:4], "") else
       sib <- cbind("", "", sib)
     nr <- rbind(
        formatC(nR1[order(reg, HHtype), R], digits = 4, format = "f")
      , formatC(nR1[order(reg, HHtype), Yes], digits = 0, format = "f")
      , formatC(nR1[order(reg, HHtype), n], digits = 0, format = "f")
     )
     enr <- matrix(
       enr1[order(HHtype, agHH, tee), EnRate]
       , byrow = F, nrow = 4)
     if (ncol(main)==9) enr <- enr[, rep(1:3, 3)] else enr <- enr[, rep(1:2, 3)]
     main <- rbind(main, sib, nr, enr)
     assign(paste0("main", s), main)
  }
  # ii = 1: 3 specs * 2 HHtypes = spec 1 all, spec 1 direct off, spec 2 all, ...
  mrtab <- rbind(main1, main2, main3)
  mrtab <- 
    cbind(
        rep(c(
          "Agricultural households * year 2002", 
          "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
          "\\underline{\\phantom{mm}} * Older sisters",
          "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
          "\\underline{\\phantom{mm}} * Older brothers",
          "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
          "$\\bar{R}^{2}$", "N: Agricultural HHs", "N",
          paste0("Mean of ", rep(c("treated", "control"), each = 2), " in ", 
            list(rep(c(1999, 2002), 2), rep(c(2002, 2006), 2))[[1]])
           ), 3
        ), 
     mrtab)
  if (ncol(main)==9) SepCols <- c(3, 6) else SepCols <- c(2, 4) 
  ltb <- latextab(mrtab, delimiterline = NULL, 
      hcenter = c(3, rep(1.3, ncol(mrtab)-1)),
      hleft = c("\\scriptsize", rep("\\hfil\\scriptsize$", ncol(mrtab)-1)), 
      hright = c("\\hfill", rep("$", ncol(mrtab)-1)),
      headercolor = NULL, 
      adjustlineskip = "-1ex", adjlskiprows = grep("CI", mrtab[, 1])-1,
      addseparatingcols = SepCols, separatingcolwidth = rep(.1, 2), 
      separatingcoltitle = c("\\textsf{Specification 1}", "\\textsf{Specification 2}", "\\textsf{Specification 3}")
    ) 
  if (ncol(main)==9) 
    ltb <- c(
      ltb[1]
      , 
      "\\hline"
      , 
      ltb[2:grep("cline", ltb), ]
      ,
      paste0(
        "&\\textsf{All} & \\textsf{Direct} & \\textsf{ExOnly}",
        paste(rep("&&\\textsf{All} & \\textsf{Direct} & \\textsf{ExOnly}", 2), collapse = "")
        , "\\\\")
      ,
      "&\\multicolumn{11}{c}{A. 10 - 18}\\\\"
      ,
      paste("&",
        gsub("3\\)", "3)&", gsub("6\\)", "6)&", paste(paste0("(", 1:9, ")", collapse = "&"), "\\\\")))
        )
      ,
      ltb[(grep("cline", ltb)+2):(grep("M.*rol in 2", ltb)[1]), ]
      , 
      "&\\multicolumn{11}{c}{B. 11 - 18}\\\\"
      ,
      paste("&",
        gsub("2\\)", "2)&", gsub("5\\)", "5)&", paste(paste0("(", 1:9+9, ")", collapse = "&"), "\\\\")))
        )
      ,
      ltb[(grep("^Ag", ltb)[2]):(grep("M.*rol in 2", ltb)[2]), ]
      ,
      "&\\multicolumn{11}{c}{C. 12 - 18}\\\\"
      ,
      paste("&",
        gsub("1\\)", "1)&", gsub("4\\)", "4)&", paste(paste0("(", 1:9+18, ")", collapse = "&"), "\\\\")))
        )
      ,
      ltb[(grep("^Ag", ltb)[3]):(grep("M.*rol in 2", ltb)[3]), ]
      , 
      "\\hline"
      ,
        ltb[nrow(ltb), ]
      ) else
    ltb <- c(
      ltb[1]
      , 
      "\\hline"
      , 
      ltb[2:grep("cline", ltb), ]
      ,
      paste0(
        "&\\textsf{All} & \\textsf{Direct}",
        paste(rep("&&\\textsf{All} & \\textsf{Direct}", 2), collapse = "")
        , "\\\\")
      ,
      "&\\multicolumn{8}{c}{A. 10 - 18}\\\\"
      ,
      paste("&",
        gsub("2\\)", "2)&", gsub("4\\)", "4)&", paste(paste0("(", 1:6, ")", collapse = "&"), "\\\\")))
        )
      ,
      ltb[(grep("cline", ltb)+2):(grep("M.*rol in 2", ltb)[1]), ]
      , 
      "&\\multicolumn{8}{c}{B. 11 - 18}\\\\"
      ,
      paste("&",
        gsub("8\\)", "8)&", gsub("0\\)", "0)&", paste(paste0("(", 1:6+6, ")", collapse = "&"), "\\\\")))
        )
      ,
      ltb[(grep("^Ag", ltb)[2]):(grep("M.*rol in 2", ltb)[2]), ]
      ,
      "&\\multicolumn{8}{c}{C. 12 - 18}\\\\"
      ,
      paste("&",
        gsub("4\\)", "4)&", gsub("6\\)", "6)&", paste(paste0("(", 1:6+12, ")", collapse = "&"), "\\\\")))
        )
      ,
      ltb[(grep("^Ag", ltb)[3]):(grep("M.*rol in 2", ltb)[3]), ]
      , 
      "\\hline"
      ,
        ltb[nrow(ltb), ]
      )
  ltb <- gsub("CI \\(.*?\\)", "", ltb)
  ltb <- gsub("(^\\\\cline.*$)", "\\1[-1ex]", ltb)
  ltb <- gsub("households", "HHs", ltb)
  ltb <- gsub("Number of ol", "Ol", ltb)
  ltb <- ltb[!grepl("Raw", ltb)]
  write.tablev(ltb
    ,  paste0(pathsaveThisVer, "MainByAgeLB", agd[m], "Results_Table.tex")
    ,  colnamestrue = F)
}
@

<<select results for MainByGenderByAgeLB for agHH0>>=
Res <- qread(paste0(pathsaveThisVer, "TabulatedAllResults.qs"))
Enr <- qread(paste0(pathsaveThisVer, "TabulatedAllResultsEnr.qs"))
NR <- qread(paste0(pathsaveThisVer, "TabulatedAllResultsNR.qs"))
ii <- 1
Res[, ci := paste0("\\mbox{\\tiny [", 
  formatC(CI_L, digits = 2, format = "f"), ", ", 
  formatC(CI_U, digits = 2, format = "f"), "]}")]
Res[grepl("^L", inference), ci := paste0("\\mbox{\\tiny (", 
  formatC(CI_L, digits = 2, format = "f"), ", ", 
  formatC(CI_U, digits = 2, format = "f"), ")}")]
agyr <- paste0("^agHH.yr|Sib.*H.*", (2:3)[ii], "$")
mr0 <- Res[grepl(agyr, Coef) & grepl("Em.1", data) & grepl(0, agdef)
  & grepl("dir", HHtype) & grepl("4|6|7", reg), 
  .(Coef, data, agdef, agelb, gender, reg, HHtype, inference, beta, p, ci)][
  order(data, reg, HHtype, agdef, inference)]
mr0[, Estimate := formatC(beta, digits = 4, format = "f")]
if (AddStar) {
  mr0[, est := Estimate]
  mr0[, Estimate := paste0(est, "^{\\phantom{***}}")]
  mr0[p < .1, Estimate := paste0(est, "^{*\\phantom{**}}")]
  mr0[p < .05, Estimate := paste0(est, "^{**\\phantom{*}}")]
  mr0[p < .01, Estimate := paste0(est, "^{***}")]
  mr0[est > 0, Estimate := paste0("\\phantom{-}", Estimate)]
  mr0[, est := NULL]
}
mr0[, inference := factor(inference, levels = c("LZ", "BRL", "WCB")[1:2])]
options(width=120)
nR <- NR[grepl(0, agdef) & grepl("m", data) & grepl("4|6|7", reg)
  & grepl("^di", HHtype) & grepl("B", inference), ]
enr0 <- Enr[grepl(aghh.defs[m], agdef) & grepl("m", data)
  & grepl("^di", HHtype) & grepl("B", inference), ]
enr0[, EnRate := formatC(EnRate, digits = 4, format = "f")]
for (s in 1:3) {
  # tabulate by specification
  mr1 <- mr0[agelb == (10:12)[s], ]
  nR1 <- nR[agelb == (10:12)[s], ]
  enr1 <- enr0[agelb == (10:12)[s], ]
  main <- rbind(
    mr1[grepl("^ag", Coef) & grepl("^B", inference), Estimate]
    ,
    unlist(mr1[grepl("^ag", Coef) & grepl("Z", inference), ci])
    ,
    unlist(mr1[grepl("^ag", Coef) & grepl("B", inference), ci])
  )
  sib <-  rbind(
     mr1[grepl("SibF.*H.*yr", Coef) & grepl("BR", inference), Estimate]
     , 
     mr1[grepl("SibF.*H.*yr", Coef) & grepl("Z", inference), ci]
     ,
     mr1[grepl("SibF.*H.*yr", Coef) & grepl("B", inference), ci]
     ,
     mr1[grepl("SibM.*H.*yr", Coef) & grepl("BR", inference), Estimate]
     , 
     mr1[grepl("SibM.*H.*yr", Coef) & grepl("Z", inference), ci]
     ,
     mr1[grepl("SibM.*H.*yr", Coef) & grepl("B", inference), ci]
   )
   sib <- cbind("", sib[, 1:2], "", sib[, 3:4], "", sib[, 5:6])
   nr <- rbind(
      formatC(nR1[order(reg, gender), R], digits = 4, format = "f")
    , formatC(nR1[order(reg, gender), Yes], digits = 0, format = "f")
    , formatC(nR1[order(reg, gender), n], digits = 0, format = "f")
   )
   enr <- matrix(
     enr1[order(gender, agHH, tee), EnRate]
     , byrow = F, nrow = 4)
   enr <- enr[, rep(1:3, 3)]
   main <- rbind(main, sib, nr, enr)
   assign(paste0("main", s), main)
}
# ii = 1: 3 specs * 2 HHtypes = spec 1 all, spec 1 direct off, spec 2 all, ...
mrtab <- rbind(main1, main2, main3)
mrtab <- 
  cbind(
      rep(c(
        "Agricultural households * year 2002", 
        "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
        "\\underline{\\phantom{mm}} * Older sisters",
        "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
        "\\underline{\\phantom{mm}} * Older brothers",
        "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
        "$\\bar{R}^{2}$", "N: Agricultural HHs", "N",
        paste0("Mean of ", rep(c("treated", "control"), each = 2), " in ", 
          list(rep(c(1999, 2002), 2), rep(c(2002, 2006), 2))[[1]])
         ), 3
      ), 
   mrtab)
if (ncol(main)==9) SepCols <- c(3, 6) else SepCols <- c(2, 4) 
ltb <- latextab(mrtab, delimiterline = NULL, 
    hcenter = c(3, rep(1.3, ncol(mrtab)-1)),
    hleft = c("\\scriptsize", rep("\\hfil\\scriptsize$", ncol(mrtab)-1)), 
    hright = c("\\hfill", rep("$", ncol(mrtab)-1)),
    headercolor = NULL, 
    adjustlineskip = "-1ex", adjlskiprows = grep("CI", mrtab[, 1])-1,
    addseparatingcols = SepCols, separatingcolwidth = rep(.1, 2), 
    separatingcoltitle = c("\\textsf{Specification 1}", "\\textsf{Specification 2}", "\\textsf{Specification 3}")
  ) 
ltb <- c(
  ltb[1], "\\hline", 
  ltb[2:grep("cline", ltb), ],
  paste0(
    "&\\textsf{Boys} & \\textsf{Girls} & \\textsf{Boys+Girls}",
    paste(rep("&&\\textsf{Boys} & \\textsf{Girls} & \\textsf{Boys+Girls}", 2), collapse = "")
    , "\\\\"),
  "&\\multicolumn{11}{c}{A. 10 - 18}\\\\",
  paste("&",
    gsub("3\\)", "3)&", gsub("6\\)", "6)&", paste(paste0("(", 1:9, ")", collapse = "&"), "\\\\")))
    ),
  ltb[(grep("cline", ltb)+2):(grep("M.*rol in 2", ltb)[1]), ]
  , 
  "&\\multicolumn{11}{c}{B. 11 - 18}\\\\",
  paste("&",
    gsub("2\\)", "2)&", gsub("5\\)", "5)&", paste(paste0("(", 1:9+9, ")", collapse = "&"), "\\\\")))
    ),
  ltb[(grep("^Ag", ltb)[2]):(grep("M.*rol in 2", ltb)[2]), ],
  "&\\multicolumn{11}{c}{C. 12 - 18}\\\\",
  paste("&",
    gsub("1\\)", "1)&", gsub("4\\)", "4)&", paste(paste0("(", 1:9+18, ")", collapse = "&"), "\\\\")))
    ),
  ltb[(grep("^Ag", ltb)[3]):(grep("M.*rol in 2", ltb)[3]), ], 
  "\\hline",
    ltb[nrow(ltb), ]
  ) 
ltb <- gsub("CI \\(.*?\\)", "", ltb)
ltb <- gsub("(^\\\\cline.*$)", "\\1[-1ex]", ltb)
ltb <- gsub("households", "HHs", ltb)
ltb <- gsub("Number of ol", "Ol", ltb)
ltb <- ltb[!grepl("Raw", ltb)]
write.tablev(ltb
  ,  paste0(pathsaveThisVer, "MainByGenderByAgeLBAgHH0Results.tex")
  ,  colnamestrue = F)
@

<<select results for MainByGenderByAgHHdef for given Agelb>>=
Res <- qread(paste0(pathsaveThisVer, "TabulatedAllResults.qs"))
Enr <- qread(paste0(pathsaveThisVer, "TabulatedAllResultsEnr.qs"))
NR <- qread(paste0(pathsaveThisVer, "TabulatedAllResultsNR.qs"))
for (ii in 1) {
  agyr <- paste0("^agHH.yr|Sib.*H.*", (2:3)[ii], "$")
  resl <- Res[grepl(agyr, Coef) & grepl("di", HHtype) &
    grepl(c("main", "placebo")[ii], objective), 
    .(Coef, data, gender, agdef, agelb, reg, HHtype, inference, beta, p, CI_L, CI_U)][
    order(data, gender, reg, HHtype, agdef, inference)]
  nR <- NR[grepl("di", HHtype) & grepl("^B", inference), ]
  enr00 <- Enr[grepl("di", HHtype) & grepl("^B", inference),] 
  resl[, Estimate := formatC(beta, digits = 4, format = "f")]
  resl[, ci := paste0("\\mbox{\\tiny [", 
    formatC(CI_L, digits = 3, format = "f"), ", ", 
    formatC(CI_U, digits = 3, format = "f"), "]}")]
  resl[grepl("^L", inference), ci := paste0("\\mbox{\\tiny (", 
    formatC(CI_L, digits = 3, format = "f"), ", ", 
    formatC(CI_U, digits = 3, format = "f"), ")}")]
  resl[, gender := factor(gender, levels = genderitems)]
  nR[, gender := factor(gender, levels = genderitems)]
  enr00[, gender := factor(gender, levels = genderitems)]
  AddStar <- T
  if (AddStar) {
    resl[, est := Estimate]
    resl[, Estimate := paste0(est, "^{\\phantom{***}}")]
    resl[p < .1, Estimate := paste0(est, "^{*\\phantom{**}}")]
    resl[p < .05, Estimate := paste0(est, "^{**\\phantom{*}}")]
    resl[p < .01, Estimate := paste0(est, "^{***}")]
    resl[est > 0, Estimate := paste0("\\phantom{-}", Estimate)]
    resl[, est := NULL]
  }
  # main/placebo results
  options(width=120)
  setkey(resl, data, Coef, agelb, reg, gender)
  if (ii == 1) jmax <- 1 else jmax <- 2
  for (jj in 1:jmax) {
    if (ii == 2) thisdata <- c("Ep.1", "Ep.2")[jj] else thisdata <- "Em.1"
    for (s in 1:3) {
      mr <- resl[grepl(thisdata, data) & agelb == (10:12)[s] & reg >= 4 & reg != 5, ]
      nr0 <- nR[grepl(thisdata, data) & agelb == (10:12)[s] & reg >= 4 & reg != 5, ]
      enr0 <- enr00[grepl(thisdata, data) & agelb == (10:12)[s], ]
      enr0[, EnRate := formatC(EnRate, digits = 4, format = "f")]
      for (m in 1:4) {
        # tabulate by specification
        main <- rbind(
          mr[grepl(aghh.defs[m], agdef) & grepl("^ag", Coef) & grepl("^B", inference), Estimate]
          ,
          unlist(mr[grepl(aghh.defs[m], agdef) & grepl("^ag", Coef) & grepl("Z", inference), ci])
          ,
          unlist(mr[grepl(aghh.defs[m], agdef) & grepl("^ag", Coef) & grepl("B", inference), ci])
        )
        sib <-  rbind(
           mr[grepl(aghh.defs[m], agdef)  & grepl("SibF.*H.*yr", Coef) & grepl("BR", inference), Estimate]
           , 
           mr[grepl(aghh.defs[m], agdef) & grepl("SibF.*H.*yr", Coef) & grepl("Z", inference), ci]
           ,
           mr[grepl(aghh.defs[m], agdef) & grepl("SibF.*H.*yr", Coef) & grepl("B", inference), ci]
           ,
           mr[grepl(aghh.defs[m], agdef) & grepl("SibM.*H.*yr", Coef) & grepl("BR", inference), Estimate]
           , 
           mr[grepl(aghh.defs[m], agdef) & grepl("SibM.*H.*yr", Coef) & grepl("Z", inference), ci]
           ,
           mr[grepl(aghh.defs[m], agdef) & grepl("SibM.*H.*yr", Coef) & grepl("B", inference), ci]
         )
         sib <- cbind("", "", "", sib[, 1:3], sib[, 4:6])
         nr <- rbind(
            formatC(nr0[grepl(aghh.defs[m], agdef), ][order(reg, HHtype), R], digits = 4, format = "f")
          , formatC(nr0[grepl(aghh.defs[m], agdef), ][order(reg, HHtype), Yes], digits = 0, format = "f")
          , formatC(nr0[grepl(aghh.defs[m], agdef), ][order(reg, HHtype), n], digits = 0, format = "f")
         )
         enr <- matrix(
           enr0[grepl(aghh.defs[m], agdef), ][order(HHtype, agHH, tee), EnRate]
           , byrow = F, nrow = 4)
         enr <- enr[, rep(1:3, 3)]
         main <- rbind(main, sib, nr, enr)
         assign(paste0("main", m), main)
      }
      # ii = 1: 3 specs * 2 HHtypes = spec 1 all, spec 1 direct off, spec 2 all, ...
      mrtab <- rbind(main1, main2, main3, main4)
      mrtab <- 
        cbind(
            rep(c(
              "Agricultural households * year 2002", 
              "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
              "\\underline{\\phantom{mm}} * Older sisters",
              "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
              "\\underline{\\phantom{mm}} * Older brothers",
              "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
              "$\\bar{R}^{2}$", "N: Agricultural HHs", "N",
              paste0("Mean of ", rep(c("treated", "control"), each = 2), " in ", 
                list(rep(c(1999, 2002), 2), rep(c(2002, 2006), 2))[[1]])
               ), 4
            ), 
         mrtab)
      SepCols <- c(3, 6) 
      ltb <- latextab(mrtab, delimiterline = NULL, 
          hcenter = c(3, rep(1.3, ncol(mrtab)-1)),
          hleft = c("\\scriptsize", rep("\\hfil\\scriptsize$", ncol(mrtab)-1)), 
          hright = c("\\hfill", rep("$", ncol(mrtab)-1)),
          headercolor = NULL, 
          adjustlineskip = "-1ex", adjlskiprows = grep("CI", mrtab[, 1])-1,
          addseparatingcols = SepCols, separatingcolwidth = rep(.1, 2), 
          separatingcoltitle = c("\\textsf{Specification 1}", "\\textsf{Specification 2}", "\\textsf{Specification 3}")
        ) 
      ltb <- c(
        ltb[1], "\\hline", 
        ltb[2:grep("cline", ltb), ],
        paste0(
          "&\\textsf{Boys} & \\textsf{Girls} & \\textsf{Boys+girls}",
          paste(rep("&&\\textsf{Boys} & \\textsf{Girls} & \\textsf{Boys+girls}", 2), collapse = "")
          , "\\\\"),
        "&\\multicolumn{11}{l}{}\\\\",
        paste("AgHH def:", aghh.defs[1], "&",
          gsub("3\\)", "3)&", gsub("6\\)", "6)&", paste(paste0("(", 1:9, ")", collapse = "&"), "\\\\")))
          ),
        ltb[(grep("cline", ltb)+2):(grep("M.*rol in 2", ltb)[1]), ], 
        "&\\multicolumn{11}{l}{}\\\\",
        paste("AgHH def:", aghh.defs[2], "&",
          gsub("2\\)", "2)&", gsub("5\\)", "5)&", paste(paste0("(", 1:9+9, ")", collapse = "&"), "\\\\")))
          ),
        ltb[(grep("^Ag", ltb)[2]):(grep("M.*rol in 2", ltb)[2]), ],
        "&\\multicolumn{11}{l}{}\\\\",
        paste("AgHH def:", aghh.defs[3], "&",
          gsub("1\\)", "1)&", gsub("4\\)", "4)&", paste(paste0("(", 1:9+18, ")", collapse = "&"), "\\\\")))
          ),
        ltb[(grep("^Ag", ltb)[3]):(grep("M.*rol in 2", ltb)[3]), ], 
        "&\\multicolumn{11}{l}{}\\\\",
        paste("AgHH def:", aghh.defs[4], "&",
          gsub("0\\)", "0)&", gsub("3\\)", "3)&", paste(paste0("(", 1:9+27, ")", collapse = "&"), "\\\\")))
          ),
        ltb[(grep("^Ag", ltb)[4]):(grep("M.*rol in 2", ltb)[4]), ], "\\hline",
          ltb[nrow(ltb), ]
        ) 
      ltb <- gsub("CI \\(.*?\\)", "", ltb)
      ltb <- gsub("(^\\\\cline.*$)", "\\1[-1ex]", ltb)
      ltb <- gsub("households", "HHs", ltb)
      ltb <- gsub("Number of ol", "Ol", ltb)
      ltb <- ltb[!grepl("Raw", ltb)]
      write.tablev(ltb
        ,  paste0(pathsaveThisVer, c("Main", "Placebo")[ii], c(1999, 2002)[jj], "Older", (10:12)[s], 
             "ByGenderByAgHHdefResults_Table.tex")
        ,  colnamestrue = F)
    } # s
  } # data
} # main/placebo
@
<<select results for PlaceboByAgHHdef for given Agelb>>=
Res <- qread(paste0(pathsaveThisVer, "TabulatedAllResults.qs"))
Enr <- qread(paste0(pathsaveThisVer, "TabulatedAllResultsEnr.qs"))
NR <- qread(paste0(pathsaveThisVer, "TabulatedAllResultsNR.qs"))
ii <- 2
agyr <- paste0("^agHH.yr|Sib.*H.*", (2:3)[ii], "$")
resl <- Res[grepl(agyr, Coef) & grepl("s.g", gender) &
  grepl(c("main", "placebo")[ii], objective), 
  .(Coef, data, agdef, agelb, reg, HHtype, inference, beta, p, CI_L, CI_U)][
  order(data, HHtype, reg, agdef, inference)]
nR <- NR[grepl("s.g", gender) & grepl("^B", inference), ]
enr00 <- Enr[grepl("s.g", gender) & grepl("^B", inference),] 
resl[, Estimate := formatC(beta, digits = 4, format = "f")]
resl[, ci := paste0("\\mbox{\\tiny [", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), "]}")]
resl[grepl("^L", inference), ci := paste0("\\mbox{\\tiny (", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), ")}")]
AddStar <- T
if (AddStar) {
  resl[, est := Estimate]
  resl[, Estimate := paste0(est, "^{\\phantom{***}}")]
  resl[p < .1, Estimate := paste0(est, "^{*\\phantom{**}}")]
  resl[p < .05, Estimate := paste0(est, "^{**\\phantom{*}}")]
  resl[p < .01, Estimate := paste0(est, "^{***}")]
  resl[est > 0, Estimate := paste0("\\phantom{-}", Estimate)]
  resl[, est := NULL]
}
# main/placebo results
options(width=120)
setkey(resl, data, Coef, agdef, agelb, reg, HHtype)
for (jj in 1:2) {
  thisdata <- c("Ep.1", "Ep.2")[jj]
  for (s in 1:3) {
    mr <- resl[grepl(thisdata, data) & agelb == (10:12)[s] & reg >= 4 & reg != 5, ]
    nr0 <- nR[grepl(thisdata, data) & agelb == (10:12)[s] & reg >= 4 & reg != 5, ]
    enr0 <- enr00[grepl(thisdata, data) & agelb == (10:12)[s], ]
    enr0[, EnRate := formatC(EnRate, digits = 4, format = "f")]
    for (m in 1:4) {
      # tabulate by specification
      main <- rbind(
        mr[grepl(aghh.defs[m], agdef) & grepl("^ag", Coef) & grepl("^B", inference), Estimate]
        ,
        mr[grepl(aghh.defs[m], agdef) & grepl("^ag", Coef) & grepl("Z", inference), ci]
        ,
        mr[grepl(aghh.defs[m], agdef) & grepl("^ag", Coef) & grepl("^B", inference), ci]
      )
      sib <-  rbind(
         mr[grepl(aghh.defs[m], agdef)  & grepl("SibF.*H.*yr", Coef) & grepl("BR", inference), Estimate]
         , 
         mr[grepl(aghh.defs[m], agdef) & grepl("SibF.*H.*yr", Coef) & grepl("Z", inference), ci]
         ,
         mr[grepl(aghh.defs[m], agdef) & grepl("SibF.*H.*yr", Coef) & grepl("B", inference), ci]
         ,
         mr[grepl(aghh.defs[m], agdef) & grepl("SibM.*H.*yr", Coef) & grepl("BR", inference), Estimate]
         , 
         mr[grepl(aghh.defs[m], agdef) & grepl("SibM.*H.*yr", Coef) & grepl("Z", inference), ci]
         ,
         mr[grepl(aghh.defs[m], agdef) & grepl("SibM.*H.*yr", Coef) & grepl("B", inference), ci]
       )
       if (ncol(main) == 9) 
         sib <- cbind("", "", "", sib[, 1:2], "", sib[, 3:4], "") else
         sib <- cbind("", "", sib)
       nr <- rbind(
          formatC(nr0[grepl(aghh.defs[m], agdef), ][order(reg, HHtype), R], digits = 4, format = "f")
        , formatC(nr0[grepl(aghh.defs[m], agdef), ][order(reg, HHtype), Yes], digits = 0, format = "f")
        , formatC(nr0[grepl(aghh.defs[m], agdef), ][order(reg, HHtype), n], digits = 0, format = "f")
       )
       enr <- matrix(
         enr0[grepl(aghh.defs[m], agdef), ][order(HHtype, agHH, tee), EnRate]
         , byrow = F, nrow = 4)
       if (ncol(main) == 9) enr <- enr[, rep(1:3, 3)] else enr <- enr[, rep(1:2, 3)]
       main <- rbind(main, sib, nr, enr)
       assign(paste0("main", m), main)
    }
    # ii = 1: 3 specs * 2 HHtypes = spec 1 all, spec 1 direct off, spec 2 all, ...
    mrtab <- rbind(main1, main2, main3, main4)
    mrtab <- 
      cbind(
          rep(c(
            "Agricultural households * year 2002", 
            "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
            "\\underline{\\phantom{mm}} * Older sisters",
            "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
            "\\underline{\\phantom{mm}} * Older brothers",
            "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
            "$\\bar{R}^{2}$", "N: Agricultural HHs", "N",
            paste0("Mean of ", rep(c("treated", "control"), each = 2), " in ", 
              list(rep(c(1999, 2002), 2), rep(c(2002, 2006), 2))[[1]])
             ), 4
          ), 
       mrtab)
    if (ncol(main)==9) SepCols <- c(3, 6) else SepCols <- c(2, 4) 
    ltb <- latextab(mrtab, delimiterline = NULL, 
        hcenter = c(3, rep(1.3, ncol(mrtab)-1)),
        hleft = c("\\scriptsize", rep("\\hfil\\scriptsize$", ncol(mrtab)-1)), 
        hright = c("\\hfill", rep("$", ncol(mrtab)-1)),
        headercolor = NULL, 
        adjustlineskip = "-1ex", adjlskiprows = grep("CI", mrtab[, 1])-1,
        addseparatingcols = SepCols, separatingcolwidth = rep(.1, 2), 
        separatingcoltitle = c("\\textsf{Specification 1}", "\\textsf{Specification 2}", "\\textsf{Specification 3}")
      ) 
  if (ncol(main)==9) 
    ltb <- c(
      ltb[1], 
      "\\hline", 
      ltb[2:grep("cline", ltb), ],
      paste0(
        "&\\textsf{All} & \\textsf{Direct} & \\textsf{ExOnly}",
        paste(rep("&&\\textsf{All} & \\textsf{Direct} & \\textsf{ExOnly}", 2), collapse = "")
        , "\\\\"),
      "&\\multicolumn{11}{l}{}\\\\",
      paste("AgHH def:", aghh.defs[1], "&",
        gsub("3\\)", "3)&", gsub("6\\)", "6)&", paste(paste0("(", 1:9, ")", collapse = "&"), "\\\\")))
        ),
      ltb[(grep("cline", ltb)+2):(grep("M.*rol in 2", ltb)[1]), ], 
      "&\\multicolumn{11}{l}{}\\\\",
      paste("AgHH def:", aghh.defs[2], "&",
        gsub("2\\)", "2)&", gsub("5\\)", "5)&", paste(paste0("(", 1:9+9, ")", collapse = "&"), "\\\\")))
        ),
      ltb[(grep("^Ag", ltb)[2]):(grep("M.*rol in 2", ltb)[2]), ],
      "&\\multicolumn{11}{l}{}\\\\",
      paste("AgHH def:", aghh.defs[3], "&",
        gsub("1\\)", "1)&", gsub("4\\)", "4)&", paste(paste0("(", 1:9+18, ")", collapse = "&"), "\\\\")))
        ),
      ltb[(grep("^Ag", ltb)[3]):(grep("M.*rol in 2", ltb)[3]), ], 
      "&\\multicolumn{11}{l}{}\\\\",
      paste("AgHH def:", aghh.defs[4], "&",
        gsub("0\\)", "0)&", gsub("3\\)", "3)&", paste(paste0("(", 1:9+27, ")", collapse = "&"), "\\\\")))
        ),
      ltb[(grep("^Ag", ltb)[4]):(grep("M.*rol in 2", ltb)[4]), ],
      "\\hline",
        ltb[nrow(ltb), ]
      ) else
    ltb <- c(
      ltb[1], 
      "\\hline", 
      ltb[2:grep("cline", ltb), ],
      paste0(
        "&\\textsf{All} & \\textsf{Direct}",
        paste(rep("&&\\textsf{All} & \\textsf{Direct}", 2), collapse = "")
        , "\\\\"),
      "&\\multicolumn{8}{l}{}\\\\",
      paste("AgHH def:", aghh.defs[1], "&",
        gsub("2\\)", "2)&", gsub("4\\)", "4)&", paste(paste0("(", 1:6, ")", collapse = "&"), "\\\\")))
        ),
      ltb[(grep("cline", ltb)+2):(grep("M.*rol in 2", ltb)[1]), ], 
      "&\\multicolumn{8}{l}{}\\\\",
      paste("AgHH def:", aghh.defs[2], "&",
        gsub("8\\)", "8)&", gsub("0\\)", "0)&", paste(paste0("(", 1:6+6, ")", collapse = "&"), "\\\\")))
        ),
      ltb[(grep("^Ag", ltb)[2]):(grep("M.*rol in 2", ltb)[2]), ],
      "&\\multicolumn{8}{l}{}\\\\",
      paste("AgHH def:", aghh.defs[3], "&",
        gsub("4\\)", "4)&", gsub("6\\)", "6)&", paste(paste0("(", 1:6+12, ")", collapse = "&"), "\\\\")))
        ),
      ltb[(grep("^Ag", ltb)[3]):(grep("M.*rol in 2", ltb)[3]), ], 
      "&\\multicolumn{8}{l}{}\\\\",
      paste("AgHH def:", aghh.defs[4], "&",
        gsub("0\\)", "0)&", gsub("2\\)", "2)&", paste(paste0("(", 1:6+18, ")", collapse = "&"), "\\\\")))
        ),
      ltb[(grep("^Ag", ltb)[4]):(grep("M.*rol in 2", ltb)[4]), ],
      "\\hline",
        ltb[nrow(ltb), ]
      )
    ltb <- gsub("CI \\(.*?\\)", "", ltb)
    ltb <- gsub("(^\\\\cline.*$)", "\\1[-1ex]", ltb)
    ltb <- gsub("households", "HHs", ltb)
    ltb <- gsub("Number of ol", "Ol", ltb)
    ltb <- ltb[!grepl("Raw", ltb)]
    write.tablev(ltb
      ,  paste0(pathsaveThisVer, "Placebo", c(1999, 2002)[jj], "Older", (10:12)[s], "ByHHtypeByAgHHdefResults_Table.tex")
      ,  colnamestrue = F)
  } # s
} # data
@
<<select results for PlaceboByGenderByAgHHdef for given Agelb>>=
Res <- qread(paste0(pathsaveThisVer, "TabulatedAllResults.qs"))
Enr <- qread(paste0(pathsaveThisVer, "TabulatedAllResultsEnr.qs"))
NR <- qread(paste0(pathsaveThisVer, "TabulatedAllResultsNR.qs"))
ii <- 2
agyr <- paste0("^agHH.yr|Sib.*H.*", (2:3)[ii], "$")
resl <- Res[grepl(agyr, Coef) & grepl("di", HHtype) &
  grepl(c("main", "placebo")[ii], objective), 
  .(Coef, data, gender, agdef, agelb, reg, HHtype, inference, beta, p, CI_L, CI_U)][
  order(data, gender, reg, HHtype, agdef, inference)]
nR <- NR[grepl("di", HHtype) & grepl("^B", inference), ]
enr00 <- Enr[grepl("di", HHtype) & grepl("^B", inference),] 
resl[, Estimate := formatC(beta, digits = 4, format = "f")]
resl[, ci := paste0("\\mbox{\\tiny [", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), "]}")]
resl[grepl("^L", inference), ci := paste0("\\mbox{\\tiny (", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), ")}")]
resl[, gender := factor(gender, levels = genderitems)]
nR[, gender := factor(gender, levels = genderitems)]
enr00[, gender := factor(gender, levels = genderitems)]
AddStar <- T
if (AddStar) {
  resl[, est := Estimate]
  resl[, Estimate := paste0(est, "^{\\phantom{***}}")]
  resl[p < .1, Estimate := paste0(est, "^{*\\phantom{**}}")]
  resl[p < .05, Estimate := paste0(est, "^{**\\phantom{*}}")]
  resl[p < .01, Estimate := paste0(est, "^{***}")]
  resl[est > 0, Estimate := paste0("\\phantom{-}", Estimate)]
  resl[, est := NULL]
}
# main/placebo results
options(width=120)
setkey(resl, data, Coef, agelb, reg, gender)
for (jj in 1:2) {
  thisdata <- c("Ep.1", "Ep.2")[jj]
  for (s in 1:3) {
    mr <- resl[grepl(thisdata, data) & agelb == (10:12)[s] & reg >= 4 & reg != 5, ]
    nr0 <- nR[grepl(thisdata, data) & agelb == (10:12)[s] & reg >= 4 & reg != 5, ]
    enr0 <- enr00[grepl(thisdata, data) & agelb == (10:12)[s], ]
    enr0[, EnRate := formatC(EnRate, digits = 4, format = "f")]
    for (m in 1:4) {
      # tabulate by specification
      main <- rbind(
        mr[grepl(aghh.defs[m], agdef) & grepl("^ag", Coef) & grepl("^B", inference), Estimate]
        ,
        unlist(mr[grepl(aghh.defs[m], agdef) & grepl("^ag", Coef) & grepl("Z", inference), ci])
        ,
        unlist(mr[grepl(aghh.defs[m], agdef) & grepl("^ag", Coef) & grepl("B", inference), ci])
      )
      sib <-  rbind(
         mr[grepl(aghh.defs[m], agdef)  & grepl("SibF.*H.*yr", Coef) & grepl("BR", inference), Estimate]
         , 
         mr[grepl(aghh.defs[m], agdef) & grepl("SibF.*H.*yr", Coef) & grepl("Z", inference), ci]
         ,
         mr[grepl(aghh.defs[m], agdef) & grepl("SibF.*H.*yr", Coef) & grepl("B", inference), ci]
         ,
         mr[grepl(aghh.defs[m], agdef) & grepl("SibM.*H.*yr", Coef) & grepl("BR", inference), Estimate]
         , 
         mr[grepl(aghh.defs[m], agdef) & grepl("SibM.*H.*yr", Coef) & grepl("Z", inference), ci]
         ,
         mr[grepl(aghh.defs[m], agdef) & grepl("SibM.*H.*yr", Coef) & grepl("B", inference), ci]
       )
       sib <- cbind("", "", "", sib[, 1:3], sib[, 4:6])
       nr <- rbind(
          formatC(nr0[grepl(aghh.defs[m], agdef), ][order(reg, HHtype), R], digits = 4, format = "f")
        , formatC(nr0[grepl(aghh.defs[m], agdef), ][order(reg, HHtype), Yes], digits = 0, format = "f")
        , formatC(nr0[grepl(aghh.defs[m], agdef), ][order(reg, HHtype), n], digits = 0, format = "f")
       )
       enr <- matrix(
         enr0[grepl(aghh.defs[m], agdef), ][order(HHtype, agHH, tee), EnRate]
         , byrow = F, nrow = 4)
       enr <- enr[, rep(1:3, 3)]
       main <- rbind(main, sib, nr, enr)
       assign(paste0("main", m), main)
    }
    # ii = 1: 3 specs * 2 HHtypes = spec 1 all, spec 1 direct off, spec 2 all, ...
    mrtab <- rbind(main1, main2, main3, main4)
    mrtab <- 
      cbind(
          rep(c(
            "Agricultural households * year 2002", 
            "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
            "\\underline{\\phantom{mm}} * Older sisters",
            "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
            "\\underline{\\phantom{mm}} * Older brothers",
            "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
            "$\\bar{R}^{2}$", "N: Agricultural HHs", "N",
            paste0("Mean of ", rep(c("treated", "control"), each = 2), " in ", 
              list(rep(c(1999, 2002), 2), rep(c(2002, 2006), 2))[[1]])
             ), 4
          ), 
       mrtab)
    SepCols <- c(3, 6) 
    ltb <- latextab(mrtab, delimiterline = NULL, 
        hcenter = c(3, rep(1.3, ncol(mrtab)-1)),
        hleft = c("\\scriptsize", rep("\\hfil\\scriptsize$", ncol(mrtab)-1)), 
        hright = c("\\hfill", rep("$", ncol(mrtab)-1)),
        headercolor = NULL, 
        adjustlineskip = "-1ex", adjlskiprows = grep("CI", mrtab[, 1])-1,
        addseparatingcols = SepCols, separatingcolwidth = rep(.1, 2), 
        separatingcoltitle = c("\\textsf{Specification 1}", "\\textsf{Specification 2}", "\\textsf{Specification 3}")
      ) 
    ltb <- c(
      ltb[1], "\\hline", 
      ltb[2:grep("cline", ltb), ],
      paste0(
        "&\\textsf{boys} & \\textsf{girls} & \\textsf{boys+girls}",
        paste(rep("&&\\textsf{boys} & \\textsf{girls} & \\textsf{boys+girls}", 2), collapse = "")
        , "\\\\"),
      "&\\multicolumn{11}{l}{}\\\\",
      paste("AgHH def:", aghh.defs[1], "&",
        gsub("3\\)", "3)&", gsub("6\\)", "6)&", paste(paste0("(", 1:9, ")", collapse = "&"), "\\\\")))
        ),
      ltb[(grep("cline", ltb)+2):(grep("M.*rol in 2", ltb)[1]), ], 
      "&\\multicolumn{11}{l}{}\\\\",
      paste("AgHH def:", aghh.defs[2], "&",
        gsub("2\\)", "2)&", gsub("5\\)", "5)&", paste(paste0("(", 1:9+9, ")", collapse = "&"), "\\\\")))
        ),
      ltb[(grep("^Ag", ltb)[2]):(grep("M.*rol in 2", ltb)[2]), ],
      "&\\multicolumn{11}{l}{}\\\\",
      paste("AgHH def:", aghh.defs[3], "&",
        gsub("1\\)", "1)&", gsub("4\\)", "4)&", paste(paste0("(", 1:9+18, ")", collapse = "&"), "\\\\")))
        ),
      ltb[(grep("^Ag", ltb)[3]):(grep("M.*rol in 2", ltb)[3]), ], 
      "&\\multicolumn{11}{l}{}\\\\",
      paste("AgHH def:", aghh.defs[4], "&",
        gsub("0\\)", "0)&", gsub("3\\)", "3)&", paste(paste0("(", 1:9+27, ")", collapse = "&"), "\\\\")))
        ),
      ltb[(grep("^Ag", ltb)[4]):(grep("M.*rol in 2", ltb)[4]), ], "\\hline",
        ltb[nrow(ltb), ]
      ) 
    ltb <- gsub("CI \\(.*?\\)", "", ltb)
    ltb <- gsub("(^\\\\cline.*$)", "\\1[-1ex]", ltb)
    ltb <- gsub("households", "HHs", ltb)
    ltb <- gsub("Number of ol", "Ol", ltb)
    ltb <- ltb[!grepl("Raw", ltb)]
    write.tablev(ltb
      ,  paste0(pathsaveThisVer, "Placebo", c(1999, 2002)[jj], "Older", (10:12)[s], 
           "ByGenderByAgHHdefResults_Table.tex")
      ,  colnamestrue = F)
  } # s
} # data
@

<<main results for paper>>=
Res <- qread(paste0(pathsaveThisVer, "TabulatedAllResults.qs"))
Enr <- qread(paste0(pathsaveThisVer, "TabulatedAllResultsEnr.qs"))
NR <- qread(paste0(pathsaveThisVer, "TabulatedAllResultsNR.qs"))
ii <- 1
agyr <- paste0("^agHH.yr|Sib.*H.*", (2:3)[ii], "$")
resl <- Res[grepl(agyr, Coef) & grepl(c("main", "placebo")[ii], objective), 
  .(Coef, data, gender, agdef, agelb, reg, HHtype, inference, beta, p, CI_L, CI_U)][
  order(data, gender, reg, HHtype, agdef, inference)]
resl[, Estimate := formatC(beta, digits = 4, format = "f")]
resl[, ci := paste0("\\mbox{\\tiny [", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), "]}")]
resl[grepl("^L", inference), ci := paste0("\\mbox{\\tiny (", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), ")}")]
AddStar <- T
if (AddStar) {
  resl[, est := Estimate]
  resl[, Estimate := paste0(est, "^{\\phantom{***}}")]
  resl[p < .1, Estimate := paste0(est, "^{*\\phantom{**}}")]
  resl[p < .05, Estimate := paste0(est, "^{**\\phantom{*}}")]
  resl[p < .01, Estimate := paste0(est, "^{***}")]
  resl[est > 0, Estimate := paste0("\\phantom{-}", Estimate)]
  resl[, est := NULL]
}
# main/placebo results
options(width=120)
for (s in 1:3) {
  mr <- resl[agelb == (10:12)[s] & grepl("m", data) & reg >= 4 & reg != 5 & 
    grepl("b.*g", gender) & grepl("di", HHtype), ]
  nR <- NR[agelb == (10:12)[s] & grepl("m", data) & reg >= 4 & reg != 5  
    & grepl("^B", inference) & grepl("b.*g", gender) & grepl("di", HHtype), ]
  enr0 <- Enr[agelb == (10:12)[s] & grepl("m", data)
    & grepl("B", inference) & grepl("b.*g", gender) & grepl("di", HHtype), ]
  enr0[, EnRate := formatC(EnRate, digits = 4, format = "f")]
  for (m in c(1, 3)) {
    # tabulate by specification
    main <- rbind(
      mr[grepl(aghh.defs[m], agdef) & grepl("^ag", Coef) & grepl("^B", inference), Estimate]
      ,
      unlist(mr[grepl(aghh.defs[m], agdef) & grepl("^ag", Coef) & grepl("Z", inference), ci])
      ,
      unlist(mr[grepl(aghh.defs[m], agdef) & grepl("^ag", Coef) & grepl("B", inference), ci])
    )
    sib <-  rbind(
       mr[grepl(aghh.defs[m], agdef)  & grepl("SibF.*H.*yr", Coef) & grepl("BR", inference), Estimate]
       , 
       mr[grepl(aghh.defs[m], agdef) & grepl("SibF.*H.*yr", Coef) & grepl("Z", inference), ci]
       ,
       mr[grepl(aghh.defs[m], agdef) & grepl("SibF.*H.*yr", Coef) & grepl("B", inference), ci]
       ,
       mr[grepl(aghh.defs[m], agdef) & grepl("SibM.*H.*yr", Coef) & grepl("BR", inference), Estimate]
       , 
       mr[grepl(aghh.defs[m], agdef) & grepl("SibM.*H.*yr", Coef) & grepl("Z", inference), ci]
       ,
       mr[grepl(aghh.defs[m], agdef) & grepl("SibM.*H.*yr", Coef) & grepl("B", inference), ci]
     )
     sib <- cbind("", sib)
     nr <- rbind(
        formatC(nR[grepl(aghh.defs[m], agdef), ][order(reg, HHtype), R], digits = 4, format = "f")
      , formatC(nR[grepl(aghh.defs[m], agdef), ][order(reg, HHtype), Yes], digits = 0, format = "f")
      , formatC(nR[grepl(aghh.defs[m], agdef), ][order(reg, HHtype), n], digits = 0, format = "f")
     )
     enr <- matrix(
       enr0[grepl(aghh.defs[m], agdef), ][order(HHtype, agHH, tee), EnRate]
       , byrow = F, nrow = 4)
     enr <- enr[, rep(1, 3)]
     main <- rbind(main, sib, nr, enr)
     assign(paste0("main", m), main)
  }
  mrtab <- cbind(main1, main3)
  mrtab <- 
    cbind(
        rep(c(
          "Agricultural households * year 2002", 
          "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
          "\\underline{\\phantom{mm}} * Older sisters",
          "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
          "\\underline{\\phantom{mm}} * Older brothers",
          "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
          "$\\bar{R}^{2}$", "N: Agricultural HHs", "N",
          paste0("Mean of ", rep(c("treated", "control"), each = 2), " in ", 
            list(rep(c(1999, 2002), 2), rep(c(2002, 2006), 2))[[1]])
           ), 1
        ), 
     mrtab)
  SepCols <- 3
  ltb <- latextab(mrtab, delimiterline = NULL, 
      hcenter = c(3, rep(1.3, ncol(mrtab)-1)),
      hleft = c("\\scriptsize", rep("\\hfil\\scriptsize$", ncol(mrtab)-1)), 
      hright = c("\\hfill", rep("$", ncol(mrtab)-1)),
      headercolor = NULL, 
      adjustlineskip = "-1ex", adjlskiprows = grep("CI", mrtab[, 1])-1,
      addseparatingcols = SepCols, separatingcolwidth = rep(.1, length(SepCols)), 
      separatingcoltitle = c("\\textsf{Agricultural households}", "\\textsf{Agricultural households (head)}")
    ) 
  ltb <- c(
    ltb[1], 
    "\\hline", 
    ltb[2:grep("cline", ltb), ],
    "&\\multicolumn{7}{l}{}\\\\",
    paste("&",
      gsub("3\\)", "3)&", paste(paste0("(", 1:6, ")", collapse = "&"), "\\\\"))
      ),
    ltb[(grep("cline", ltb)+2):(grep("BRL", ltb)[3]), ], 
    paste("Demographic fixed trends", 
      gsub("\\&$", "\\\\\\\\", 
      paste(rep(paste(paste(rep("& \\mbox{\\scriptsize Yes}", 3), collapse = ""), "&"), 2), collapse = ""))
      ),
    paste("Other household fixed trends&",
      paste(rep(paste(rep("& \\mbox{\\scriptsize Yes}", 2), collapse = ""), 2), collapse = "&&"), 
      "\\\\"),
    paste("Thana fixed trends&",
      paste(rep("&&\\mbox{\\scriptsize Yes}", 2), collapse = "&&"),
      "\\\\"),
    ltb[(grep("BRL", ltb)[3]+1):(grep("M.*rol in 2", ltb)), ],
    "\\hline",
      ltb[nrow(ltb), ]
    )
  ltb <- gsub("CI \\(.*?\\)", "", ltb)
  ltb <- gsub("(^\\\\cline.*$)", "\\1[-1ex]", ltb)
  ltb <- gsub("households", "HHs", ltb)
  ltb <- gsub("Number of ol", "Ol", ltb)
  N1 <- gsub("N.*?&", "", ltb[grepl("N: A", ltb)])
  N1 <- gsub("\\\\", "", N1)
  N1 <- gsub(" ", "", N1)
  N1 <- unique(unlist(strsplit(N1, " ?\\& ?")))
  N1 <- N1[nchar(N1)>0]
  for (nn in 1:2) 
    ltb <- gsub(paste0(N1[nn], ".*\\& ", N1[nn], collapse = ""), 
      paste("\\\\multicolumn{3}{c}{\\\\scriptsize", N1[nn], "}"), ltb)
  N2 <- gsub("N *\\&", "", ltb[grepl("N *\\&", ltb)])
  N2 <- gsub("\\\\", "", N2)
  N2 <- gsub(" ", "", N2)
  N2 <- unique(unlist(strsplit(N2, " ?\\& ?")))
  N2 <- N2[nchar(N2)>0]
  ltb[grepl(N2, ltb)] <- 
    paste("N", paste(rep(paste("& \\multicolumn{3}{c}{\\scriptsize",  N2, "}"), 2), collapse = "&"), "\\\\")
  N3 <- gsub("Mean.*?\\&", "", ltb[grepl("Mean", ltb)])
  N3 <- gsub("\\&", "", N3)
  N3 <- gsub("\\\\\\\\", "", N3)
  N3 <- strsplit(N3, " +")
  N3 <- lapply(N3, unique)
  N3 <- lapply(N3, function(x) x[nchar(x)>0])
  for (mm in 1:3 )
    for (nn in 1:2) 
      ltb <- gsub(paste0(N3[[mm]][nn], ".*", N3[[mm]][nn], collapse = ""), 
        paste("\\\\multicolumn{3}{c}{\\\\scriptsize", N3[[mm]][nn], "}"), ltb)
  ltb <- ltb[!grepl("Raw", ltb)]
  write.tablev(ltb
    ,  paste0(pathsaveThisVer, "MainResults", (10:12)[s], "WithInteractionsTable.tex")
    ,  colnamestrue = F)
  # for compact tables without triple interactions
  ltb <- ltb[-(grep("Older", ltb)+rep(0:2, 2))]
  write.tablev(ltb
    ,  paste0(pathsaveThisVer, "MainResults", (10:12)[s], "Table.tex")
    ,  colnamestrue = F)
}
@

<<main gender results for paper>>=
Res <- qread(paste0(pathsaveThisVer, "TabulatedAllResults.qs"))
Enr <- qread(paste0(pathsaveThisVer, "TabulatedAllResultsEnr.qs"))
NR <- qread(paste0(pathsaveThisVer, "TabulatedAllResultsNR.qs"))
ii <- 1
agyr <- paste0("^agHH.yr|Sib.*H.*", (2:3)[ii], "$")
resl <- Res[grepl(agyr, Coef) & grepl(c("main", "placebo")[ii], objective), 
  .(Coef, data, gender, agdef, agelb, reg, HHtype, inference, beta, p, CI_L, CI_U)][
  order(data, gender, reg, HHtype, agdef, inference)]
resl[, Estimate := formatC(beta, digits = 4, format = "f")]
resl[, ci := paste0("\\mbox{\\tiny [", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), "]}")]
resl[grepl("^L", inference), ci := paste0("\\mbox{\\tiny (", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), ")}")]
AddStar <- T
if (AddStar) {
  resl[, est := Estimate]
  resl[, Estimate := paste0(est, "^{\\phantom{***}}")]
  resl[p < .1, Estimate := paste0(est, "^{*\\phantom{**}}")]
  resl[p < .05, Estimate := paste0(est, "^{**\\phantom{*}}")]
  resl[p < .01, Estimate := paste0(est, "^{***}")]
  resl[est > 0, Estimate := paste0("\\phantom{-}", Estimate)]
  resl[, est := NULL]
}
# main/placebo results
options(width=120)
for (s in 1:3) {
  mr <- resl[agelb == (10:12)[s] & grepl("m", data) & reg >= 4 & reg != 5 & 
    !grepl("b.*g", gender) & grepl("di", HHtype), ]
  nR <- NR[agelb == (10:12)[s] & grepl("m", data) & reg >= 4 & reg != 5  
    & grepl("^B", inference) & !grepl("b.*g", gender) & grepl("di", HHtype), ]
  enr0 <- Enr[agelb == (10:12)[s] & grepl("m", data) 
    & grepl("B", inference) & !grepl("b.*g", gender) & grepl("di", HHtype), ]
  enr0[, EnRate := formatC(EnRate, digits = 4, format = "f")]
  for (m in c(1, 3)) {
    # tabulate by specification
    main <- rbind(
      mr[grepl(aghh.defs[m], agdef) & grepl("^ag", Coef) & grepl("^B", inference), Estimate]
      ,
      mr[grepl(aghh.defs[m], agdef) & grepl("^ag", Coef) & grepl("Z", inference), ci]
      ,
      mr[grepl(aghh.defs[m], agdef) & grepl("^ag", Coef) & grepl("B", inference), ci]
    )
    sib <-  rbind(
       mr[grepl(aghh.defs[m], agdef)  & grepl("SibF.*H.*yr", Coef) & grepl("BR", inference), Estimate]
       , 
       mr[grepl(aghh.defs[m], agdef) & grepl("SibF.*H.*yr", Coef) & grepl("Z", inference), ci]
       ,
       mr[grepl(aghh.defs[m], agdef) & grepl("SibF.*H.*yr", Coef) & grepl("B", inference), ci]
       ,
       mr[grepl(aghh.defs[m], agdef) & grepl("SibM.*H.*yr", Coef) & grepl("BR", inference), Estimate]
       , 
       mr[grepl(aghh.defs[m], agdef) & grepl("SibM.*H.*yr", Coef) & grepl("Z", inference), ci]
       ,
       mr[grepl(aghh.defs[m], agdef) & grepl("SibM.*H.*yr", Coef) & grepl("B", inference), ci]
     )
     sib <- cbind("", sib[, 1:2], "", sib[, 3:4])
     nr <- rbind(
        formatC(nR[grepl(aghh.defs[m], agdef), ][order(gender, reg), R], digits = 4, format = "f")
      , formatC(nR[grepl(aghh.defs[m], agdef), ][order(gender, reg), Yes], digits = 0, format = "f")
      , formatC(nR[grepl(aghh.defs[m], agdef), ][order(gender, reg), n], digits = 0, format = "f")
     )
     enr <- matrix(
       enr0[grepl(aghh.defs[m], agdef), ][order(gender, agHH, tee), EnRate]
       , byrow = F, nrow = 4)
     enr <- enr[, rep(1:2, each = 3)]
     main <- rbind(main, sib, nr, enr)
     assign(paste0("main", m), main)
  }
  mrtab <- rbind(main1, main3)
  mrtab <- 
    cbind(
        rep(c(
          "Agricultural households * year 2002", 
          "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
          "\\underline{\\phantom{mm}} * Older sisters",
          "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
          "\\underline{\\phantom{mm}} * Older brothers",
          "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
          "$\\bar{R}^{2}$", "N: Agricultural HHs", "N",
          paste0("Mean of ", rep(c("treated", "control"), each = 2), " in ", 
            list(rep(c(1999, 2002), 2), rep(c(2002, 2006), 2))[[1]])
           ), 2
        ), 
     mrtab)
  SepCols <- 3
  ltb <- latextab(mrtab, delimiterline = NULL, 
      hcenter = c(3, rep(1.3, ncol(mrtab)-1)),
      hleft = c("\\scriptsize", rep("\\hfil\\scriptsize$", ncol(mrtab)-1)), 
      hright = c("\\hfill", rep("$", ncol(mrtab)-1)),
      headercolor = NULL, 
      adjustlineskip = "-1ex", adjlskiprows = grep("CI", mrtab[, 1])-1,
      addseparatingcols = SepCols, separatingcolwidth = rep(.1, length(SepCols)), 
      separatingcoltitle = c("\\textsf{Boys}", "\\textsf{Girls}")
    ) 
  ltb <- c(
    ltb[1], 
    "\\hline", 
    ltb[2:grep("cline", ltb), ],
    "&\\multicolumn{7}{c}{\\scriptsize A. Agricultural household}\\\\",
    paste("&",
      gsub("3\\)", "3)&", paste(paste0("(", 1:6, ")", collapse = "&"), "\\\\"))
      ),
    ltb[(grep("cline", ltb)+2):(grep("BRL", ltb)[3]), ], 
    paste("Demographic fixed trends", 
      gsub("\\&$", "\\\\\\\\", 
      paste(rep(paste(paste(rep("& \\mbox{\\scriptsize Yes}", 3), collapse = ""), "&"), 2), collapse = ""))
      ),
    paste("Other household fixed trends&",
      paste(rep(paste(rep("& \\mbox{\\scriptsize Yes}", 2), collapse = ""), 2), collapse = "&&"), 
      "\\\\"),
    paste("Thana fixed trends&",
      paste(rep("&&\\mbox{\\scriptsize Yes}", 2), collapse = "&&"),
      "\\\\"),
    ltb[(grep("BRL", ltb)[3]+1):(grep("M.*rol in 2", ltb)[1]), ],
    "&\\multicolumn{7}{c}{\\scriptsize B. Agricultural household (head)}\\\\",
    paste("&",
      gsub("9\\)", "9)&", paste(paste0("(", 1:6+6, ")", collapse = "&"), "\\\\"))
      ),
    ltb[(grep("M.*rol in 2", ltb)[1]+1):(nrow(ltb)-1), ],
    "\\hline",
      ltb[nrow(ltb), ]
    )
  ltb <- gsub("CI \\(.*?\\)", "", ltb)
  ltb <- gsub("(^\\\\cline.*$)", "\\1[-1ex]", ltb)
  ltb <- gsub("households", "HHs", ltb)
  ltb <- gsub("Number of ol", "Ol", ltb)
  N1 <- gsub("N.*?&", "", ltb[grepl("N: A", ltb)])
  N1 <- gsub("\\\\", "", N1)
  N1 <- gsub(" ", "", N1)
  N1 <- unique(unlist(strsplit(N1, " ?\\& ?")))
  N1 <- N1[nchar(N1)>0]
  for (nn in 1:4) 
    ltb <- gsub(paste0(N1[nn], ".*\\& ", N1[nn], collapse = ""), 
      paste("\\\\multicolumn{3}{c}{\\\\scriptsize", N1[nn], "}"), ltb)
  N2 <- gsub("N *\\&", "", ltb[grepl("N *\\&", ltb)])
  N2 <- gsub("\\\\", "", N2)
  N2 <- gsub(" ", "", N2)
  N2 <- unique(unlist(strsplit(N2, " ?\\& ?")))
  N2 <- N2[nchar(N2)>0]
  ltb[grep(N2[1], ltb)] <- 
      paste("N", paste(
      paste("& \\multicolumn{3}{c}{\\scriptsize",  N2, "}")
      , collapse = "&"), "\\\\")
  N3 <- gsub("Mean.*?\\&", "", ltb[grepl("Mean", ltb)])
  N3 <- gsub("\\&", "", N3)
  N3 <- gsub("\\\\\\\\", "", N3)
  N3 <- strsplit(N3, " +")
  N3 <- lapply(N3, unique)
  N3 <- lapply(N3, function(x) x[nchar(x)>0])
  for (mm in 1:8)
    for (nn in 1:2) 
      ltb <- gsub(paste0(N3[[mm]][nn], ".*", N3[[mm]][nn], collapse = ""), 
        paste("\\\\multicolumn{3}{c}{\\\\scriptsize", N3[[mm]][nn], "}"), ltb)
  ltb <- ltb[!grepl("Raw", ltb)]
  write.tablev(ltb
    ,  paste0(pathsaveThisVer, "MainGenderResults", (10:12)[s], "WithInteractionsTable.tex")
    ,  colnamestrue = F)
  # for compact tables without triple interactions
  ninter <- length(grep("Older", ltb))
  ltb <- ltb[-(grep("Older", ltb)+rep(0:2, ninter))]
  ltb <- ltb[-(grep("B. A", ltb):grep("^Me.*rol.*02 \\&", ltb)[2])]
  ltb <- ltb[-(grep("A. A", ltb))]
  write.tablev(ltb
    ,  paste0(pathsaveThisVer, "MainGenderResults", (10:12)[s], "Table.tex")
    ,  colnamestrue = F)
}
@

<<main gender results by agHH defs for paper>>=
Res <- qread(paste0(pathsaveThisVer, "TabulatedAllResults.qs"))
Enr <- qread(paste0(pathsaveThisVer, "TabulatedAllResultsEnr.qs"))
NR <- qread(paste0(pathsaveThisVer, "TabulatedAllResultsNR.qs"))
ii <- 1
agyr <- paste0("^agHH.yr|Sib.*H.*", (2:3)[ii], "$")
resl <- Res[grepl(agyr, Coef) & grepl(c("main", "placebo")[ii], objective)
  & grepl("^d", HHtype) & grepl("m", data) & agelb == 10 & grepl("4|6|7", reg), 
  .(Coef, data, gender, agdef, agelb, reg, HHtype, inference, beta, p, CI_L, CI_U)][
  order(data, gender, reg, agdef, inference)]
nR <- NR[grepl(c("main", "placebo")[ii], objective) & grepl("B", inference)
  & grepl("^d", HHtype) & grepl("m", data) & agelb == 10 & grepl("4|6|7", reg), ]
enr0 <- Enr[grepl(c("main", "placebo")[ii], objective) 
  & grepl("^d", HHtype) & grepl("m", data) & agelb == 10 & grepl("B", inference), ]

resl[, Estimate := formatC(beta, digits = 4, format = "f")]
resl[, ci := paste0("\\mbox{\\tiny [", 
  formatC(CI_L, digits = 2, format = "f"), ", ", 
  formatC(CI_U, digits = 2, format = "f"), "]}")]
resl[grepl("^L", inference), ci := paste0("\\mbox{\\tiny (", 
  formatC(CI_L, digits = 2, format = "f"), ", ", 
  formatC(CI_U, digits = 2, format = "f"), ")}")]
AddStar <- T
if (AddStar) {
  resl[, est := Estimate]
  resl[, Estimate := paste0(est, "^{\\phantom{***}}")]
  resl[p < .1, Estimate := paste0(est, "^{*\\phantom{**}}")]
  resl[p < .05, Estimate := paste0(est, "^{**\\phantom{*}}")]
  resl[p < .01, Estimate := paste0(est, "^{***}")]
  resl[est > 0, Estimate := paste0("\\phantom{-}", Estimate)]
  resl[, est := NULL]
}
setkey(resl, data, agdef, reg, gender)
setkey(nR, data, agdef, reg, gender)
setkey(enr0, data, agdef, gender)
# main/placebo results
options(width=120)
for (m in 1:4) {
  mr <- resl[grepl(aghh.defs[m], agdef), ]
  nr <- nR[grepl(aghh.defs[m], agdef), ]
  enr1 <- enr0[grepl(aghh.defs[m], agdef), ]
  enr1[, EnRate := formatC(EnRate, digits = 4, format = "f")]
  # tabulate by specification
  main <- rbind(
    mr[grepl("^ag", Coef) & grepl("^B", inference), Estimate]
    ,
    mr[grepl("^ag", Coef) & grepl("Z", inference), ci]
    ,
    mr[grepl("^ag", Coef) & grepl("B", inference), ci]
  )
  sib <-  rbind(
     mr[grepl("SibF.*H.*yr", Coef) & grepl("BR", inference), Estimate]
     , 
     mr[grepl("SibF.*H.*yr", Coef) & grepl("Z", inference), ci]
     ,
     mr[grepl("SibF.*H.*yr", Coef) & grepl("B", inference), ci]
     ,
     mr[grepl("SibM.*H.*yr", Coef) & grepl("BR", inference), Estimate]
     , 
     mr[grepl("SibM.*H.*yr", Coef) & grepl("Z", inference), ci]
     ,
     mr[grepl("SibM.*H.*yr", Coef) & grepl("B", inference), ci]
   )
   sib <- cbind("", "", "", sib)
   nr <- rbind(
      formatC(nR[grepl(aghh.defs[m], agdef), R], digits = 4, format = "f")
    , formatC(nR[grepl(aghh.defs[m], agdef), Yes], digits = 0, format = "f")
    , formatC(nR[grepl(aghh.defs[m], agdef), n], digits = 0, format = "f")
   )
   enr <- matrix(
     enr1[grepl(aghh.defs[m], agdef), EnRate]
     , byrow = F, nrow = 4)
   enr <- enr[, rep(1:3, each = 3)]
   main <- rbind(main, sib, nr, enr)
   assign(paste0("main", m), main)
}
mrtab <- rbind(main1, main2, main3, main4)
mrtab <- 
  cbind(
      rep(c(
        "Agricultural * year 2002", 
        "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
        "\\underline{\\phantom{mm}} * Older sisters",
        "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
        "\\underline{\\phantom{mm}} * Older brothers",
        "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
        "$\\bar{R}^{2}$", "N: Agricultural HHs", "N",
        paste0("Mean of ", rep(c("treated", "control"), each = 2), " in ", 
          list(rep(c(1999, 2002), 2), rep(c(2002, 2006), 2))[[1]])
         ), 4
      ), 
   mrtab)
SepCols <- c(3, 6)
ltb <- latextab(mrtab, delimiterline = NULL, 
    hcenter = c(3, rep(1.1, ncol(mrtab)-1)),
    hleft = c("\\scriptsize", rep("\\hfil\\scriptsize$", ncol(mrtab)-1)), 
    hright = c("\\hfill", rep("$", ncol(mrtab)-1)),
    headercolor = NULL, 
    adjustlineskip = "-1ex", adjlskiprows = grep("CI", mrtab[, 1])-1,
    addseparatingcols = SepCols, separatingcolwidth = rep(.1, length(SepCols)), 
    separatingcoltitle = c("\\textsf{Specification 1}", "\\textsf{Specification 2}", "\\textsf{Specification 3}")
  ) 
ltb <- c(
  ltb[1], 
  "\\hline", 
  ltb[2:grep("cline", ltb), ],
  paste0("&", paste(rep("\\textsf{Boys}&\\textsf{Girls}&\\textsf{Boys+Girls}", 3), collapse = "&&"), "\\\\"),
  "&\\multicolumn{11}{c}{\\scriptsize A. Agricultural household}\\\\",
  paste("&",
    gsub("6\\)", "6)&", gsub("3\\)", "3)&", paste(paste0("(", 1:9, ")", collapse = "&")))), "\\\\"),
  ltb[(grep("cline", ltb)+2):(grep("BRL", ltb)[3]), ], 
  paste("Demographic fixed trends", 
    gsub("\\&$", "\\\\\\\\", 
    paste(rep(paste(paste(rep("& \\mbox{\\scriptsize Yes}", 3), collapse = ""), "&"), 2), collapse = ""))
    ),
  paste("Other household fixed trends&",
    paste(rep(paste(rep("& \\mbox{\\scriptsize Yes}", 2), collapse = ""), 2), collapse = "&&"), 
    "\\\\"),
  paste("Thana fixed trends&",
    paste(rep("&&\\mbox{\\scriptsize Yes}", 2), collapse = "&&"),
    "\\\\"),
  ltb[(grep("BRL", ltb)[3]+1):(grep("M.*rol in 2", ltb)[1]), ],
  "&\\multicolumn{11}{c}{\\scriptsize B. Agricultural household (head)}\\\\",
  paste("&",
    gsub("5\\)", "5)&", gsub("2\\)", "2)&", paste(paste0("(", 1:9+9, ")", collapse = "&")))), "\\\\"),
  ltb[(grep("M.*rol in 2", ltb)[1]+1):(grep("^Ag", ltb)[3]-1), ],
  "&\\multicolumn{11}{c}{\\scriptsize C. Agricultural household (income)}\\\\",
  paste("&",
    gsub("4\\)", "4)&", gsub("1\\)", "1)&", paste(paste0("(", 1:9+18, ")", collapse = "&")))), "\\\\"),
  ltb[(grep("M.*rol in 2", ltb)[2]+1):(grep("^Ag", ltb)[4]-1), ],
  "&\\multicolumn{11}{c}{\\scriptsize D. Agricultural household (occupation)}\\\\",
  paste("&",
    gsub("3\\)", "3)&", gsub("0\\)", "0)&", paste(paste0("(", 1:9+27, ")", collapse = "&")))), "\\\\"),
  ltb[(grep("M.*rol in 2", ltb)[3]+1):(nrow(ltb)-1), ],
  "\\hline",
    ltb[nrow(ltb), ]
  )
ltb <- gsub("CI \\(.*?\\)", "", ltb)
ltb <- gsub("(^\\\\cline.*$)", "\\1[-1ex]", ltb)
ltb <- gsub("households", "HHs", ltb)
ltb <- gsub("Number of ol", "Ol", ltb)
ltb <- ltb[-(grep("^N ", ltb)[-4])]
N3 <- gsub("Mean.*?\\&", "", ltb[grepl("Mean", ltb)])
N3 <- gsub("\\&", "", N3)
N3 <- gsub("\\\\\\\\", "", N3)
N3 <- strsplit(N3, " +")
N3 <- lapply(N3, unique)
N3 <- lapply(N3, function(x) x[nchar(x)>0])
for (mm in 1:16)
  for (nn in 1:3) 
    ltb <- gsub(paste0(N3[[mm]][nn], ".*", N3[[mm]][nn], collapse = ""), 
      paste("\\\\multicolumn{3}{c}{\\\\scriptsize", N3[[mm]][nn], "}"), ltb)
ltb <- ltb[!grepl("Raw", ltb)]
write.tablev(ltb
  ,  paste0(pathsaveThisVer, "MainGenderByAgdefResults10WithInteractionsTable.tex")
  ,  colnamestrue = F)
# for compact tables without triple interactions
ninter <- length(grep("Older", ltb))
ltb2 <- ltb[-(grep("Older", ltb)+rep(0:2, ninter))]
write.tablev(ltb2
  ,  paste0(pathsaveThisVer, "MainGenderByAgdefResults10Table.tex")
  ,  colnamestrue = F)
@

<<placebo results for paper PlaceboByAgHHdef for given Agelb>>=
Res <- qread(paste0(pathsaveThisVer, "TabulatedAllResults.qs"))
Enr <- qread(paste0(pathsaveThisVer, "TabulatedAllResultsEnr.qs"))
NR <- qread(paste0(pathsaveThisVer, "TabulatedAllResultsNR.qs"))
ii <- 2
agyr <- paste0("^agHH.yr|Sib.*H.*", (2:3)[ii], "$")
resl <- Res[grepl(agyr, Coef) & grepl("s.g", gender) & grepl("di", HHtype) &
  grepl(c("main", "placebo")[ii], objective), 
  .(Coef, data, agdef, agelb, gender, reg, inference, beta, p, CI_L, CI_U)][
  order(data, gender, reg, agdef, inference)]
nR <- NR[grepl("s.g", gender) & grepl("^d", HHtype) & grepl("^B", inference), ]
enr00 <- Enr[grepl("s.g", gender) &  grepl("^d", HHtype) & grepl("^B", inference),] 
resl[, Estimate := formatC(beta, digits = 4, format = "f")]
resl[, ci := paste0("\\mbox{\\tiny [", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), "]}")]
resl[grepl("^L", inference), ci := paste0("\\mbox{\\tiny (", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), ")}")]
AddStar <- T
if (AddStar) {
  resl[, est := Estimate]
  resl[, Estimate := paste0(est, "^{\\phantom{***}}")]
  resl[p < .1, Estimate := paste0(est, "^{*\\phantom{**}}")]
  resl[p < .05, Estimate := paste0(est, "^{**\\phantom{*}}")]
  resl[p < .01, Estimate := paste0(est, "^{***}")]
  resl[est > 0, Estimate := paste0("\\phantom{-}", Estimate)]
  resl[, est := NULL]
}
# main/placebo results
options(width=120)
setkey(resl, data, Coef, agdef, agelb, reg)
for (jj in 1:2) {
  thisdata <- c("Ep.1", "Ep.2")[jj]
  for (s in 1:3) {
    mr <- resl[grepl(thisdata, data) & agelb == (10:12)[s] & reg >= 4 & reg != 5, ]
    nr0 <- nR[grepl(thisdata, data) & agelb == (10:12)[s] & reg >= 4 & reg != 5, ]
    enr0 <- enr00[grepl(thisdata, data) & agelb == (10:12)[s], ]
    enr0[, EnRate := formatC(EnRate, digits = 4, format = "f")]
    for (m in c(1, 3)) {
      # tabulate by specification
      main <- rbind(
        mr[grepl(aghh.defs[m], agdef) & grepl("^ag", Coef) & grepl("^B", inference), Estimate]
        ,
        mr[grepl(aghh.defs[m], agdef) & grepl("^ag", Coef) & grepl("Z", inference), ci]
        ,
        mr[grepl(aghh.defs[m], agdef) & grepl("^ag", Coef) & grepl("^B", inference), ci]
      )
      sib <-  rbind(
         mr[grepl(aghh.defs[m], agdef)  & grepl("SibF.*H.*yr", Coef) & grepl("BR", inference), Estimate]
         , 
         mr[grepl(aghh.defs[m], agdef) & grepl("SibF.*H.*yr", Coef) & grepl("Z", inference), ci]
         ,
         mr[grepl(aghh.defs[m], agdef) & grepl("SibF.*H.*yr", Coef) & grepl("B", inference), ci]
         ,
         mr[grepl(aghh.defs[m], agdef) & grepl("SibM.*H.*yr", Coef) & grepl("BR", inference), Estimate]
         , 
         mr[grepl(aghh.defs[m], agdef) & grepl("SibM.*H.*yr", Coef) & grepl("Z", inference), ci]
         ,
         mr[grepl(aghh.defs[m], agdef) & grepl("SibM.*H.*yr", Coef) & grepl("B", inference), ci]
       )
       sib <- cbind("", sib)
       nr <- rbind(
          formatC(nr0[grepl(aghh.defs[m], agdef), ][order(reg), R], digits = 4, format = "f")
        , formatC(nr0[grepl(aghh.defs[m], agdef), ][order(reg), Yes], digits = 0, format = "f")
        , formatC(nr0[grepl(aghh.defs[m], agdef), ][order(reg), n], digits = 0, format = "f")
       )
       enr <- matrix(
         enr0[grepl(aghh.defs[m], agdef), ][order(agHH, tee), EnRate]
         , byrow = F, nrow = 4)
       enr <- enr[, rep(1, 3)]
       main <- rbind(main, sib, nr, enr)
       assign(paste0("main", m), main)
    }
    mrtab <- cbind(main1, main3)
    mrtab <- 
      cbind(
          rep(c(
            "Agricultural households * year 2002", 
            "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
            "\\underline{\\phantom{mm}} * Older sisters",
            "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
            "\\underline{\\phantom{mm}} * Older brothers",
            "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
            "$\\bar{R}^{2}$", "N: Agricultural HHs", "N",
            paste0("Mean of ", rep(c("treated", "control"), each = 2), " in ", 
              list(rep(c(1999, 2002), 2), rep(c(2002, 2006), 2))[[jj]])
             ), 1
          ), 
       mrtab)
    SepCols <- 3
    ltb <- latextab(mrtab, delimiterline = NULL, 
        hcenter = c(3, rep(1.3, ncol(mrtab)-1)),
        hleft = c("\\scriptsize", rep("\\hfil\\scriptsize$", ncol(mrtab)-1)), 
        hright = c("\\hfill", rep("$", ncol(mrtab)-1)),
        headercolor = NULL, 
        adjustlineskip = "-1ex", adjlskiprows = grep("CI", mrtab[, 1])-1,
        addseparatingcols = SepCols, separatingcolwidth = rep(.1, length(SepCols)), 
        separatingcoltitle = c("\\textsf{Agricultural household}", "\\textsf{Agricultural household (head)}")
      ) 
    assign(paste0("ltb", jj, s), ltb)
  } # s
} # jj: data
for (s in 1:3) {
  ltb1 <- get(paste0("ltb", 1, s))
  ltb2 <- get(paste0("ltb", 2, s))
  ltb <- c(
    ltb1[1], 
    "\\hline", 
    ltb1[2:grep("cline", ltb), ],
    "&\\multicolumn{7}{c}{\\scriptsize A. 1999 cohort}\\\\",
    paste("&", gsub("3\\)", "3)&", paste(paste0("(", 1:6, ")", collapse = "&"), "\\\\"))),
    ltb1[(grep("cline", ltb1)+2):(grep("M.*rol in 2", ltb1)), ], 
    "&\\multicolumn{7}{c}{\\scriptsize B. 2002 cohort}\\\\",
    paste("&", gsub("9\\)", "9)&", paste(paste0("(", 1:6+6, ")", collapse = "&"), "\\\\"))),
    ltb2[(grep("^Ag", ltb2)):(grep("M.*rol .*6", ltb2)), ],
    "\\hline",
    ltb1[nrow(ltb1), ]
  )
  ltb <- gsub("CI \\(.*?\\)", "", ltb)
  ltb <- gsub("(^\\\\cline.*$)", "\\1[-1ex]", ltb)
  ltb <- gsub("households", "HHs", ltb)
  ltb <- gsub("Number of ol", "Ol", ltb)
  N1 <- gsub("N.*?&", "", ltb[grepl("N: A", ltb)])
  N1 <- gsub("\\\\", "", N1)
  N1 <- gsub(" ", "", N1)
  N1 <- unique(unlist(strsplit(N1, " ?\\& ?")))
  N1 <- N1[nchar(N1)>0]
  for (nn in 1:length(N1)) 
    ltb <- gsub(paste0(N1[nn], ".*\\& ", N1[nn], collapse = ""), 
      paste("\\\\multicolumn{3}{c}{\\\\scriptsize", N1[nn], "}"), ltb)
  N2 <- gsub("N *\\&", "", ltb[grepl("N *\\&", ltb)])
  N2 <- gsub("\\\\", "", N2)
  N2 <- gsub(" ", "", N2)
  N2 <- unique(unlist(strsplit(N2, " ?\\& ?")))
  N2 <- N2[nchar(N2)>0]
  for (nn in 1:length(N2)) 
    ltb[grep(paste0(" ", N2[nn], " "), ltb)] <- 
      paste("N", paste(rep(paste(
      paste("& \\multicolumn{3}{c}{\\scriptsize",  N2[nn], "}")
      , collapse = "&"), 2), collapse = "&"), "\\\\")
  N3 <- gsub("Mean.*?\\&", "", ltb[grepl("Mean", ltb)])
  N3 <- gsub("\\&", "", N3)
  N3 <- gsub("\\\\\\\\", "", N3)
  N3 <- strsplit(N3, " +")
  N3 <- lapply(N3, unique)
  N3 <- lapply(N3, function(x) x[nchar(x)>0])
  for (mm in 1:8)
    for (nn in 1:2) 
      ltb <- gsub(paste0(N3[[mm]][nn], ".*", N3[[mm]][nn], collapse = ""), 
        paste("\\\\multicolumn{3}{c}{\\\\scriptsize", N3[[mm]][nn], "}"), ltb)
  ltb <- ltb[!grepl("Raw", ltb)]
  write.tablev(ltb
    ,  paste0(pathsaveThisVer, "Placebo", (10:12)[s], "AgHHWithInteractionsResults.tex")
    ,  colnamestrue = F)
  # for compact tables without triple interactions
  ninter <- length(grep("Older", ltb))
  ltb <- ltb[-(grep("Older", ltb)+rep(0:2, ninter))]
  write.tablev(ltb
    ,  paste0(pathsaveThisVer, "Placebo", (10:12)[s], "AgHHResults.tex")
    ,  colnamestrue = F)
}
@
<<placebo results for paper PlaceboByGender for given Agelb>>=
Res <- qread(paste0(pathsaveThisVer, "TabulatedAllResults.qs"))
Enr <- qread(paste0(pathsaveThisVer, "TabulatedAllResultsEnr.qs"))
NR <- qread(paste0(pathsaveThisVer, "TabulatedAllResultsNR.qs"))
ii <- 2
agyr <- paste0("^agHH.yr|Sib.*H.*", (2:3)[ii], "$")
resl <- Res[grepl(agyr, Coef) & !grepl("s.g", gender) & grepl("di", HHtype) &
  grepl(c("main", "placebo")[ii], objective), 
  .(Coef, data, agdef, agelb, gender, reg, inference, beta, p, CI_L, CI_U)][
  order(data, gender, reg, agdef, inference)]
nR <- NR[!grepl("s.g", gender) & grepl("^d", HHtype)
   & grepl("^B", inference) & is.na(agegroup) & grepl("pl", objective), ]
enr00 <- Enr[!grepl("s.g", gender) &  grepl("^d", HHtype)
  & grepl("^B", inference) & is.na(agegroup) & grepl("pl", objective),] 
resl[, Estimate := formatC(beta, digits = 4, format = "f")]
resl[, ci := paste0("\\mbox{\\tiny [", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), "]}")]
resl[grepl("^L", inference), ci := paste0("\\mbox{\\tiny (", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), ")}")]
AddStar <- T
if (AddStar) {
  resl[, est := Estimate]
  resl[, Estimate := paste0(est, "^{\\phantom{***}}")]
  resl[p < .1, Estimate := paste0(est, "^{*\\phantom{**}}")]
  resl[p < .05, Estimate := paste0(est, "^{**\\phantom{*}}")]
  resl[p < .01, Estimate := paste0(est, "^{***}")]
  resl[est > 0, Estimate := paste0("\\phantom{-}", Estimate)]
  resl[, est := NULL]
}
# main/placebo results
options(width=120)
setkey(resl, data, Coef, agdef, agelb, gender, reg)
setkey(nR, data, agdef, agelb, gender, reg)
for (m in c(1, 3)) {
  for (jj in 1:2) {
    thisdata <- c("Ep.1", "Ep.2")[jj]
    for (s in 1:3) {
      mr <- resl[grepl(thisdata, data) & agelb == (10:12)[s] & reg >= 4 & reg != 5, ]
      nr0 <- nR[grepl(thisdata, data) & agelb == (10:12)[s] & reg >= 4 & reg != 5, ]
      enr0 <- enr00[grepl(thisdata, data) & agelb == (10:12)[s], ]
      enr0[, EnRate := formatC(EnRate, digits = 4, format = "f")]
      main <- rbind(
        mr[grepl(aghh.defs[m], agdef) & grepl("^ag", Coef) & grepl("^B", inference), Estimate]
        ,
        mr[grepl(aghh.defs[m], agdef) & grepl("^ag", Coef) & grepl("Z", inference), ci]
        ,
        mr[grepl(aghh.defs[m], agdef) & grepl("^ag", Coef) & grepl("^B", inference), ci]
      )
      sib <-  rbind(
         mr[grepl(aghh.defs[m], agdef)  & grepl("SibF.*H.*yr", Coef) & grepl("BR", inference), Estimate]
         , 
         mr[grepl(aghh.defs[m], agdef) & grepl("SibF.*H.*yr", Coef) & grepl("Z", inference), ci]
         ,
         mr[grepl(aghh.defs[m], agdef) & grepl("SibF.*H.*yr", Coef) & grepl("B", inference), ci]
         ,
         mr[grepl(aghh.defs[m], agdef) & grepl("SibM.*H.*yr", Coef) & grepl("BR", inference), Estimate]
         , 
         mr[grepl(aghh.defs[m], agdef) & grepl("SibM.*H.*yr", Coef) & grepl("Z", inference), ci]
         ,
         mr[grepl(aghh.defs[m], agdef) & grepl("SibM.*H.*yr", Coef) & grepl("B", inference), ci]
      )
      sib <- cbind("", sib[, 1:2], "", sib[, 3:4])
      nr <- rbind(
          formatC(nr0[grepl(aghh.defs[m], agdef), ][order(gender, reg), R], digits = 4, format = "f")
        , formatC(nr0[grepl(aghh.defs[m], agdef), ][order(gender, reg), Yes], digits = 0, format = "f")
        , formatC(nr0[grepl(aghh.defs[m], agdef), ][order(gender, reg), n], digits = 0, format = "f")
      )
      enr <- matrix(
         enr0[grepl(aghh.defs[m], agdef), ][order(gender, agHH, tee), EnRate]
         , byrow = F, nrow = 4)
      enr <- enr[, rep(1:2, each = 3)]
      main <- rbind(main, sib, nr, enr)
      mrtab <- 
         cbind(
             rep(c(
               "Agricultural households * year 2006", 
               "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
               "\\underline{\\phantom{mm}} * Older sisters",
               "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
               "\\underline{\\phantom{mm}} * Older brothers",
               "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
               "$\\bar{R}^{2}$", "N: Agricultural HHs", "N",
               paste0("Mean of ", rep(c("treated", "control"), each = 2), " in ", 
                 list(rep(c(1999, 2002), 2), rep(c(2002, 2006), 2))[[2]])
                ), 1
             ), 
          main)
      SepCols <- 3
      ltb <- latextab(mrtab, delimiterline = NULL, 
          hcenter = c(3, rep(1.3, ncol(mrtab)-1)),
          hleft = c("\\scriptsize", rep("\\hfil\\scriptsize$", ncol(mrtab)-1)), 
          hright = c("\\hfill", rep("$", ncol(mrtab)-1)),
          headercolor = NULL, 
          adjustlineskip = "-1ex", adjlskiprows = grep("CI", mrtab[, 1])-1,
          addseparatingcols = SepCols, separatingcolwidth = rep(.1, length(SepCols)), 
          separatingcoltitle = c("\\textsf{Boys}", "\\textsf{Girls}")
       ) 
      assign(paste0("ltb", jj, m, s), ltb)
    } # s
  } # jj: data
} # m
for (m in c(1, 3)) {
  for (s in 1:3) {
    ltb1 <- get(paste0("ltb", 1, m, s))
    ltb2 <- get(paste0("ltb", 2, m, s))
    ltb <- c(
      ltb1[1], 
      "\\hline", 
      ltb1[2:grep("cline", ltb), ],
      "&\\multicolumn{7}{c}{\\scriptsize A. 1999 cohort}\\\\",
      paste("&", gsub("3\\)", "3)&", paste(paste0("(", 1:6, ")", collapse = "&"), "\\\\"))),
      ltb1[(grep("cline", ltb1)+2):(grep("M.*rol in 2006", ltb1)), ], 
      "&\\multicolumn{7}{c}{\\scriptsize B. 2002 cohort}\\\\",
      paste("&", gsub("9\\)", "9)&", paste(paste0("(", 1:6+6, ")", collapse = "&"), "\\\\"))),
      ltb2[(grep("^Ag", ltb2)):(grep("M.*rol in 2006", ltb2)), ],
      "\\hline",
      ltb1[nrow(ltb1), ]
    )
    ltb <- gsub("CI \\(.*?\\)", "", ltb)
    ltb <- gsub("(^\\\\cline.*$)", "\\1[-1ex]", ltb)
    ltb <- gsub("households", "HHs", ltb)
    ltb <- gsub("Number of ol", "Ol", ltb)
    N1 <- gsub("N.*?&", "", ltb[grepl("N: A", ltb)])
    N1 <- gsub("\\\\", "", N1)
    N1 <- gsub(" ", "", N1)
    N1 <- unique(unlist(strsplit(N1, " ?\\& ?")))
    N1 <- N1[nchar(N1)>0]
    for (nn in 1:length(N1)) 
      ltb <- gsub(paste0(N1[nn], ".*\\& ", N1[nn], collapse = ""), 
        paste("\\\\multicolumn{3}{c}{\\\\scriptsize", N1[nn], "}"), ltb)
    N2 <- gsub("N *\\&", "", ltb[grepl("N *\\&", ltb)])
    N2 <- gsub("\\\\", "", N2)
    N2 <- gsub(" ", "", N2)
    N2 <- unique(unlist(strsplit(N2, " ?\\& ?")))
    N2 <- N2[nchar(N2)>0]
    for (nn in c(1, 3)) 
      ltb[grep(paste0(" ", N2[nn], " "), ltb)] <- 
        paste("N", "& \\multicolumn{3}{c}{\\scriptsize",  N2[nn], "}",
           "&& \\multicolumn{3}{c}{\\scriptsize",  N2[nn+1], "}", "\\\\")
    N3 <- gsub("Mean.*?\\&", "", ltb[grepl("Mean", ltb)])
    N3 <- gsub("\\&", "", N3)
    N3 <- gsub("\\\\\\\\", "", N3)
    N3 <- strsplit(N3, " +")
    N3 <- lapply(N3, unique)
    N3 <- lapply(N3, function(x) x[nchar(x)>0])
    for (mm in 1:8)
      for (nn in 1:2) 
        ltb <- gsub(paste0(N3[[mm]][nn], ".*", N3[[mm]][nn], collapse = ""), 
          paste("\\\\multicolumn{3}{c}{\\\\scriptsize", N3[[mm]][nn], "}"), ltb)
    ltb <- ltb[!grepl("Raw", ltb)]
    write.tablev(ltb
      ,  paste0(pathsaveThisVer, "Placebo", (10:12)[s], aghh.defs[m], "ByGenderWithInteractionsResults.tex")
      ,  colnamestrue = F)
    # for compact tables without triple interactions
    ninter <- length(grep("Older", ltb))
    ltb <- ltb[-(grep("Older", ltb)+rep(0:2, ninter))]
    write.tablev(ltb
      ,  paste0(pathsaveThisVer, "Placebo", (10:12)[s], aghh.defs[m], "ByGenderResults.tex")
      ,  colnamestrue = F)
  } # s
}  # m
@
<<flooded nonmuslim results for paper, echo = F>>=
Res <- qread(paste0(pathsaveThisVer, "TabulatedFloodMuslimResults.qs"))
Enr <- qread(paste0(pathsaveThisVer, "TabulatedFloodMuslimResultsEnr.qs"))
NR <- qread(paste0(pathsaveThisVer, "TabulatedFloodMuslimResultsNR.qs"))
rs <- Res[grepl("^agHH.yr.$|flooded.ag|nonmuslim.ag", Coef) & reg > 3 & reg != 5 & grepl("Em", data)
   & agelb == 10 & grepl(0, agdef) & grepl("di", HHtype) & grepl("s.g", gender), ]
rs[, spec := reg-3]
rs[, spec := factor(spec, labels = 1:3)]
rs[, reg := factor(reg)]
rs[, Coef := factor(Coef)]
rs[, ci := paste0("\\mbox{\\tiny [", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), "]}")]
rs[grepl("^L", inference), ci := paste0("\\mbox{\\tiny (", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), ")}")]
AddStar <- T
if (AddStar) {
  rs[, est := formatC(beta, digits = 4, format = "f")]
  rs[, Estimate := paste0(est, "^{\\phantom{***}}")]
  rs[p < .1, Estimate := paste0(est, "^{*\\phantom{**}}")]
  rs[p < .05, Estimate := paste0(est, "^{**\\phantom{*}}")]
  rs[p < .01, Estimate := paste0(est, "^{***}")]
  rs[beta > 0, Estimate := paste0("\\phantom{-}", Estimate)]
  rs[, est := NULL]
}
# tabulate by specification
setorder(rs, spec, file)
for (fm in 1:2) {
  fl <- c("flood", "muslim")[fm]
  for (ss in 1:3) 
    assign(paste0("rstab", ss), 
      rbind(
        # Order: boys, girls, boys+girls
          rs[grepl(ss, spec) & grepl(fl, file) & grepl("^B", inference) & grepl("^ag", Coef), Estimate]
        , rs[grepl(ss, spec) & grepl(fl, file) & grepl("^L", inference) & grepl("^ag", Coef), ci]
        , rs[grepl(ss, spec) & grepl(fl, file) & grepl("^B", inference) & grepl("^ag", Coef), ci]
        , rs[grepl(ss, spec) & grepl(fl, file) & grepl("^B", inference) & grepl(c("^fl.*H", "no.*H")[fm], Coef), Estimate]
        , rs[grepl(ss, spec) & grepl(fl, file) & grepl("^L", inference) & grepl(c("^fl.*H", "no.*H")[fm], Coef), ci]
        , rs[grepl(ss, spec) & grepl(fl, file) & grepl("^B", inference) & grepl(c("^fl.*H", "no.*H")[fm], Coef), ci]
      )
    )
  rstab <- cbind(rstab1, rstab2, rstab3)
  assign(paste0("rs", fl), rstab)
}
# Flood and muslim data are identical, so N, enr are also identical
nr <- unique(NR[spec > 3 & spec != 5 & grepl("Em", data) & agelb == 10 & grepl(0, agdef) & 
  grepl("di", HHtype) & grepl("s.g", gender), ])
setkey(nr, file, spec)
nr <- t(nr[, .(R, Yes, Ngroup, n)])
rsflood <- rbind(rsflood[1:6, ], "", "", "", rsflood[-(1:6), ])
rsmuslim <- rbind(rsmuslim[1:3, ], "", "", "", rsmuslim[-(1:3), ])
rsTab <- rbind(cbind(rsflood, rsmuslim), nr)
rsTab <- rbind(rsTab[1:3, ], "", rsTab[4:6, ], "", rsTab[7:nrow(rsTab), ])
rsTab <- cbind(
  Covariates = c(
      "Agricultural households * year 2002",  
      "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
      "Agricultural households * year 2002", 
      " * Flooded",
      "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
      "Agricultural households * year 2002",
      " * Non-Muslim",
      "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
      "$\\bar{R}^{2}$", 
      "N: Agricultural HHs", "N$_{group}$", "N")
      , 
    rsTab)
rsTab <- data.table(rsTab)
enr <- Enr[grepl("Em", data) & agelb == 10 & grepl(0, agdef) & grepl("B", inference) & 
  grepl("di", HHtype) & grepl("s.g", gender), ]
setkey(enr, file, agHH, tee)
enrW <- reshape(enr, direction = "wide", idvar = c("data", "agHH", "tee"),
  timevar = "file", v.names = grepout("En|Nu", colnames(enr)))
enr3 <- enrW[, grepout("En", colnames(enrW)), with = F]
enr3 <- enr3[, rep(1:2, 3), with = F]
enr3 <- formatC(as.matrix(enr3), digits = 4, format = "f")
enr3 <- data.table(cbind(
    Covariates = paste("Mean of", c("treated", "control"), "in", rep(c(1999, 2002), each = 2))
  , enr3))
rsTab2 <- rbindlist(list(rsTab, enr3), use.names = F
  )
SepCols <- 3
ltb <- latextab(as.matrix(rsTab2), delimiterline = NULL, 
    hcenter = c(3.0, rep(1.25, ncol(rsTab2)-1)),
    hleft = c("\\scriptsize", rep("\\hfil\\scriptsize$", ncol(rsTab2)-1)), 
    hright = c("\\hfill", rep("$", ncol(rsTab2)-1)),
    headercolor = NULL, 
    adjustlineskip = "-1ex", adjlskiprows = grep("CI", unlist(rsTab2[, 1]))-1,
    addseparatingcols = SepCols, 
    separatingcolwidth = rep(.1, length(SepCols)),
    separatingcoltitle = c("\\textsf{Flooded areas}", "\\textsf{Non-Muslims}")
  ) 
ltb <- c(
  ltb[1], "\\hline",
  ltb[2:grep("cline", ltb), ],
  paste("&", gsub("\\&\\(4", "&&(4", paste("(", 1:6, ")", sep = "", collapse = "&")), "\\\\"),
  ltb[(grep("cline", ltb)+2):(grep("\\* Non", ltb)+2), ],
  paste("Demographic fixed trends", 
    paste(rep(paste(rep("& \\mbox{\\scriptsize Yes}", 3), collapse = ""), 2), collapse = "&"),
    "\\\\", collapse = ""),
  paste("Other household fixed trends",
    paste(rep(paste0("&", paste(rep("& \\mbox{\\scriptsize Yes}", 2), collapse = "")), 2), collapse = "&"),
    "\\\\", collapse = ""),
  paste("Thana fixed trends&",
    paste(rep("&& \\mbox{\\scriptsize Yes}", 2), collapse = "&&"),
    "\\\\"),
  ltb[(grep("\\* Non", ltb)+3):(grep("^M.*rol.*2 ", ltb)), ],
  "\\hline",
  ltb[nrow(ltb), ]
  )
ltb <- gsub("CI \\(.*?\\)", "", ltb)
ltb <- gsub("(^\\\\cline.*$)", "\\1[-1ex]", ltb)
ltb <- gsub("households", "HHs", ltb)
N1 <- gsub("N.*?&", "", ltb[grepl("N: A", ltb)])
N1 <- gsub("\\\\", "", N1)
N1 <- gsub(" ", "", N1)
N1 <- unique(unlist(strsplit(N1, " ?\\& ?")))
N1 <- N1[nchar(N1)>0]
for (nn in 1:length(N1)) 
  ltb <- gsub(paste0(N1[nn], ".*\\& ", N1[nn], collapse = ""), 
    paste(rep(paste("\\\\multicolumn{3}{c}{\\\\scriptsize", N1[nn], "}"), 2), collapse = "&&"), ltb)
N2 <- gsub("N *\\&", "", ltb[grepl("N *\\&", ltb)])
N2 <- gsub("\\\\", "", N2)
N2 <- gsub(" ", "", N2)
N2 <- unique(unlist(strsplit(N2, " ?\\& ?")))
N2 <- N2[nchar(N2)>0]
ltb <- gsub(paste0(N2, ".*\\& ", N2, collapse = ""), 
  paste(rep(paste("\\\\multicolumn{3}{c}{\\\\scriptsize", N2, "}"), 2), collapse = "&&"), ltb)
N3 <- gsub("Mean.*?\\&", "", ltb[grepl("Mean", ltb)])
N3 <- gsub("\\&", "", N3)
N3 <- gsub("\\\\\\\\", "", N3)
N3 <- strsplit(N3, " +")
N3 <- lapply(N3, unique)
N3 <- lapply(N3, function(x) x[nchar(x)>0])
for (mm in 1:4)
  ltb <- gsub(paste0(N3[[mm]][1], ".*", N3[[mm]][1], collapse = ""), 
    paste(rep(paste("\\\\multicolumn{3}{c}{\\\\scriptsize", N3[[mm]][1], "}"), 2), collapse = "&&"), ltb)
N4 <- gsub("^.*group.*?\\&", "", ltb[grepl("group", ltb)])
N4 <- gsub("\\&", "", N4)
N4 <- gsub("\\\\\\\\", "", N4)
N4 <- strsplit(N4, " +")
N4 <- lapply(N4, unique)
N4 <- unlist(lapply(N4, function(x) x[nchar(x)>0]))
ltb <- gsub(paste0(N4[1], ".*", N4[2], collapse = ""), 
  paste(paste("\\\\multicolumn{3}{c}{\\\\scriptsize", N4, "}"), collapse = "&&")
  , ltb)
ltb <- gsub("CI \\(.*?\\)", "", ltb)
ltb <- ltb[!grepl("Raw", ltb)]
write.tablev(ltb
  ,  paste0(pathsaveThisVer, "FloodNonmuslimResultsWithInteractions.tex")
  ,  colnamestrue = F)
# for compact tables without triple interactions
ninter <- length(grep("Older", ltb))
ltb2 <- ltb[-(grep("Older", ltb)+rep(0:2, ninter))]
write.tablev(ltb
  ,  paste0(pathsaveThisVer, "FloodNonmuslimResults.tex")
  ,  colnamestrue = F)
@
<<grade absent results for paper>>=
ga <- qread(paste0(pathsaveThisVer, "GenderGradeDaysAbsentTabulated.qs"))
NR <- qread(paste0(pathsaveThisVer, "GenderGradeDaysAbsentTabulatedNR.qs"))
Enr <- qread(paste0(pathsaveThisVer, "GenderGradeDaysAbsentTabulatedEnr.qs"))
ga1 <- ga[grepl("^agHH.yr.$", Coef) & grepl(0, agdef) & grepl("4|6|7", reg) & 
  agelb == 10 & grepl("di", HHtype) & grepl("s.g", gender), ]
ga1[, spec := factor(as.numeric(as.character(reg))-3)]
ga1[, spec := factor(spec, labels = 1:3)]
ga1[, Estimate := formatC(beta, digits = 4, format = "f")]
ga1[, ci := paste0("\\mbox{\\tiny [", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), "]}")]
ga1[grepl("^L", inference), ci := paste0("\\mbox{\\tiny (", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), ")}")]
setnames(ga1, "p_val", "p")
setkey(ga1, file, spec, gender)
AddStar <- T
if (AddStar) {
  ga1[, est := Estimate]
  ga1[, Estimate := paste0(est, "^{\\phantom{***}}")]
  ga1[p < .1, Estimate := paste0(est, "^{*\\phantom{**}}")]
  ga1[p < .05, Estimate := paste0(est, "^{**\\phantom{*}}")]
  ga1[p < .01, Estimate := paste0(est, "^{***}")]
  ga1[beta > 0, Estimate := paste0("\\phantom{-}", Estimate)]
  ga1[, est := NULL]
}
# tabulate by specification
setorder(ga1, spec, file)
  #ga2 <- ga1[grepl(c("de$", "de enr$", "l enr", "nt$", "nt enr$")[gd], file), ]
gtab <- rbind(
  # grade initial enrollers, grade (all time) enrollers
    ga1[grepl("ini", file) & grepl("B", inference), Estimate],
    ga1[grepl("ini", file) & grepl("^L", inference), ci],
    ga1[grepl("ini", file) & grepl("B", inference), ci],
    ga1[grepl("de en", file) & grepl("B", inference), Estimate],
    ga1[grepl("de en", file) & grepl("^L", inference), ci],
    ga1[grepl("de en", file) & grepl("B", inference), ci]
   )
atab <- rbind(
    ga1[grepl("ini", file) & grepl("B", inference), Estimate],
    ga1[grepl("ini", file) & grepl("^L", inference), ci],
    ga1[grepl("ini", file) & grepl("B", inference), ci],
    ga1[grepl("nt en", file) & grepl("B", inference), Estimate],
    ga1[grepl("nt en", file) & grepl("^L", inference), ci],
    ga1[grepl("nt en", file) & grepl("B", inference), ci]
   )
atab[1:3, ] <- ""
# N and R2
nrg <- unique(NR[grepl("gr.*en", file) & grepl("s.g", gender) &
  grepl(0, agdef) & grepl("4|6|7", reg) & 
  agelb == 10 & grepl("di", HHtype), ])
setorder(nrg, -file)
nra <- unique(NR[grepl("ab.*enr", file) & grepl("s.g", gender) &
  grepl(0, agdef) & grepl("4|6|7", reg) & 
  agelb == 10 & grepl("di", HHtype), ])
nrg <- t(nrg[, .(R, n)])
nra <- t(nra[, .(R, n)])
nra <- cbind("", "", "", nra)
# in the order of initial enrollers, all time enrollers
gtab <- rbind(gtab[1:3, ], nrg[, 1:3], gtab[4:6, ], nrg[, 4:6]) 
atab <- rbind(atab[1:3, ], nra[, 1:3], atab[4:6, ], nra[, 4:6]) 
# grade progression
enrg <- unique(Enr[grepl("gr.*enr", file) & grepl("s.g", gender) &
  agelb == 10 & grepl(0, agdef) & grepl("di", HHtype), ])
enrg[, EnRate := formatC(EnRate, digits = 4, format = "f")]
enrgW <- reshape(enrg, direction = "wide", idvar = c("agHH", "tee"),
  timevar = "file", v.names = grepout("En|Nu", colnames(enrg)))
enrgW[, grepout("^d|def|lb|ty|gen|data|Num", colnames(enrgW)) := NULL]
gtab <- rbind(
  gtab[1:5, ], enrgW[, rep(3, 3), with = F], 
  gtab[6:10, ], enrgW[, rep(4, 3), with = F], 
  use.names = F)
enra <- unique(Enr[grepl("ab.*enr", file) & grepl("s.g", gender) &
  agelb == 10 & grepl(0, agdef) & grepl("di", HHtype), ])
enra[, EnRate := formatC(EnRate, digits = 4, format = "f")]
enraW <- reshape(enra, direction = "wide", idvar = c("agHH", "tee"),
  timevar = "file", v.names = grepout("En|Nu", colnames(enra)))
enraW[, grepout("^d|def|lb|ty|gen|data|Num", colnames(enraW)) := NULL]
atab <- rbind(
  atab[1:5, ], enraW[, rep(3, 3), with = F], 
  atab[6:10, ], enraW[, rep(3, 3), with = F], 
  use.names = F)
atab[1:9, ] <- ""
gatab <- cbind(gtab, atab)
ii <- 1
hdr <- paste0("Mean of ", rep(c("treated", "control"), each = 2), " in ", 
   list(rep(c(1999, 2002), 2), rep(c(2002, 2006), 2))[[ii]])
gaTab <- cbind(
  Covariates = rep(c("Agricultural households * year 2002", 
      "\\hspace{1em} CI (LZ)", 
      "\\hspace{1em} CI (BRL)", 
      "$\\bar{R}^{2}$", "N", hdr), 2)
  , gatab)
SepCols <- 3 
ltb <- latextab(as.matrix(gaTab), delimiterline = NULL, 
    hcenter = c(3, rep(1.5, ncol(gaTab)-1)),
    hleft = c("\\scriptsize", rep("\\hfil\\scriptsize$", ncol(gaTab)-1)), 
    hright = c("\\hfill", rep("$", ncol(gaTab)-1)),
    headercolor = NULL, 
    adjustlineskip = "-1ex", adjlskiprows = grep("CI", unlist(gaTab[, 1]))-1,
    addseparatingcols = SepCols, separatingcolwidth = rep(.1, length(SepCols)), 
    separatingcoltitle = c("\\textsf{Grade progression}", "\\textsf{Absent days per month}")
  ) 
controlsexplained1 <- c(
  "Demographic fixed trends & \\mbox{\\scriptsize Yes} & \\mbox{\\scriptsize Yes} & \\mbox{\\scriptsize Yes} &&&&\\\\"
    , 
    "Household fixed trends & \\mbox{\\scriptsize } & \\mbox{\\scriptsize Yes} & \\mbox{\\scriptsize Yes} &&&& \\\\"
    , 
    "Thana fixed trends & \\mbox{\\scriptsize } & \\mbox{\\scriptsize } & \\mbox{\\scriptsize Yes} &&&&\\\\[1.5ex]")
controlsexplained2 <- c(
  "Demographic fixed trends & \\mbox{\\scriptsize Yes} & \\mbox{\\scriptsize Yes} & \\mbox{\\scriptsize Yes} && \\mbox{\\scriptsize Yes} & \\mbox{\\scriptsize Yes} & \\mbox{\\scriptsize Yes}\\\\"
    , 
    "Household fixed trends & \\mbox{\\scriptsize } & \\mbox{\\scriptsize Yes} & \\mbox{\\scriptsize Yes} && \\mbox{\\scriptsize } & \\mbox{\\scriptsize Yes} & \\mbox{\\scriptsize Yes} \\\\"
    , 
    "Thana fixed trends & \\mbox{\\scriptsize } & \\mbox{\\scriptsize } & \\mbox{\\scriptsize Yes} && \\mbox{\\scriptsize } & \\mbox{\\scriptsize } & \\mbox{\\scriptsize Yes}\\\\[1.5ex]")
ltb <- c(
  ltb[1, ], "\\hline",
  ltb[2:grep("cline", ltb), ],
  "&\\multicolumn{7}{c}{\\footnotesize A. Initial enrollers}\\\\", 
    "&(1) & (2) &(3) &&  &  & \\\\",
  ltb[(grep("^Ag", ltb)[1]):(grep("Ag", ltb)[1]+2), ],
  controlsexplained1, 
  ltb[(grep("^Ag", ltb)[1]+3):(grep("Ag", ltb)[2]-1), ],
  "&\\multicolumn{7}{c}{\\footnotesize B. All time enrollers}\\\\", 
    "&(4) & (5) &(6) && (7) & (8) & (9)\\\\", 
  ltb[(grep("^Ag", ltb)[2]):(grep("Ag", ltb)[2]+2), ],
  controlsexplained2, 
  ltb[(grep("Ag", ltb)[2]+3):(nrow(ltb)-1), ],
  "\\hline",
  ltb[(nrow(ltb)), ]
  )
ltb <- ltb[!grepl("Raw", ltb)]

N2 <- gsub("N *\\&", "", ltb[grepl("N *\\&", ltb)])
N2 <- gsub("\\\\", "", N2)
N2 <- gsub(" ", "", N2)
N2 <- unique(unlist(strsplit(N2, " ?\\& ?")))
N2 <- N2[nchar(N2)>0]
for (nn in 1:length(N2))
  ltb <- gsub(paste0(N2[nn], ".*\\& ", N2[nn], collapse = ""), 
    paste("\\\\multicolumn{3}{c}{\\\\scriptsize", N2[nn], "}"), ltb)
N3 <- gsub("Mean.*?\\&", "", ltb[grepl("Mean", ltb)])
N3 <- gsub("\\&", "", N3)
N3 <- gsub("\\\\\\\\", "", N3)
N3 <- strsplit(N3, " +")
N3 <- lapply(N3, unique)
N3 <- lapply(N3, function(x) x[nchar(x)>0])
for (mm in 1:8)
  for (nn in 1:length(N3[[mm]]))
    ltb <- gsub(paste0(N3[[mm]][nn], ".*", N3[[mm]][nn]),
      paste("\\\\multicolumn{3}{c}{\\\\scriptsize", N3[[mm]][nn], "}"), ltb)
ltb <- gsub("CI \\(.*?\\)", "", ltb)
ltb <- gsub("households", "HHs", ltb)
write.tablev(ltb
    ,  paste0(pathsaveThisVer, "NumGradesDaysAbsentResults.tex")
  ,  colnamestrue = F)
@
<<main gender AgeGroup2 for paper, eval = F>>=
Res2 <- qread(paste0(pathsaveThisVer, "TabulatedMainResults2.qs"))
NR2 <- qread(paste0(pathsaveThisVer, "TabulatedMainResultsNR2.qs"))
Enr2 <- qread(paste0(pathsaveThisVer, "TabulatedMainResultsEnr2.qs"))
Res2[, gender := factor(gender, levels = genderitems)]
res2 <- Res2[grepl("4|6|7", reg) & grepl("di", HHtype) & 
  grepl(0, agdef) & grepl("m.1", data) & grepl(2, agegroup) & !is.na(group), ]
res2[, spec := factor(reg, labels = 1:3)]
res2[, Estimate := formatC(beta, digits = 4, format = "f")]
res2[, ci := paste0("\\mbox{\\tiny [", 
  formatC(CI_L, digits = 2, format = "f"), ", ", 
  formatC(CI_U, digits = 2, format = "f"), "]}")]
res2[grepl("^L", inference), ci := paste0("\\mbox{\\tiny (", 
  formatC(CI_L, digits = 2, format = "f"), ", ", 
  formatC(CI_U, digits = 2, format = "f"), ")}")]
setnames(res2, "p_val", "p")
AddStar <- T
if (AddStar) {
  res2[, est := Estimate]
  res2[, Estimate := paste0(est, "^{\\phantom{***}}")]
  res2[p < .1, Estimate := paste0(est, "^{*\\phantom{**}}")]
  res2[p < .05, Estimate := paste0(est, "^{**\\phantom{*}}")]
  res2[p < .01, Estimate := paste0(est, "^{***}")]
  res2[est > 0, Estimate := paste0("\\phantom{-}", Estimate)]
  res2[, est := NULL]
}
# main/placebo results
options(width=120)

nR <- NR2[grepl(0, agdef) & grepl("m", data) & spec >= 4 & spec != 5  
& grepl("^B", inference) & grepl("di", HHtype) & grepl(2, agegroup), ]
enr0 <- Enr2[grepl(0, agdef) & grepl("m", data) & grepl(2, agegroup)
& grepl("B", inference) & grepl("di", HHtype), ]
enr0[, EnRate := formatC(EnRate, digits = 4, format = "f")]
# tabulate by specification
for (s in c("pri", "sec")) {
  main <- rbind(
    res2[grepl(s, group) & grepl("^agH", Coef) & grepl("^B", inference), Estimate]
    ,
    res2[grepl(s, group) & grepl("^agH", Coef) & grepl("Z", inference), ci]
    ,
    res2[grepl(s, group) & grepl("^agH", Coef) & grepl("B", inference), ci]
  )
  sib <-  rbind(
     res2[grepl(s, group) & grepl("SibF.*H.*yr", Coef) & grepl("BR", inference), Estimate]
     , 
     res2[grepl(s, group) & grepl("SibF.*H.*yr", Coef) & grepl("Z", inference), ci]
     ,
     res2[grepl(s, group) & grepl("SibF.*H.*yr", Coef) & grepl("B", inference), ci]
     ,
     res2[grepl(s, group) & grepl("SibM.*H.*yr", Coef) & grepl("BR", inference), Estimate]
     , 
     res2[grepl(s, group) & grepl("SibM.*H.*yr", Coef) & grepl("Z", inference), ci]
     ,
     res2[grepl(s, group) & grepl("SibM.*H.*yr", Coef) & grepl("B", inference), ci]
   )
  sib <- cbind("", sib[, 1:2], "", sib[, 3:4], "", sib[, 5:6])
  nr <- rbind(
    formatC(nR[grepl(s, group), ][order(gender, spec), R], digits = 4, format = "f")
  , formatC(nR[grepl(s, group), ][order(gender, spec), Yes], digits = 0, format = "f")
  , formatC(nR[grepl(s, group), ][order(gender, spec), n], digits = 0, format = "f")
  )
  enr <- matrix(
   enr0[grepl(s, group), ][order(gender, agHH, tee), EnRate]
   , byrow = F, nrow = 4)
  enr <- enr[, rep(1:3, each = 3)]
  main <- rbind(main, sib, nr, enr)
  assign(paste0("main", s), main)
}
mrtab <- rbind(mainpri, mainsec)
mrtab <- 
cbind(
    rep(c(
      "Agricultural households * year 2002", 
      #"\\hspace{1em} CI (LZ)", 
      "\\hspace{1em} CI (BRL)", 
      "\\underline{\\phantom{mm}} * Older sisters",
      #"\\hspace{1em} CI (LZ)", 
      "\\hspace{1em} CI (BRL)", 
      "\\underline{\\phantom{mm}} * Older brothers",
      #"\\hspace{1em} CI (LZ)", 
      "\\hspace{1em} CI (BRL)", 
      "$\\bar{R}^{2}$", "N: Agricultural HHs", "N",
      paste0("Mean of ", rep(c("treated", "control"), each = 2), " in ", 
        list(rep(c(1999, 2002), 2), rep(c(2002, 2006), 2))[[1]])
       ), 2
    ), 
 mrtab)
SepCols <- c(3, 6)
ltb <- latextab(mrtab, delimiterline = NULL, 
    hcenter = c(3, rep(1.3, ncol(mrtab)-1)),
    hleft = c("\\scriptsize", rep("\\hfil\\scriptsize$", ncol(mrtab)-1)), 
    hright = c("\\hfill", rep("$", ncol(mrtab)-1)),
    headercolor = NULL, 
    adjustlineskip = "-1ex", adjlskiprows = grep("CI", mrtab[, 1])-1,
    addseparatingcols = SepCols, separatingcolwidth = rep(.1, length(SepCols)), 
    separatingcoltitle = c("\\textsf{Boys}", "\\textsf{Girls}", "Boys+Girls")
  ) 
ltb <- c(
  ltb[1], 
  "\\hline", 
  ltb[2:grep("cline", ltb), ],
  "&\\multicolumn{11}{c}{\\scriptsize A. Primary school ages}\\\\",
  paste("&",
    gsub("6\\)", "6)&", gsub("3\\)", "3)&", paste(paste0("(", 1:9, ")", collapse = "&")))), "\\\\"),
  ltb[(grep("cline", ltb)+2):(grep("BRL", ltb)[3]), ], 
  paste("Demographic fixed trends", 
    gsub("\\&$", "\\\\\\\\", 
    paste(rep(paste(paste(rep("& \\mbox{\\scriptsize Yes}", 3), collapse = ""), "&"), 3), collapse = ""))
    ),
  paste("Other household fixed trends&",
    paste(rep(paste(rep("& \\mbox{\\scriptsize Yes}", 2), collapse = ""), 3), collapse = "&&"), 
    "\\\\"),
  paste("Thana fixed trends&",
    paste(rep("&&\\mbox{\\scriptsize Yes}", 3), collapse = "&&"),
    "\\\\"),
  ltb[(grep("BRL", ltb)[3]+1):(grep("M.*rol in 2", ltb)[1]), ],
  "&\\multicolumn{11}{c}{\\scriptsize B. Secodary school ages}\\\\",
  paste("&",
    gsub("5\\)", "5)&", gsub("2\\)", "2)&", paste(paste0("(", 1:9+9, ")", collapse = "&")))), "\\\\"),
  ltb[(grep("M.*rol in 2", ltb)[1]+1):(nrow(ltb)-1), ],
  "\\hline",
    ltb[nrow(ltb), ]
  )
ltb <- gsub("CI \\(.*?\\)", "", ltb)
ltb <- gsub("(^\\\\cline.*$)", "\\1[-1ex]", ltb)
ltb <- gsub("households", "HHs", ltb)
ltb <- gsub("Number of ol", "Ol", ltb)
N1 <- gsub("N.*?&", "", ltb[grepl("N: A", ltb)])
N1 <- gsub("\\\\", "", N1)
N1 <- gsub(" ", "", N1)
N1 <- unique(unlist(strsplit(N1, " ?\\& ?")))
N1 <- N1[nchar(N1)>0]
for (nn in 1:length(N1)) 
  ltb <- gsub(paste0(N1[nn], ".*\\& ", N1[nn], collapse = ""), 
    paste("\\\\multicolumn{3}{c}{\\\\scriptsize", N1[nn], "}"), ltb)
N2 <- gsub("N *\\&", "", ltb[grepl("N *\\&", ltb)])
N2 <- gsub("\\\\", "", N2)
N2 <- gsub(" ", "", N2)
N2 <- unique(unlist(strsplit(N2, " ?\\& ?")))
N2 <- N2[nchar(N2)>0]
ltb[grep(N2[1], ltb)] <- 
    paste("N", paste(
    paste("& \\multicolumn{3}{c}{\\scriptsize",  N2[1:3], "}")
    , collapse = "&"), "\\\\")
ltb[grep(N2[4], ltb)] <- 
    paste("N", paste(
    paste("& \\multicolumn{3}{c}{\\scriptsize",  N2[3+1:3], "}")
    , collapse = "&"), "\\\\")
N3 <- gsub("Mean.*?\\&", "", ltb[grepl("Mean", ltb)])
N3 <- gsub("\\&", "", N3)
N3 <- gsub("\\\\\\\\", "", N3)
N3 <- strsplit(N3, " +")
N3 <- lapply(N3, unique)
N3 <- lapply(N3, function(x) x[nchar(x)>0])
for (mm in 1:8)
  for (nn in 1:3) 
    ltb <- gsub(paste0(N3[[mm]][nn], ".*", N3[[mm]][nn], collapse = ""), 
      paste("\\\\multicolumn{3}{c}{\\\\scriptsize", N3[[mm]][nn], "}"), ltb)
ltb <- ltb[!grepl("Raw", ltb)]
write.tablev(ltb
  ,  paste0(pathsaveThisVer, "MainGenderAgeGroup2ResultsWithInteractions.tex")
  ,  colnamestrue = F)
# for compact tables without triple interactions
ninter <- length(grep("Older", ltb))
ltb2 <- ltb[-(grep("Older", ltb)+rep(0:2, ninter))]
write.tablev(ltb2
  ,  paste0(pathsaveThisVer, "MainGenderAgeGroup2Results.tex")
  ,  colnamestrue = F)
@
<<plot gender AgeGroup2 for paper, eval = F>>=
library(ggplot2)
Res2 <- qread(paste0(pathsaveThisVer, "TabulatedMainResults2.qs"))
Res2[, gender := factor(gender, levels = genderitems)]
mbga <- Res2[grepl("4|6|7", reg) & grepl("di", HHtype) & grepl(0, agdef) & grepl("^agHH.yr2$", Coef), ]
mbga[, spec := factor(reg, labels = 1:3)]
PointRange <-  geom_pointrange(aes(ymin = CI_L, ymax = CI_U),
    stat = "identity", fatten = 1.75, 
    position = position_dodge(width = .25))
g <- ggplot(data = mbga[grepl("A.*2", agegroup) & !is.na(group), ], 
    aes(x = group, y = beta, group = spec, fill = spec, shape = spec, colour = spec)) + 
  PointRange + ThisTheme + facet_grid( ~ gender) +
  xlab("age groups") + 
  labs(color  = "regression specifications", fill = "regression specifications", 
    shape = "regression specifications") +
  ThisThemeEnd +
  guides(
    colour = guide_legend(title = "regression specifications", nrow = 1),
    fill = guide_legend(title = "regression specifications", nrow = 1),
    shape = guide_legend(title = "regression specifications", nrow = 1)
    ) +
  geom_hline(aes(yintercept = yintercept), colour = "lightgreen")
pdf(
  paste0(pathsaveThisVer, "GenderAgeGroup2Impacts.pdf")
  , width = 2*12/2.54, height = 2*8/2.54)
print(g)
whatever <- dev.off()
@
<<SpecMemo SEMemoForSelectedResults, echo = F>>=
CovariatesMemoWithInteractions <- "\\textsf{Agricultural households * year 2002} is an interaction term of agricultural household dummy and year 2002 dummy. \\textsf{$\\underline{\\phantom{mm}}$ * Older sisters} and \\textsf{$\\underline{\\phantom{mm}}$ * Older brothers} are triple interaction terms of agricultural household dummy, year 2002 dummy, and number of older sisters/brother in a household. Regressions include all the linear terms of each interactions and all the double interaction terms of each triple interactions. All the interaction terms are demeaned."
CovariatesMemo <- "\\textsf{Agricultural households * year 2002} is an interaction term of agricultural household dummy and year 2002 dummy. All the interaction terms are demeaned."
SpecMemo <- "\\textsf{Specification 1} uses time-varying thana level characteristics (yield, mean rainfall, mean high temperature, mean low temperature), individual level characteristics (age squared, recipient of a poverty program), and interaction terms of \\textsf{Demographic fixed trends} that are interactions of baseline individual and demographic characterstics (sex of individual, household head's and spouse's education, number of older male/female siblings). \\textsf{Specification 2} adds \\textsf{Other household fixed trends} that are interactions of other baseline household characteristics (per member land holding, per member nonland assets, own piped water, structured toilet). \\textsf{Specification 3} adds \\textsf{Thana fixed trends} which allow heterogenous trends at Thana level. "
SpecMemo0 <- "\\textsf{Specification 1} uses time-varying thana level characteristics (yield, mean rainfall, mean high temperature, mean low temperature), individual level characteristics (age squared, recipient of a poverty program), and \\textsf{Demographic fixed trends} that are interactions of baseline individual and demographic characterstics (sex of individual, household head's education, number of older male/female siblings) with year 2002 dummy $\\bfx_{i}r_{t}$, and with year 2002 * agricultural household dummy $\\bfx_{i}r_{t}D_{i}$. \\textsf{Specification 2} adds \\textsf{other household fixed trends} that are interactions of other baseline household characteristics (per member land holding, per member nonland assets, own piped water, structured toilet). \\textsf{Specification 3} adds \\textsf{Thana fixed trends} which allow heterogenous trends at Thana level. "
SpecMemo1 <- "Columns \\textsf{(1), (4)} use time-varying thana level characteristics (yield, mean rainfall, mean high temperature, mean low temperature), individual level characteristics (age squared, recipient of a poverty program), and \\textsf{Demographic fixed trends} that are interactions of basline individual and demographic characterstics (sex of individual, household head's education, number of older male/female siblings) with year 2002 dummy $\\bfx_{i}r_{t}$, and with year 2002 * agricultural household dummy $\\bfx_{i}r_{t}D_{i}$. Columns \\textsf{(2), (5)} add \\textsf{other household fixed trends} that are interactions of other baseline household characteristics (per member land holding, per member nonland assets, own piped water, structured toilet). Columns \\textsf{(3), (6)} add \\textsf{Thana fixed trends} which allow heterogenous trends at Thana level. "
SpecMemo2 <- 
  gsub(".3., .6.", "(3), (6), (9), (12)", 
  gsub(".2., .5.", "(2), (5), (8), (11)", 
  gsub(".1., .4.", "(1), (4), (7), (10)", SpecMemo1)))
SEMemoForSelectedResults <- "Standard errors are clusterd at thana level. 95\\% confidence intervals of cluster robust standard errors using Liang and Zeger are shown in parenthesis, bias-reduced linearization (Satterthwaite correction) for a correction of small number of clusters are shown in square brackets. $*$, $**$, $***$ indicate significance levels at 10\\%, 5\\%, 1\\% under BRL cluster robust standard errors, respectively." #, rows under \\textsf{CI (WCB)} shows 95\\% confidence intervals using wild cluster bootstrap
SEMemoForSelectedResultsNoStar <- "Standard errors are clusterd at thana level with a correction for small number of clusters. 95\\% confidence intervals of cluster robust standard errors using Liang and Zeger are shown in parenthesis, bias reduced linearization (Satterthwaite correction) are shown in square brackets. "
@



\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Main results\label{MainResults10Table}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.55}
\hfil\input{\Sexpr{paste0(pathsaveThisVer, "MainResults10WithInteractionsTable.tex")}}

\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\hfill\scriptsize}p{.5cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& \multicolumn{2}{l}{\scriptsize Compiled from IFPRI data. }\\[-1ex]
Notes:& 1. & Sample of direct offspring of household heads. \Sexpr{CovariatesMemo} \Sexpr{SpecMemo1}\\[-1ex]
& 2. & \Sexpr{SEMemoForSelectedResults}\end{tabular}
\end{table}

\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Main results by gender\label{MainGenderResults10Table}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.55}
\hfil\input{\Sexpr{paste0(pathsaveThisVer, "MainGenderResults10WithInteractionsTable.tex")}}

\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\hfill\scriptsize}p{.5cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& \multicolumn{2}{l}{\scriptsize Compiled from IFPRI data. }\\[-1ex]
Notes:& 1. & Sample of direct offspring of household heads. \Sexpr{CovariatesMemo} \Sexpr{SpecMemo2}\\[-1ex]
& 2. & \Sexpr{SEMemoForSelectedResults}\end{tabular}
\end{table}

\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Main results by gender and by age lowerbound\label{MainGenderAgeLBResults}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.55}
\hspace{-1.25cm}\input{\Sexpr{  
paste0(pathsaveThisVer, "MainByGenderByAgeLBAgHH0Results.tex")
}}

\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\hfill\scriptsize}p{.5cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& \multicolumn{2}{l}{\scriptsize Compiled from IFPRI data. }\\[-1ex]
Notes:& 1. & Sample of direct offspring of household heads. \Sexpr{CovariatesMemo} \Sexpr{SpecMemo2}\\[-1ex]
& 2. & \Sexpr{SEMemoForSelectedResults}\end{tabular}
\end{table}

\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Main results by gender and by agricultural household definitions\label{MainGenderByAgdefResults}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.55}
\hspace{-1.25cm}\input{\Sexpr{  
paste0(pathsaveThisVer, "MainGenderByAgdefResults10WithInteractionsTable.tex")
}}

\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\hfill\scriptsize}p{.5cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& \multicolumn{2}{l}{\scriptsize Compiled from IFPRI data. }\\[-1ex]
Notes:& 1. & Sample of direct offspring of household heads. \Sexpr{CovariatesMemo} \Sexpr{SpecMemo2}\\[-1ex]
& 2. & \Sexpr{SEMemoForSelectedResults}\end{tabular}
\end{table}



\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Placebo test results\label{PlaceboResults10Table}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.55}
\hfil\input{\Sexpr{paste0(pathsaveThisVer, "Placebo10AgHHWithInteractionsResults.tex")}}

\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\hfill\scriptsize}p{.5cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& \multicolumn{2}{l}{\scriptsize Compiled from IFPRI data. }\\[-1ex]
Notes:& 1. & Sample of direct offspring of household heads. \Sexpr{CovariatesMemo} \Sexpr{SpecMemo1}\\[-1ex]
& 2. & Impacts of nonexisting exam-Ramadan overlap in 2002. Each specification has two cohort variations, \textsf{10-18 in 1999} of all children and direct offsprings in households. \Sexpr{SpecMemo}\\[-1ex]
& 2. & \textsf{10-18 in 1999} are the same cohorts of main estimation who received treatments in 1999. \Sexpr{SEMemoForSelectedResults} No correction for multiple testing is used (due to complex overlapping structure of data), so each $p$ values are underestimated and the tests are biased toward rejecting the null of zero impacts. \Sexpr{SEMemoForSelectedResults}\end{tabular}
\end{table}

\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Placebo test results, 11-18\label{PlaceboResults11Table}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.55}
\hfil\input{\Sexpr{paste0(pathsaveThisVer, "Placebo11AgHHWithInteractionsResults.tex")}}

\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\hfill\scriptsize}p{.5cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& \multicolumn{2}{l}{\scriptsize Compiled from IFPRI data. }\\[-1ex]
Notes:& 1. & Sample of direct offspring of household heads. \Sexpr{CovariatesMemo} \Sexpr{SpecMemo1}\\[-1ex]
& 2. & Impacts of nonexisting exam-Ramadan overlap in 2002. Each specification has two cohort variations, \textsf{10-18 in 1999} of all children and direct offsprings in households. \Sexpr{SpecMemo}\\[-1ex]
& 2. & \textsf{10-18 in 1999} are the same cohorts of main estimation who received treatments in 1999. \Sexpr{SEMemoForSelectedResults} No correction for multiple testing is used (due to complex overlapping structure of data), so each $p$ values are underestimated and the tests are biased toward rejecting the null of zero impacts. \Sexpr{SEMemoForSelectedResults}\end{tabular}
\end{table}

\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Placebo test results, 12-18\label{PlaceboResults12Table}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.55}
\hfil\input{\Sexpr{paste0(pathsaveThisVer, "Placebo12AgHHWithInteractionsResults.tex")}}

\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\hfill\scriptsize}p{.5cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& \multicolumn{2}{l}{\scriptsize Compiled from IFPRI data. }\\[-1ex]
Notes:& 1. & Sample of direct offspring of household heads. \Sexpr{CovariatesMemo} \Sexpr{SpecMemo1}\\[-1ex]
& 2. & Impacts of nonexisting exam-Ramadan overlap in 2002. Each specification has two cohort variations, \textsf{10-18 in 1999} of all children and direct offsprings in households. \Sexpr{SpecMemo}\\[-1ex]
& 2. & \textsf{10-18 in 1999} are the same cohorts of main estimation who received treatments in 1999. \Sexpr{SEMemoForSelectedResults} No correction for multiple testing is used (due to complex overlapping structure of data), so each $p$ values are underestimated and the tests are biased toward rejecting the null of zero impacts. \Sexpr{SEMemoForSelectedResults}\end{tabular}
\end{table}

\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Placebo test results by gender\label{PlaceboResults10Table}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.55}
\hfil\input{\Sexpr{paste0(pathsaveThisVer, "Placebo", (10:12)[1], aghh.defs[1], "ByGenderWithInteractionsResults.tex")}}

\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\hfill\scriptsize}p{.5cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& \multicolumn{2}{l}{\scriptsize Compiled from IFPRI data. }\\[-1ex]
Notes:& 1. & Sample of direct offspring of household heads. \Sexpr{CovariatesMemo} \Sexpr{SpecMemo1}\\[-1ex]
& 2. & Impacts of nonexisting exam-Ramadan overlap in 2002. Each specification has two cohort variations, \textsf{10-18 in 1999} of all children and direct offsprings in households. \Sexpr{SpecMemo}\\[-1ex]
& 2. & \textsf{10-18 in 1999} are the same cohorts of main estimation who received treatments in 1999. \Sexpr{SEMemoForSelectedResults} No correction for multiple testing is used (due to complex overlapping structure of data), so each $p$ values are underestimated and the tests are biased toward rejecting the null of zero impacts. \Sexpr{SEMemoForSelectedResults}\end{tabular}
\end{table}



\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Main results by gender and age group\label{MainGenderAgeGroup2ResultsWithInteractions}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.55}
\hspace{-1cm}\input{\Sexpr{
paste0(pathsaveThisVer, "MainGenderAgeGroup2ResultsWithInteractions.tex")
}}

\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\hfill\scriptsize}p{.5cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& \multicolumn{2}{l}{\scriptsize Compiled from IFPRI data. }\\[-1ex]
Notes:& 1. & Sample of direct offspring of household heads. \Sexpr{CovariatesMemo} \Sexpr{SpecMemo2}\\[-1ex]
& 2. & \Sexpr{SEMemoForSelectedResults}
\end{tabular}
\end{table}


<<>>=
thanas <- as.character(lapply(unique(yzw[, thana]), function(x) 
  paste0(toupper(substring(x, 1, 1)), substring(x, 2, 30))))
thanas <- thanas[!grepl("NA", thanas)]
@

\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Flooded areas and non-Muslims\label{FloodNonMuslimResults}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.55}
\hfil\input{\Sexpr{paste0(pathsaveThisVer, "FloodNonMuslimResultsWithInteractions.tex")}}

\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\hfill\scriptsize}p{.5cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& \multicolumn{2}{l}{\scriptsize Compiled from IFPRI data. }\\[-1ex]
Notes:& 1. & Sample of direct offspring of household heads. \Sexpr{SpecMemo1} \textsf{Flooded} is 1 for thanas \Sexpr{thanas[!grepl("Aailjhar|Chokoria|Kalia|Nilphamary|Mohadebpur", thanas)]}. Other covariates include interaction terms \textsf{unflooded/nonmuslim * year 2002}. \\[-1ex]
& 2. & \Sexpr{SEMemoForSelectedResults} N$_{ag}$ indicates the number of agricultural households, N$_{group}$ indicates the number of observations for flooded areas or non-Muslims. 
\end{tabular}
\end{table}

\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Grade progression and absent days\label{NumGradesDaysAbsentResults}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.55}
\hfil\input{\Sexpr{
paste0(pathsaveThisVer, "NumGradesDaysAbsentResults.tex")
}}

\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\hfill\scriptsize}p{.5cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& \multicolumn{2}{l}{\scriptsize Compiled from IFPRI data. }\\[-1ex]
Notes:& 1. & Sample of direct offspring of household heads. \Sexpr{SpecMemo1} \\[-1ex]
& 2. & \Sexpr{SEMemoForSelectedResults} N$_{ag}$ indicates the number of agricultural households, N$_{group}$ indicates the number of observations for flooded areas or non-Muslims. 
\end{tabular}
\end{table}


\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Main results by age lower bound\label{MainAgHHDefResultsTable1}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.55}
\hfil\input{\Sexpr{paste0(pathsaveThisVer, "MainByAgeLBResults_Table.tex")}}

\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\hfill\scriptsize}p{.5cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& \multicolumn{2}{l}{\scriptsize Compiled from IFPRI data. }\\[-1ex]
Notes:& 1. & Each specification has two sample variations, \textsf{All} which uses all children in a household and \textsf{Direct} which uses only direct offsprings of household head. \Sexpr{SpecMemo}\\[-1ex]
& 2. & \Sexpr{SEMemoForSelectedResults}\end{tabular}
\end{table}

\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Main results by age lower bound, income ag HH definition\label{MainAgHHDefIsResultsTable1}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.55}
\hfil\input{\Sexpr{paste0(pathsaveThisVer, "MainByAgeLBIsResults_Table.tex")}}

\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\hfill\scriptsize}p{.5cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& \multicolumn{2}{l}{\scriptsize Compiled from IFPRI data. }\\[-1ex]
Notes:& 1. & Each specification has two sample variations, \textsf{All} which uses all children in a household and \textsf{Direct} which uses only direct offsprings of household head. \Sexpr{SpecMemo}\\[-1ex]
& 2. & \Sexpr{SEMemoForSelectedResults}\end{tabular}
\end{table}


\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Main results by agricultural household definitions, 10 years and older\label{MainAgHHDefResultsTable1}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.55}

\hfil\input{\Sexpr{
paste0(pathsaveThisVer, "Main", (10:12)[1], "ByAgHHdefResults_Table.tex")
}}
\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\hfill\scriptsize}p{.5cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& \multicolumn{2}{l}{\scriptsize Compiled from IFPRI data. Cohort of 10 - \Sexpr{maxAge} year olds in 1999.}\\[-1ex]
\end{tabular}
\end{table}

\clearpage
\begin{itemize}
\vspace{1.0ex}\setlength{\itemsep}{1.0ex}\setlength{\baselineskip}{12pt}
\item	Occupation based definition of agricultural household is associated with agricultural and nonagricultural activities as the main income source (36 households; NGO worker, rickshaw puller, carpenter, cottage industry owner, trader, teacher, fisherman, poultry and cattle raiser; see p.5 of Create2RoundPanel.pdf). This definition may have measurement errors which can explain the weaker impacts.
\end{itemize}

Correlation between alternative agricultural household definitions\\
\hfil\begin{tabular}{rccc}
      & agHH0 & isagHH & hdagHH \\
isagHH & 0.944 &  &  \\
hdagHH & 0.937 & 0.964 &  \\
ocagHH & 0.824 & 0.760 & 0.752 
\end{tabular}

\clearpage
\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Main results by agricultural household definitions, 11 years and older\label{MainAgHHDefResultsTable1}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.55}
\hfil\input{\Sexpr{
paste0(pathsaveThisVer, "Main", (10:12)[2], "ByAgHHdefResults_Table.tex")
}}

\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\hfill\scriptsize}p{.5cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& \multicolumn{2}{l}{\scriptsize Compiled from IFPRI data. Cohort of 11 - \Sexpr{maxAge} year olds in 1999.}\\[-1ex]
Notes:& 1. & Each specification has two sample variations, \textsf{All} which uses all children in a household and \textsf{Direct} which uses only direct offsprings of household head. \Sexpr{SpecMemo}\\[-1ex]
& 2. & \Sexpr{SEMemoForSelectedResults}\end{tabular}
%\end{minipage}
\end{table}

\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Main results by agricultural household definitions, 12 years and older\label{MainAgHHDefResultsTable1}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.55}
\hfil\input{\Sexpr{paste0(pathsaveThisVer, "Main12ByAgHHDefResults_Table.tex")}}

\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\hfill\scriptsize}p{.5cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& \multicolumn{2}{l}{\scriptsize Compiled from IFPRI data. Cohort of 12 - \Sexpr{maxAge} year olds in 1999.}\\[-1ex]
Notes:& 1. & Each specification has two sample variations, \textsf{All} which uses all children in a household and \textsf{Direct} which uses only direct offsprings of household head. \Sexpr{SpecMemo}\\[-1ex]
& 2. & \Sexpr{SEMemoForSelectedResults}\end{tabular}
%\end{minipage}
\end{table}

\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Main results by age lowerbound, default ag HH definition\label{MainByAgeLBResultsTable}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.55}
\hfil\input{\Sexpr{paste0(pathsaveThisVer, "MainByAgeLBResults_Table.tex")}}

\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\hfill\scriptsize}p{.5cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& \multicolumn{2}{l}{\scriptsize Compiled from IFPRI data. Default ag HH def is used. Cohort of 10 - \Sexpr{maxAge} year olds in 1999.}\\[-1ex]
Notes:& 1. & Each specification has two sample variations, \textsf{All} which uses all children in a household and \textsf{Direct} which uses only direct offsprings of household head. \Sexpr{SpecMemo}\\[-1ex]
& 2. & \Sexpr{SEMemoForSelectedResults}\end{tabular}
\end{table}

\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Main results by age lowerbound, \Sexpr{aghh.defs[2]} ag HH definition\label{MainByAgeLBM2ResultsTable}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.55}
\hfil\input{\Sexpr{paste0(pathsaveThisVer, "MainByAgeLB", agd[2], "Results_Table.tex")}}

\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\hfill\scriptsize}p{.5cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& \multicolumn{2}{l}{\scriptsize Compiled from IFPRI data. \textsf{\Sexpr{aghh.defs[2]}} ag HH def is used. Cohort of 10 - \Sexpr{maxAge} year olds in 1999.}\\[-1ex]
Notes:& 1. & Each specification has two sample variations, \textsf{All} which uses all children in a household and \textsf{Direct} which uses only direct offsprings of household head. \Sexpr{SpecMemo}\\[-1ex]
& 2. & \Sexpr{SEMemoForSelectedResults}\end{tabular}
\end{table}

\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Main results by age lowerbound, \Sexpr{aghh.defs[3]} ag HH definition\label{MainByAgeLBM3ResultsTable}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.55}
\hfil\input{\Sexpr{paste0(pathsaveThisVer, "MainByAgeLB", agd[3], "Results_Table.tex")}}

\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\hfill\scriptsize}p{.5cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& \multicolumn{2}{l}{\scriptsize Compiled from IFPRI data. \textsf{\Sexpr{aghh.defs[3]}} ag HH def is used. Cohort of 10 - \Sexpr{maxAge} year olds in 1999.}\\[-1ex]
Notes:& 1. & Each specification has two sample variations, \textsf{All} which uses all children in a household and \textsf{Direct} which uses only direct offsprings of household head. \Sexpr{SpecMemo}\\[-1ex]
& 2. & \Sexpr{SEMemoForSelectedResults}\end{tabular}
\end{table}

\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Main results by age lowerbound, \Sexpr{aghh.defs[4]} ag HH definition\label{MainByAgeLBM4ResultsTable}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.55}
\hfil\input{\Sexpr{paste0(pathsaveThisVer, "MainByAgeLB", agd[4], "Results_Table.tex")}}

\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\hfill\scriptsize}p{.5cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& \multicolumn{2}{l}{\scriptsize Compiled from IFPRI data. \textsf{\Sexpr{aghh.defs[4]}} ag HH def is used. Cohort of 10 - \Sexpr{maxAge} year olds in 1999.}\\[-1ex]
Notes:& 1. & Each specification has two sample variations, \textsf{All} which uses all children in a household and \textsf{Direct} which uses only direct offsprings of household head. \Sexpr{SpecMemo}\\[-1ex]
& 2. & \Sexpr{SEMemoForSelectedResults}\end{tabular}
\end{table}


\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Main results by age lower bound, by gender\label{MainAgHHDefIsResultsTable1}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.55}
\hspace{-1.5cm}\input{\Sexpr{
        paste0(pathsaveThisVer, c("Main", "Placebo")[1], c(1999, 2002)[1], "Older", (10:12)[1], 
             "ByGenderByAgHHdefResults_Table.tex")
}}

\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\hfill\scriptsize}p{.5cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& \multicolumn{2}{l}{\scriptsize Compiled from IFPRI data. }\\[-1ex]
Notes:& 1. & Each specification has two sample variations, \textsf{All} which uses all children in a household and \textsf{Direct} which uses only direct offsprings of household head. \Sexpr{SpecMemo}\\[-1ex]
& 2. & \Sexpr{SEMemoForSelectedResults}\end{tabular}
\end{table}


\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Placebo results, 1999 cohorts\label{PlaceboResults1999Table}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.55}
\hfil\input{\Sexpr{
paste0(pathsaveThisVer, "Placebo", c(1999, 2002)[1], "Older", (10:12)[1], "ByHHtypeByAgHHdefResults_Table.tex")
}}

\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\hfill\scriptsize}p{.5cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& \multicolumn{2}{l}{\scriptsize Compiled from IFPRI data. Various cohorts.}\\[-1ex]
Notes:& 1. & Impacts of nonexisting exam-Ramadan overlap in 2002. Each specification has two cohort variations, \textsf{10-18 in 1999} of all children and direct offsprings in households. \Sexpr{SpecMemo}\\[-1ex]
& 2. & \textsf{10-18 in 1999} are the same cohorts of main estimation who received treatments in 1999. \Sexpr{SEMemoForSelectedResults} No correction for multiple testing is used (due to complex overlapping structure of data), so each $p$ values are underestimated and the tests are biased toward rejecting the null of zero impacts. 
\end{tabular}
%\end{minipage}
\end{table}

\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Placebo results, 2002 cohorts\label{PlaceboResults2002Table}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.55}
\hfil\input{\Sexpr{
paste0(pathsaveThisVer, "Placebo", c(1999, 2002)[2], "Older", (10:12)[1], "ByHHtypeByAgHHdefResults_Table.tex")
}}

\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\hfill\scriptsize}p{.5cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& \multicolumn{2}{l}{\scriptsize Compiled from IFPRI data. Various cohorts.}\\[-1ex]
Notes:& 1. & Impacts of nonexisting exam-Ramadan overlap in 2002. \textsf{10-18 in 2002} are all children and direct offsprings in households. \Sexpr{SpecMemo}\\[-1ex]
& 2. & \textsf{10-18 in 2002} are same age range as in main estimation but include cohorts 7-9 in 1999 who did not receive treatments in 1999. \Sexpr{SEMemoForSelectedResults} No correction for multiple testing is used (due to complex overlapping structure of data), so each $p$ values are underestimated and the tests are biased toward rejecting the null of zero impacts. 
\end{tabular}
%\end{minipage}
\end{table}

\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Placebo results by gender, direct offspring, 1999 cohorts\label{PlaceboResultsDirect1999Table}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.55}
\hspace{-1cm}\input{\Sexpr{
paste0(pathsaveThisVer, "Placebo", c(1999, 2002)[1], "Older", (10:12)[1], "ByGenderByAgHHdefResults_Table.tex")
}}

\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\hfill\scriptsize}p{.5cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& \multicolumn{2}{l}{\scriptsize Compiled from IFPRI data. Various cohorts.}\\[-1ex]
Notes:& 1. & Impacts of nonexisting exam-Ramadan overlap in 2002. Each specification has two cohort variations, \textsf{10-18 in 1999} of all children and direct offsprings in households. \Sexpr{SpecMemo}\\[-1ex]
& 2. & \textsf{10-18 in 1999} are the same cohorts of main estimation who received treatments in 1999. \Sexpr{SEMemoForSelectedResults} No correction for multiple testing is used (due to complex overlapping structure of data), so each $p$ values are underestimated and the tests are biased toward rejecting the null of zero impacts. 
\end{tabular}
%\end{minipage}
\end{table}

\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Placebo results by gender, direct offspring, 2002 cohorts\label{PlaceboResultsDirect2002Table}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.55}
\hspace{-1cm}\input{\Sexpr{
paste0(pathsaveThisVer, "Placebo", c(1999, 2002)[2], "Older", (10:12)[1], "ByGenderByAgHHdefResults_Table.tex")
}}

\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\hfill\scriptsize}p{.5cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& \multicolumn{2}{l}{\scriptsize Compiled from IFPRI data. Various cohorts.}\\[-1ex]
Notes:& 1. & Impacts of nonexisting exam-Ramadan overlap in 2002. \textsf{10-18 in 2002} are all children and direct offsprings in households. \Sexpr{SpecMemo}\\[-1ex]
& 2. & \textsf{10-18 in 2002} are same age range as in main estimation but include cohorts 7-9 in 1999 who did not receive treatments in 1999. \Sexpr{SEMemoForSelectedResults} No correction for multiple testing is used (due to complex overlapping structure of data), so each $p$ values are underestimated and the tests are biased toward rejecting the null of zero impacts. 
\end{tabular}
%\end{minipage}
\end{table}


\clearpage
\subsubsection{Unflooded and non-Muslims}

<<flooded nonmuslim results, echo = F>>=
Res <- qread(paste0(pathsaveThisVer, "TabulatedFloodMuslimResults.qs"))
Enr <- qread(paste0(pathsaveThisVer, "TabulatedFloodMuslimResultsEnr.qs"))
NR <- qread(paste0(pathsaveThisVer, "TabulatedFloodMuslimResultsNR.qs"))
rs <- Res[grepl("^agHH.yr.$|flooded.ag|nonmuslim.ag", Coef) & grepl("4|6|7", reg) & grepl("Em", data)
   & agelb == 10 & grepl(0, agdef) & grepl("di", HHtype), ]
rs[, spec := reg-3]
rs[, spec := factor(spec, labels = 1:3)]
rs[, reg := factor(reg)]
rs[, Coef := factor(Coef)]
rs[, gender := factor(gender, levels = genderitems)]
rs[, ci := paste0("\\mbox{\\tiny [", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), "]}")]
rs[grepl("^L", inference), ci := paste0("\\mbox{\\tiny (", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), ")}")]
AddStar <- T
if (AddStar) {
  rs[, est := formatC(beta, digits = 4, format = "f")]
  rs[, Estimate := paste0(est, "^{\\phantom{***}}")]
  rs[p < .1, Estimate := paste0(est, "^{*\\phantom{**}}")]
  rs[p < .05, Estimate := paste0(est, "^{**\\phantom{*}}")]
  rs[p < .01, Estimate := paste0(est, "^{***}")]
  rs[, est := NULL]
}
# tabulate by specification
setorder(rs, spec, file)
for (fm in 1:2) {
  fl <- c("flood", "muslim")[fm]
  for (ss in 1:3) 
    assign(paste0("rstab", ss), 
      rbind(
        # Order: boys, girls, boys+girls
          rs[grepl(ss, spec) & grepl(fl, file) & grepl("^B", inference) & grepl("^ag", Coef), Estimate]
        , rs[grepl(ss, spec) & grepl(fl, file) & grepl("^L", inference) & grepl("^ag", Coef), ci]
        , rs[grepl(ss, spec) & grepl(fl, file) & grepl("^B", inference) & grepl("^ag", Coef), ci]
        , rs[grepl(ss, spec) & grepl(fl, file) & grepl("^B", inference) & grepl(c("^fl.*H", "no.*H")[fm], Coef), Estimate]
        , rs[grepl(ss, spec) & grepl(fl, file) & grepl("^L", inference) & grepl(c("^fl.*H", "no.*H")[fm], Coef), ci]
        , rs[grepl(ss, spec) & grepl(fl, file) & grepl("^B", inference) & grepl(c("^fl.*H", "no.*H")[fm], Coef), ci]
      )
    )
  rstab <- cbind(rstab1, rstab2, rstab3)
  assign(paste0("rs", fl), rstab)
}
nr <- unique(NR[grepl("4|6|7", spec) & grepl("Em", data) & agelb == 10 & grepl(0, agdef) & grepl("di", HHtype), ])
nr[, gender := factor(gender, levels = genderitems)]
setkey(nr, file, spec, gender)
nr <- t(nr[spec > 3, .(R, Yes, Ngroup, n)])
rsflood <- rbind(rsflood, nr[, 1:9])
rsmuslim <- rbind(rsmuslim, nr[, -(1:9)])
rsTab <- rbind(rsflood, rsmuslim)
rsTab <- rbind(rsTab[1:3, ], "", rsTab[4:13, ], "", rsTab[14:nrow(rsTab), ])
ii <- 1
rsTab <- cbind(
  Covariates = c(
      paste0(
      "Agricultural households * year ",  c(2002, 2006)[ii]), 
      "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
      paste0(
      "Agricultural households * year ",  c(2002, 2006)[ii]), 
      " * Flooded",
      "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
      "$\\bar{R}^{2}$", "N$_{ag}$", "N$_{group}$", "N",
      paste0(
      "Agricultural households * year ",  c(2002, 2006)[ii]), 
      "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
      paste0(
      "Agricultural households * year ",  c(2002, 2006)[ii]), 
      " * Non-Muslim",
      "\\hspace{1em} CI (LZ)", "\\hspace{1em} CI (BRL)", 
      "$\\bar{R}^{2}$", "N$_{ag}$", "N$_{group}$", "N")
      , 
    rsTab)
rsTab <- data.table(rsTab)
enr <- Enr[grepl("Em", data) & agelb == 10 & grepl(0, agdef) & grepl("B", inference) & 
  grepl("di", HHtype), ]
enr[, gender := factor(gender, levels = genderitems)]
setkey(enr, file, gender, agHH, tee)
enr2 <- reshape(enr, direction = "wide", idvar = c("file", "data", "agHH", "tee"),
  timevar = "gender", v.names = c("Num", "EnRate"))
enr2W <- reshape(enr2, direction = "wide", idvar = c("data", "agHH", "tee"),
  timevar = "file", v.names = grepout("En|Nu", colnames(enr2)))
enr3 <- enr2W[, grepout("En", colnames(enr2W)), with = F]
enr3 <- rbind(enr3[, rep(1:3, 3), with = F], enr3[, rep(1:3, 3), with = F])
enr3 <- formatC(as.matrix(enr3), digits = 4, format = "f")
enr3 <- data.table(cbind(
    Covariates = rep(paste("mean of", c("treated", "control"), "in", rep(c(2002, 2006), each = 2)), 2)
  , enr3))
rsTab2 <- rbindlist(list(rsTab[1:grep("^N$", Covariates)[1], ], enr3[1:4, ],
    rsTab[-(1:grep("^N$", Covariates)[1]), ], enr3[-(1:4), ]), use.names = F
  )
SepCols <- c(3, 6)
ltb <- latextab(as.matrix(rsTab2), delimiterline = NULL, 
    hcenter = c(4.0, rep(1.25, ncol(rsTab2)-1)),
    hleft = c("\\scriptsize", rep("\\hfil\\scriptsize$", ncol(rsTab2)-1)), 
    hright = c("\\hfill", rep("$", ncol(rsTab2)-1)),
    headercolor = NULL, 
    addseparatingcols = SepCols, 
    separatingcolwidth = rep(.1, length(SepCols)),
    separatingcoltitle = c("\\textsf{specification 1}", "\\textsf{specification 2}", "\\textsf{specification 3}")
  ) 
ltb <- c(
  ltb[1], "\\hline",
  ltb[2:grep("cline", ltb), ],
  "&\\multicolumn{11}{c}{Flooded areas}\\\\",
  paste("&", gsub("\\&\\(7", "&&(7", gsub("\\&\\(4", "&&(4", paste("(", 1:9, ")", sep = "", collapse = "&"))), "\\\\"),
  gsub("\\&$", "\\\\\\\\", 
    paste("&", paste(rep("\\textsf{Boys} & \\textsf{Girls} & \\textsf{Boys+Girls}&", 3), collapse = "&"))),
  ltb[(grep("cline", ltb)+2):(grep("\\* F", ltb)+2), ],
  paste("Demographic fixed trends", 
    gsub("\\&$", "\\\\\\\\", 
    paste(rep(paste(paste(rep("& \\mbox{\\scriptsize Yes}", 3), collapse = ""), "&"), 3), collapse = ""))
    ),
  paste("Other household fixed trends&&&&",
    gsub("\\&$", "\\\\\\\\", 
    paste(rep(paste(paste(rep("& \\mbox{\\scriptsize Yes}", 3), collapse = ""), "&"), 2), collapse = ""))
    ),
  paste("Thana fixed trends& &&& & &&&",
    gsub("\\&$", "\\\\\\\\", 
    paste(rep(paste(paste(rep("& \\mbox{\\scriptsize Yes}", 3), collapse = ""), "&"), 1), collapse = ""))
    ),
  ltb[(grep("\\* F", ltb)+3):(grep("^Ag", ltb)[3]-1), ],
  "&\\multicolumn{11}{c}{Non-Muslims}\\\\",
  paste("&", gsub("\\&\\(16", "&&(16", gsub("\\&\\(13", "&&(13", paste0("(", 1:9+9, ")", collapse = "&"))), "\\\\"), 
  gsub("\\&$", "\\\\\\\\", 
    paste("&", paste(rep("\\textsf{Boys} & \\textsf{Girls} & \\textsf{Boys+Girls}&", 3), collapse = "&"))),
  ltb[(grep("^Ag", ltb)[3]):(grep("\\* Non-M", ltb)+2), ],
  paste("Demographic fixed trends", 
    gsub("\\&$", "\\\\\\\\", 
    paste(rep(paste(paste(rep("& \\mbox{\\scriptsize Yes}", 3), collapse = ""), "&"), 3), collapse = ""))
    ),
  paste("Other household fixed trends&&&&",
    gsub("\\&$", "\\\\\\\\", 
    paste(rep(paste(paste(rep("& \\mbox{\\scriptsize Yes}", 3), collapse = ""), "&"), 2), collapse = ""))
    ),
  paste("Thana fixed trends& &&& & &&&",
    gsub("\\&$", "\\\\\\\\", 
    paste(rep(paste(paste(rep("& \\mbox{\\scriptsize Yes}", 3), collapse = ""), "&"), 1), collapse = ""))
    ),
    ltb[(grep("\\* Non-M", ltb)+3):(nrow(ltb)-1), ], "\\hline",
    ltb[nrow(ltb), ]
  )
ltb <- gsub("CI \\(.*?\\)", "", ltb)
write.tablev(ltb
  ,  paste0(pathsaveThisVer, "FloodNonmuslimGenderResults_Table.tex")
  ,  colnamestrue = F)
@
<<plot unflooded and non-muslims, eval = F>>=
library(ggplot2)
Res <- qread(paste0(pathsaveThisVer, "TabulatedFloodMuslimResults.qs"))
re <- Res[grepl("Em", data) & grepl("^agHH", Coef) & grepl("4|5|6|7", reg) & grepl("B", inference)
   & grepl(0, agdef) & agelb == 10, ]
re[, hr := paste0(HHtype, "-", reg)]
re[, yintercept := 0]
g <- ggplot(data = re, 
    aes(x = demean, y = beta, group = hr, fill = hr, shape = hr, colour = hr)) + 
  geom_pointrange(aes(ymin = CI_L, ymax = CI_U),
    stat = "identity", fatten = 1.75, 
    position = position_dodge(width = .5)) +
  scale_shape_manual(values = rep(c(0:6, 8), 2))+
  facet_grid(file ~ gender, scales = "free_y")+
  ThisThemeEnd+
  #scale_y_continuous(limits = c(-1, 1)*3)+
  xlab("interaction terms") + 
  labs(color  = "regression specifications", fill = "regression specifications", 
    shape = "regression specifications") +
  guides(
    colour = guide_legend(title = "regression specifications", nrow = 2),
    fill = guide_legend(title = "regression specifications", nrow = 2),
    shape = guide_legend(title = "regression specifications", nrow = 2)
    ) +
  geom_hline(aes(yintercept = yintercept), colour = "lightgreen")
pdf(
  paste0(pathsaveThisVer, "FloodedNonMuslimsImpactsByGenderByDemeaning.pdf")
  , width = 2*12/2.54, height = 2*8/2.54)
print(g)
whatever <- dev.off()
@



<<>>=
@

\clearpage
\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Flooded and non-Muslims results by gender\label{FloodNonmuslimGenderResultsTable}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.525}
\hspace{-1.5cm}\input{\Sexpr{paste0(pathsaveThisVer, "FloodNonmuslimGenderResults_Table.tex")}}

\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& Compiled from IFPRI data. All individuals aged 10-18 in households. \textsf{Unflooded} is 1 for thanas Aailjhar, Chokoria, Kalia, Nilphamary Sadar, Mohadebpur.\\[-1ex]
Notes:& Other covariates include interaction terms \textsf{unflooded/nonmuslim * year 2002}. \Sexpr{SEMemoForSelectedResults} N$_{ag}$ indicates the number of agricultural households, N$_{group}$ indicates the number of observations for unflooded areas or non-Muslims. 
\end{tabular}
%\end{minipage}
\end{table}


\setlength{\baselineskip}{12pt}

\textsc{\footnotesize Table \ref{FloodNonmuslimResultsTable}} assess effects of flood and non-Muslims on the  impacts of exam-harvest nonoverlap in 1999. Left panel shows results using flood and its interaction with year 2002, and year 2002 * agricultural household. It shows impacts do not change substantially after inclusion of flood related terms. Right panel shows results using non-Muslims and its interaction with year 2002, and year 2002 * agricultural household. It shows impacts do not differ from main results given that the estmates are imprecisely estimated. 

For non-Muslims, point estimates suggest that Ramadan prior to exam in 2002, or fasting during post-Ramadan festivity which coincide with final exams, did not lead to lower enrollment rates. However, estimates have large standard errors and nothing conclusive can be stated from the results.  

This is not direct evidence against our main finding that exam-harvest overlap negatively affects schooling. In \textsc{\footnotesize Table \ref{FloodNonmuslimResultsTable}}, we see that smaller impacts among non Muslims than Muslims mostly reflect the larger drop in enrollment among the non-agricultural households of non Muslims. Enrollment rates of agricultural households reduce by almost the same amount between Muslims (-.3210) and non Muslims (-.3220). If the impacts we observe are due to fasting and festivity, we should observe impacts on both agricultural and non-agricultural households of Muslims, so their estimated impacts should be near zero. While it is unclear why enrollment rates of non-agricultural households reduce more among non Muslims, the results here are inconsistent with the fasting and festivity mechanism that only affects Muslim households.

\subsubsection{Grade progression and days absent}



<<grade absent>>=
ga <- qread(paste0(pathsaveThisVer, "GenderGradeDaysAbsentTabulated.qs"))
NR <- qread(paste0(pathsaveThisVer, "GenderGradeDaysAbsentTabulatedNR.qs"))
Enr <- qread(paste0(pathsaveThisVer, "GenderGradeDaysAbsentTabulatedEnr.qs"))
ga[, reg := as.numeric(as.character(reg))]
ga2 <- ga[grepl("^agHH.yr.$", Coef) & grepl(0, agdef) & reg > 3 & reg != 5 & 
  agelb == 10 & grepl("di", HHtype), ]
ga2[, spec := factor(reg-3)]
ga2[, spec := factor(spec, labels = 1:3)]
ga2[, gender := factor(gender, levels = genderitems)]
ga2[, Estimate := formatC(beta, digits = 4, format = "f")]
ga2[, ci := paste0("\\mbox{\\tiny [", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), "]}")]
ga2[grepl("^L", inference), ci := paste0("\\mbox{\\tiny (", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), ")}")]
setnames(ga2, "p_val", "p")
setkey(ga2, file, spec, gender)
AddStar <- T
if (AddStar) {
  ga2[, est := Estimate]
  ga2[, Estimate := paste0(est, "^{\\phantom{***}}")]
  ga2[p < .1, Estimate := paste0(est, "^{*\\phantom{**}}")]
  ga2[p < .05, Estimate := paste0(est, "^{**\\phantom{*}}")]
  ga2[p < .01, Estimate := paste0(est, "^{***}")]
  ga2[, est := NULL]
}
# tabulate by specification
setorder(ga2, spec, file)
ga2tab <- rbind(
    ga2[grepl("ini", file) & grepl("B", inference), Estimate],
    ga2[grepl("ini", file) & grepl("^L", inference), ci],
    ga2[grepl("ini", file) & grepl("B", inference), ci],
    ga2[grepl("de e", file) & grepl("B", inference), Estimate],
    ga2[grepl("de e", file) & grepl("^L", inference), ci],
    ga2[grepl("de e", file) & grepl("B", inference), ci],
    ga2[grepl("abs", file) & grepl("B", inference), Estimate],
    ga2[grepl("abs", file) & grepl("^L", inference), ci],
    ga2[grepl("abs", file) & grepl("B", inference), ci]
   )
nr <- unique(NR[grepl(0, agdef) & reg > 3 & reg != 5 & 
  agelb == 10 & grepl("di", HHtype), ])
nr[, gender := factor(gender, levels = genderitems)]
nr[, file := factor(file, levels = c("grade initial enr", "grade enr", "absent enr"))]
setkey(nr, file, reg, gender)
nr <- t(nr[, .(R, n)])
nr <- rbind(nr[, 1:9], nr[, 10:18], nr[, 19:27])
Enr[, gender := factor(gender, levels = genderitems)]
enr <- unique(Enr[agelb == 10 & grepl(0, agdef) & grepl("di", HHtype), ])
enr[, file := factor(file, levels = c("grade initial enr", "grade enr", "absent enr"))]
setkey(enr, file, gender, agHH, tee)
enrW <- reshape(enr, direction = "wide", idvar = c("agHH", "tee", "gender"),
  timevar = "file", v.names = grepout("En|Nu", colnames(enr)))
enrW2 <- reshape(enrW, direction = "wide", idvar = c("agHH", "tee"),
  timevar = "gender", v.names = grepout("En|Nu", colnames(enrW)))
enrW3 = copy(enrW2[, grepout("boys|gir", colnames(enrW2)), with = F])
enrW4 = copy(enrW2[, grepout("boys|gir", colnames(enrW2)), with = F])
enrW3[, grepout("Num", colnames(enrW3)) := NULL]
enrW4[, grepout("En", colnames(enrW4)) := NULL]
enrW3 <- data.table(as.matrix(rbind(enrW3, enrW3[2, ] - enrW3[1, ] - (enrW3[4, ] - enrW3[3, ]))))
Engi <- enrW3[, grepout("gra.*ini", colnames(enrW3)), with = F]
Enge <- enrW3[, grepout("g.*de e", colnames(enrW3)), with = F]
Ena <- enrW3[, grepout("ab", colnames(enrW3)), with = F]
Engi <- data.table(formatC(as.matrix(Engi), digits = 4, format = "f"))
Enge <- data.table(formatC(as.matrix(Enge), digits = 4, format = "f"))
Ena <- data.table(formatC(as.matrix(Ena), digits = 4, format = "f"))
ng <- enrW4[, grepout("gra", colnames(enrW4)), with = F][c(1, 3), ]
na <- enrW4[, grepout("ab", colnames(enrW4)), with = F][c(1, 3), ]
estnr <- data.table(rbind(ga2tab[1:3, ], nr[1:2, ], ga2tab[4:6, ], nr[3:4, ], ga2tab[7:9, ], nr[5:6, ]))
estnr <- rbindlist(list(
  estnr[1:5, ], Engi[, rep(1:3, 3), with = F], 
  estnr[6:10, ], Enge[, rep(1:3, 3), with = F],
  estnr[11:15, ], Ena[, rep(1:3, 3), with = F]),
  use.names = F)
ii <- 1
hdr <- c(paste0("Mean of ", rep(c("treated", "control"), each = 2), " in ", 
   list(rep(c(1999, 2002), 2), rep(c(2002, 2006), 2))[[ii]]), "Raw DID")
estnr <- cbind(
  Covariates = rep(c("Agricultural households * year 2002", 
      "\\hspace{1em} CI (LZ)", 
      "\\hspace{1em} CI (BRL)", 
      "$\\bar{R}^{2}$", "N", hdr), 3)
  , estnr)
SepCols <- c(3, 6) 
ltb <- latextab(as.matrix(estnr), delimiterline = NULL, 
    hcenter = c(4, rep(1.25, ncol(estnr)-1)),
    hleft = c("\\scriptsize", rep("\\hfil\\scriptsize$", ncol(estnr)-1)), 
    hright = c("\\hfill", rep("$", ncol(estnr)-1)),
    headercolor = NULL, 
    addseparatingcols = SepCols, separatingcolwidth = rep(.1, length(SepCols)), 
    separatingcoltitle = c("\\textsf{Specification 1}", "\\textsf{Specfication 2}", "\\textsf{Specfication 3}")
  ) 
controlsexplained <- c("Demographic fixed trends & \\multicolumn{3}{c}{\\scriptsize Yes} && \\multicolumn{3}{c}{\\scriptsize Yes} && \\multicolumn{3}{c}{\\scriptsize Yes}\\\\"
    , 
    "Household fixed trends &  \\multicolumn{3}{c}{\\scriptsize } && \\multicolumn{3}{c}{\\scriptsize Yes} && \\multicolumn{3}{c}{\\scriptsize Yes} \\\\"
    , 
    "Thana fixed trends & \\multicolumn{3}{c}{\\scriptsize } && \\multicolumn{3}{c}{\\scriptsize } && \\multicolumn{3}{c}{\\scriptsize Yes}\\\\[1.5ex]")
ltb <- c(
  ltb[1, ], "\\hline",
  ltb[2:grep("cline", ltb), ],
  "&\\multicolumn{11}{c}{\\footnotesize A. Grade progression, initial erollers}\\\\",
    paste0(
      "&\\textsf{boys} & \\textsf{girls} & \\textsf{boys+girls}",
      paste(rep("&&\\textsf{boys} & \\textsf{girls} & \\textsf{boys+girls}", 2), collapse = "")
      , "\\\\"),
    "&(1) & (2) &(3) && (4) & (5) & (6) && (7) & (8) & (9)\\\\",
  ltb[(grep("cline", ltb)+2):(grep("Raw", ltb)[1]), ],
  controlsexplained,
  "&\\multicolumn{11}{c}{\\footnotesize B. Grade progression, all time enrollers}\\\\", 
    paste0(
      "&\\textsf{boys} & \\textsf{girls} & \\textsf{boys+girls}",
      paste(rep("&&\\textsf{boys} & \\textsf{girls} & \\textsf{boys+girls}", 2), collapse = "")
      , "\\\\"),
    "&(10) & (11) &(12) && (13) & (14) & (15) && (16) & (17) & (18)\\\\", 
  ltb[(grep("Raw", ltb)[1]+1):(grep("Raw", ltb)[2]), ],
  controlsexplained, 
  "&\\multicolumn{11}{c}{\\footnotesize C. Absent days, all time enrollers}\\\\", 
    paste0(
      "&\\textsf{boys} & \\textsf{girls} & \\textsf{boys+girls}",
      paste(rep("&&\\textsf{boys} & \\textsf{girls} & \\textsf{boys+girls}", 2), collapse = "")
      , "\\\\"),
    "&(19) & (20) &(21) && (22) & (23) & (24) && (25) & (26) & (27)\\\\", 
  ltb[(grep("Raw", ltb)[2]+1):(grep("Raw", ltb)[3]), ],
  controlsexplained, 
  "\\hline",
  ltb[(nrow(ltb)), ]
  )
ltb <- ltb[!grepl("Raw", ltb)]
ltb <- gsub("CI \\(.*?\\)", "", ltb)
write.tablev(ltb
  ,  paste0(pathsaveThisVer, "NumGradesDaysAbsentGenderResults_Table.tex")
  ,  colnamestrue = F)
<<plot grade absent by gender, eval = T>>=
library(ggplot2)
egd <- qread(paste0(pathsaveThisVer, "GenderGradeDaysAbsentTabulated.qs"))
egd2 <- egd[grepl("ab|de$", file) & grepl("Em", data) & grepl("^agHH", Coef) & 
  grepl("4|5|6|7", reg) & grepl("B", inference) & grepl(0, agdef), ]
egd2[, gender := factor(gender, levels = genderitems)]
egd2[, hr := paste0(HHtype, "-", reg)]
egd2[, fa := paste0(file, ", ", agelb)]
egd2[, yintercept := 0]
g <- ggplot(data = egd2, 
    aes(x = agelb, y = beta, group = hr, fill = hr, shape = hr, colour = hr)) + 
  geom_pointrange(aes(ymin = CI_L, ymax = CI_U),
    stat = "identity", fatten = 1.75, 
    position = position_dodge(width = .5)) +
  scale_shape_manual(values = rep(c(0:6, 8), 2))+
  facet_grid( ~ gender, scales = "free_y")+
  ThisThemeEnd+
  #scale_y_continuous(limits = c(-1, 1)*3)+
  xlab("interaction terms") + 
  labs(color  = "regression specifications", fill = "regression specifications", 
    shape = "regression specifications") +
  guides(
    colour = guide_legend(title = "regression specifications", nrow = 2),
    fill = guide_legend(title = "regression specifications", nrow = 2),
    shape = guide_legend(title = "regression specifications", nrow = 2)
    ) +
  geom_hline(aes(yintercept = yintercept), colour = "lightgreen")
pdf(
  paste0(pathsaveThisVer, "NumGradeDaysAbsentImpactsByGenderByDemeaningByAgelb.pdf")
  , width = 2*12/2.54, height = 2*8/2.54)
print(g)
whatever <- dev.off()
@


<<absent grade grade enrollers, eval = F, echo = F>>=
ga <- qread(paste0(pathsaveThisVer, "GenderGradeDaysAbsentTabulated.qs"))
NR <- qread(paste0(pathsaveThisVer, "GenderGradeDaysAbsentTabulatedNR.qs"))
Enr <- qread(paste0(pathsaveThisVer, "GenderGradeDaysAbsentTabulatedEnr.qs"))
ga2 <- ga[grepl("de$|de en|sent$", file) & grepl("^agHH.yr.$", Coef) & grepl(0, agdef) & grepl("4|6|7", reg) & 
  agelb == 10 & grepl("di", HHtype), ]
ga2[, spec := factor(as.numeric(as.character(reg))-3)]
ga2[, spec := factor(spec, labels = 1:3)]
ga2[, gender := factor(gender, levels = genderitems)]
ga2[, Estimate := formatC(beta, digits = 4, format = "f")]
ga2[, ci := paste0("\\mbox{\\tiny [", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), "]}")]
ga2[grepl("^L", inference), ci := paste0("\\mbox{\\tiny (", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), ")}")]
setnames(ga2, "p_val", "p")
setkey(ga2, file, spec, gender)
AddStar <- T
if (AddStar) {
  ga2[, est := Estimate]
  ga2[, Estimate := paste0(est, "^{\\phantom{***}}")]
  ga2[p < .1, Estimate := paste0(est, "^{*\\phantom{**}}")]
  ga2[p < .05, Estimate := paste0(est, "^{**\\phantom{*}}")]
  ga2[p < .01, Estimate := paste0(est, "^{***}")]
  ga2[, est := NULL]
}
# tabulate by specification
setorder(ga2, spec, file)
ga2tab <- rbind(
    ga2[grepl("ab", file) & grepl("B", inference), Estimate],
    ga2[grepl("ab", file) & grepl("^L", inference), ci],
    ga2[grepl("ab", file) & grepl("B", inference), ci],
    ga2[grepl("de$", file) & grepl("B", inference), Estimate],
    ga2[grepl("de$", file) & grepl("^L", inference), ci],
    ga2[grepl("de$", file) & grepl("B", inference), ci],
    ga2[grepl("enr", file) & grepl("B", inference), Estimate],
    ga2[grepl("enr", file) & grepl("^L", inference), ci],
    ga2[grepl("enr", file) & grepl("B", inference), ci]
   )
nr <- unique(NR[grepl(0, agdef) & grepl("4|6|7", reg) & 
  agelb == 10 & grepl("di", HHtype), ])
nr[, gender := factor(gender, levels = genderitems)]
setkey(nr, file, reg, gender)
nr <- t(nr[, .(R, n)])
nr <- rbind(nr[, 1:9], nr[, 10:18], nr[, 19:27])
Enr[, gender := factor(gender, levels = genderitems)]
enr <- unique(Enr[agelb == 10 & 
  grepl(0, agdef) & grepl("di", HHtype), ])
enrW <- reshape(enr, direction = "wide", idvar = c("agHH", "tee", "gender"),
  timevar = "file", v.names = grepout("En|Nu", colnames(enr)))
enrW2 <- reshape(enrW, direction = "wide", idvar = c("agHH", "tee"),
  timevar = "gender", v.names = grepout("En|Nu", colnames(enrW)))
enrW3 = copy(enrW2[, grepout("boys|gir", colnames(enrW2)), with = F])
enrW4 = copy(enrW2[, grepout("boys|gir", colnames(enrW2)), with = F])
enrW3[, grepout("Num", colnames(enrW3)) := NULL]
enrW4[, grepout("En", colnames(enrW4)) := NULL]
enrW3 <- data.table(as.matrix(rbind(enrW3, enrW3[2, ] - enrW3[1, ] - (enrW3[4, ] - enrW3[3, ]))))
Ena <- enrW3[, grepout("ab", colnames(enrW3)), with = F]
Eng <- enrW3[, grepout("de\\.", colnames(enrW3)), with = F]
Ene <- enrW3[, grepout("enr", colnames(enrW3)), with = F]
Ena <- data.table(formatC(as.matrix(Ena), digits = 4, format = "f"))
Eng <- data.table(formatC(as.matrix(Eng), digits = 4, format = "f"))
Ene <- data.table(formatC(as.matrix(Ene), digits = 4, format = "f"))
na <- enrW4[, grepout("ab", colnames(enrW4)), with = F][c(1, 3), ]
ng <- enrW4[, grepout("de\\.", colnames(enrW4)), with = F][c(1, 3), ]
ne <- enrW4[, grepout("en", colnames(enrW4)), with = F][c(1, 3), ]
estnr <- data.table(rbind(ga2tab[1:3, ], nr[1:2, ], ga2tab[4:6, ], nr[3:4, ], ga2tab[7:9, ], nr[5:6, ]))
estnr <- rbindlist(list(
  estnr[1:5, ], Ena[, rep(1:3, 3), with = F], 
  estnr[6:10, ], Eng[, rep(1:3, 3), with = F],
  estnr[11:15, ], Ene[, rep(1:3, 3), with = F]),
  use.names = F)
ii <- 1
hdr <- c(paste0("Mean of ", rep(c("treated", "control"), each = 2), " in ", 
   list(rep(c(1999, 2002), 2), rep(c(2002, 2006), 2))[[ii]]), "Raw DID")
estnr <- cbind(
  Covariates = rep(c("Agricultural households * year 2002", 
      "\\hspace{1em} CI (LZ)", 
      "\\hspace{1em} CI (BRL)", 
      "$\\bar{R}^{2}$", "N", hdr), 3)
  , estnr)
SepCols <- c(3, 6) 
ltb <- latextab(as.matrix(estnr), delimiterline = NULL, 
    hcenter = c(4, rep(1.15, ncol(estnr)-1)),
    hleft = c("\\scriptsize", rep("\\hfil\\scriptsize$", ncol(estnr)-1)), 
    hright = c("\\hfill", rep("$", ncol(estnr)-1)),
    headercolor = NULL, 
    adjustlineskip = "-.75ex", adjlskiprows = grep("CI", unlist(estnr[, 1]))-1,
    addseparatingcols = SepCols, separatingcolwidth = rep(.1, 2), 
    separatingcoltitle = c("\\textsf{Specification 1}", "\\textsf{Specfication 2}", "\\textsf{Specfication 3}")
  ) 
controlsexplained <- c("Demographic fixed trends & \\multicolumn{3}{c}{\\scriptsize Yes} && \\multicolumn{3}{c}{\\scriptsize Yes} && \\multicolumn{3}{c}{\\scriptsize Yes}\\\\"
    , 
    "Household fixed trends &  \\multicolumn{3}{c}{\\scriptsize } && \\multicolumn{3}{c}{\\scriptsize Yes} && \\multicolumn{3}{c}{\\scriptsize Yes} \\\\"
    , 
    "Thana fixed trends & \\multicolumn{3}{c}{\\scriptsize } && \\multicolumn{3}{c}{\\scriptsize } && \\multicolumn{3}{c}{\\scriptsize Yes}\\\\[1.5ex]")
ltb <- c(
  ltb[1, ], "\\hline",
  ltb[2:grep("cline", ltb), ],
  "&\\multicolumn{11}{c}{\\footnotesize A. Absent days per month}\\\\",
    paste0(
      "&\\textsf{boys} & \\textsf{girls} & \\textsf{boys+girls}",
      paste(rep("&&\\textsf{boys} & \\textsf{girls} & \\textsf{boys+girls}", 2), collapse = "")
      , "\\\\"),
    "&(1) & (2) &(3) && (4) & (5) & (6) && (7) & (8) & (9)\\\\",
  ltb[(grep("cline", ltb)+2):(grep("Raw", ltb)[1]), ],
  controlsexplained,
  "&\\multicolumn{11}{c}{\\footnotesize B. Grade progression of all children}\\\\", 
    paste0(
      "&\\textsf{boys} & \\textsf{girls} & \\textsf{boys+girls}",
      paste(rep("&&\\textsf{boys} & \\textsf{girls} & \\textsf{boys+girls}", 2), collapse = "")
      , "\\\\"),
    "&(10) & (11) &(12) && (13) & (14) & (15) && (16) & (17) & (18)\\\\", 
  ltb[(grep("Raw", ltb)[1]+1):(grep("Raw", ltb)[2]), ],
  controlsexplained, 
  "&\\multicolumn{11}{c}{\\footnotesize C. Grade progression of enrollers}\\\\", 
    paste0(
      "&\\textsf{boys} & \\textsf{girls} & \\textsf{boys+girls}",
      paste(rep("&&\\textsf{boys} & \\textsf{girls} & \\textsf{boys+girls}", 2), collapse = "")
      , "\\\\"),
    "&(19) & (20) &(21) && (22) & (23) & (24) && (25) & (26) & (27)\\\\", 
  ltb[(grep("Raw", ltb)[2]+1):(grep("Raw", ltb)[3]), ],
  controlsexplained, "\\hline",
  ltb[(nrow(ltb)), ]
  )
ltb <- ltb[!grepl("Raw", ltb)]
ltb <- gsub("CI \\(.*?\\)", "", ltb)
write.tablev(ltb
  ,  paste0(pathsaveThisVer, "DaysAbsentNumGradesAllAndInitialEnrollersGenderResults_Table.tex")
  ,  colnamestrue = F)
<<grade grade enrollers grade initial enrollers, eval = F, echo = F>>=
library(qs)
ga <- qread(paste0(pathsaveThisVer, "GenderGradeDaysAbsentTabulated.qs"))
NR <- qread(paste0(pathsaveThisVer, "GenderGradeDaysAbsentTabulatedNR.qs"))
Enr <- qread(paste0(pathsaveThisVer, "GenderGradeDaysAbsentTabulatedEnr.qs"))
ga2 <- unique(ga[grepl("grade", file) & 
  grepl("^agHH.yr.$", Coef) & grepl(0, agdef) & grepl("4|6|7", reg) & 
  agelb == 10 & grepl("di", HHtype), ])
ga2[, spec := factor(as.numeric(as.character(reg))-3)]
ga2[, spec := factor(spec, labels = 1:3)]
ga2[, gender := factor(gender, levels = genderitems)]
ga2[, Estimate := formatC(beta, digits = 4, format = "f")]
ga2[, ci := paste0("\\mbox{\\tiny [", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), "]}")]
ga2[grepl("^L", inference), ci := paste0("\\mbox{\\tiny (", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), ")}")]
setnames(ga2, "p_val", "p")
setkey(ga2, file, spec, gender)
AddStar <- T
if (AddStar) {
  ga2[, est := Estimate]
  ga2[, Estimate := paste0(est, "^{\\phantom{***}}")]
  ga2[p < .1, Estimate := paste0(est, "^{*\\phantom{**}}")]
  ga2[p < .05, Estimate := paste0(est, "^{**\\phantom{*}}")]
  ga2[p < .01, Estimate := paste0(est, "^{***}")]
  ga2[, est := NULL]
}
# tabulate by specification
setorder(ga2, spec, file)
ga2tab <- rbind(
    ga2[grepl("ini", file) & grepl("B", inference), Estimate],
    ga2[grepl("ini", file) & grepl("^L", inference), ci],
    ga2[grepl("ini", file) & grepl("B", inference), ci],
    ga2[grepl("de en", file) & grepl("B", inference), Estimate],
    ga2[grepl("de en", file) & grepl("^L", inference), ci],
    ga2[grepl("de en", file) & grepl("B", inference), ci]
   )
nr <- unique(NR[grepl("grade", file) &
  grepl(0, agdef) & grepl("4|6|7", reg) & 
  agelb == 10 & grepl("di", HHtype), ])
nr[, gender := factor(gender, levels = genderitems)]
nr[, file := factor(file, levels = c("grade", "grade initial enr", "grade enr"))]
setkey(nr, file, reg, gender)
nr <- t(nr[, .(R, n)])
nr <- rbind(nr[, 1:9], nr[, 10:18])
Enr[, gender := factor(gender, levels = genderitems)]
enr <- unique(Enr[grepl("grade", file) & agelb == 10 & 
  grepl(0, agdef) & grepl("di", HHtype), ])
enr[, file := factor(file, levels = c("grade initial enr", "grade enr"))]
enrW <- reshape(enr, direction = "wide", idvar = c("agHH", "tee", "gender"),
  timevar = "file", v.names = grepout("En|Nu", colnames(enr)))
enrW2 <- reshape(enrW, direction = "wide", idvar = c("agHH", "tee"),
  timevar = "gender", v.names = grepout("En|Nu", colnames(enrW)))
enrW3 = copy(enrW2[, grepout("boys|gir", colnames(enrW2)), with = F])
enrW4 = copy(enrW2[, grepout("boys|gir", colnames(enrW2)), with = F])
enrW3[, grepout("Num", colnames(enrW3)) := NULL]
enrW4[, grepout("En", colnames(enrW4)) := NULL]
enrW3 <- data.table(as.matrix(rbind(enrW3, enrW3[2, ] - enrW3[1, ] - (enrW3[4, ] - enrW3[3, ]))))
Ene <- enrW3[, grepout("enr\\.", colnames(enrW3)), with = F]
Eni <- enrW3[, grepout("ini", colnames(enrW3)), with = F]
Ene <- data.table(formatC(as.matrix(Ene), digits = 4, format = "f"))
Eni <- data.table(formatC(as.matrix(Eni), digits = 4, format = "f"))
ne <- enrW4[, grepout("de enr.", colnames(enrW4)), with = F][c(1, 3), ]
ni <- enrW4[, grepout("ini", colnames(enrW4)), with = F][c(1, 3), ]
estnr <- data.table(rbind(ga2tab[1:3, ], ni[1:2, ], ga2tab[4:6, ], ne[3:4, ]))
estnr <- rbindlist(list(
  estnr[1:5, ], Eni[, rep(1:3, 3), with = F], 
  estnr[6:10, ], Ene[, rep(1:3, 3), with = F]),
  use.names = F)
ii <- 1
hdr <- c(paste0("Mean of ", rep(c("treated", "control"), each = 2), " in ", 
   list(rep(c(1999, 2002), 2), rep(c(2002, 2006), 2))[[ii]]), "Raw DID")
estnr <- cbind(
  Covariates = rep(c("Agricultural households * year 2002", 
      "\\hspace{1em} CI (LZ)", 
      "\\hspace{1em} CI (BRL)", 
      "$\\bar{R}^{2}$", "N", hdr), 2)
  , estnr)
SepCols <- c(3, 6) 
ltb <- latextab(as.matrix(estnr), delimiterline = NULL, 
    hcenter = c(4, rep(1.15, ncol(estnr)-1)),
    hleft = c("\\scriptsize", rep("\\hfil\\scriptsize$", ncol(estnr)-1)), 
    hright = c("\\hfill", rep("$", ncol(estnr)-1)),
    headercolor = NULL, 
    adjustlineskip = "-.75ex", adjlskiprows = grep("CI", unlist(estnr[, 1]))-1,
    addseparatingcols = SepCols, separatingcolwidth = rep(.1, 2), 
    separatingcoltitle = c("\\textsf{Specification 1}", "\\textsf{Specfication 2}", "\\textsf{Specfication 3}")
  ) 
controlsexplained <- c("Demographic fixed trends & \\multicolumn{3}{c}{\\scriptsize Yes} && \\multicolumn{3}{c}{\\scriptsize Yes} && \\multicolumn{3}{c}{\\scriptsize Yes}\\\\"
    , 
    "Household fixed trends &  \\multicolumn{3}{c}{\\scriptsize } && \\multicolumn{3}{c}{\\scriptsize Yes} && \\multicolumn{3}{c}{\\scriptsize Yes} \\\\"
    , 
    "Thana fixed trends & \\multicolumn{3}{c}{\\scriptsize } && \\multicolumn{3}{c}{\\scriptsize } && \\multicolumn{3}{c}{\\scriptsize Yes}\\\\[1.5ex]")
ltb <- c(
  ltb[1, ], "\\hline",
  ltb[2:grep("cline", ltb), ],
  "&\\multicolumn{11}{c}{\\footnotesize A. Grade progression of initial enrollers}\\\\",
    paste0(
      "&\\textsf{boys} & \\textsf{girls} & \\textsf{boys+girls}",
      paste(rep("&&\\textsf{boys} & \\textsf{girls} & \\textsf{boys+girls}", 2), collapse = "")
      , "\\\\"),
    "&(1) & (2) &(3) && (4) & (5) & (6) && (7) & (8) & (9)\\\\",
  ltb[(grep("cline", ltb)+2):(grep("Raw", ltb)[1]), ],
  controlsexplained,
  "&\\multicolumn{11}{c}{\\footnotesize B. Grade progression of all time enrollers}\\\\", 
    paste0(
      "&\\textsf{boys} & \\textsf{girls} & \\textsf{boys+girls}",
      paste(rep("&&\\textsf{boys} & \\textsf{girls} & \\textsf{boys+girls}", 2), collapse = "")
      , "\\\\"),
    "&(10) & (11) &(12) && (13) & (14) & (15) && (16) & (17) & (18)\\\\", 
  ltb[(grep("Raw", ltb)[1]+1):(grep("Raw", ltb)[2]), ],
  controlsexplained, "\\hline",
  ltb[(nrow(ltb)), ]
  )
ltb <- ltb[!grepl("Raw", ltb)]
ltb <- gsub("CI \\(.*?\\)", "", ltb)
write.tablev(ltb
  ,  paste0(pathsaveThisVer, "NumGradesAllAndInitialEnrollersGenderResults_Table.tex")
  ,  colnamestrue = F)
<<absent by gender with enrollers results, eval = F, echo = F>>=
ga <- qread(paste0(pathsaveThisVer, "GenderGradeDaysAbsentTabulated.qs"))
NR <- qread(paste0(pathsaveThisVer, "GenderGradeDaysAbsentTabulatedNR.qs"))
Enr <- qread(paste0(pathsaveThisVer, "GenderGradeDaysAbsentTabulatedEnr.qs"))
ga2 <- ga[grepl("abs", file) &
  grepl("^agHH.yr.$", Coef) & grepl(0, agdef) & grepl("4|6|7", reg) & 
  agelb == 10 & grepl("di", HHtype), ]
ga2[, spec := factor(as.numeric(as.character(reg))-3)]
ga2[, spec := factor(spec, labels = 1:3)]
ga2[, gender := factor(gender, levels = genderitems)]
ga2[, Estimate := formatC(beta, digits = 4, format = "f")]
ga2[, ci := paste0("\\mbox{\\tiny [", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), "]}")]
ga2[grepl("^L", inference), ci := paste0("\\mbox{\\tiny (", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), ")}")]
setnames(ga2, "p_val", "p")
setkey(ga2, file, spec, gender)
AddStar <- T
if (AddStar) {
  ga2[, est := Estimate]
  ga2[, Estimate := paste0(est, "^{\\phantom{***}}")]
  ga2[p < .1, Estimate := paste0(est, "^{*\\phantom{**}}")]
  ga2[p < .05, Estimate := paste0(est, "^{**\\phantom{*}}")]
  ga2[p < .01, Estimate := paste0(est, "^{***}")]
  ga2[, est := NULL]
}
# tabulate by specification
setorder(ga2, spec, file)
ga2tab <- rbind(
    ga2[grepl("enr", file) & grepl("B", inference), Estimate],
    ga2[grepl("enr", file) & grepl("^L", inference), ci],
    ga2[grepl("enr", file) & grepl("B", inference), ci]
   )
nr <- unique(NR[grepl("abs", file) & grepl(0, agdef) & grepl("4|6|7", reg) & 
  agelb == 10 & grepl("di", HHtype), ])
nr[, gender := factor(gender, levels = genderitems)]
setkey(nr, file, reg, gender)
nr <- t(nr[, .(R, n)])
Enr[, gender := factor(gender, levels = genderitems)]
enr <- unique(Enr[grepl("abs", file) & agelb == 10 & 
  grepl(0, agdef) & grepl("di", HHtype), ])
enrW <- reshape(enr, direction = "wide", idvar = c("agHH", "tee", "gender"),
  timevar = "file", v.names = grepout("En|Nu", colnames(enr)))
enrW2 <- reshape(enrW, direction = "wide", idvar = c("agHH", "tee"),
  timevar = "gender", v.names = grepout("En|Nu", colnames(enrW)))
enrW3 = copy(enrW2[, grepout("boys|gir", colnames(enrW2)), with = F])
enrW4 = copy(enrW2[, grepout("boys|gir", colnames(enrW2)), with = F])
enrW3[, grepout("Num", colnames(enrW3)) := NULL]
enrW4[, grepout("En", colnames(enrW4)) := NULL]
enrW3 <- data.table(as.matrix(rbind(enrW3, enrW3[2, ] - enrW3[1, ] - (enrW3[4, ] - enrW3[3, ]))))
Ene <- enrW3[, grepout("enr", colnames(enrW3)), with = F]
Ene <- data.table(formatC(as.matrix(Ene), digits = 4, format = "f"))
ne <- enrW4[, grepout("enr", colnames(enrW4)), with = F][c(1, 3), ]
estnr <- data.table(rbind(ga2tab, nr))
estnr <- rbindlist(list(
  estnr, Ene[, rep(1:3, 3), with = F]),
  use.names = F)
ii <- 1
hdr <- c(paste0("Mean of ", rep(c("treated", "control"), each = 2), " in ", 
   list(rep(c(1999, 2002), 2), rep(c(2002, 2006), 2))[[ii]]), "Raw DID")
estnr <- cbind(
  Covariates = rep(c("Agricultural households * year 2002", 
      "\\hspace{1em} CI (LZ)", 
      "\\hspace{1em} CI (BRL)", 
      "$\\bar{R}^{2}$", "N", hdr), 1)
  , estnr)
SepCols <- c(3, 6) 
ltb <- latextab(as.matrix(estnr), delimiterline = NULL, 
    hcenter = c(4, rep(1.15, ncol(estnr)-1)),
    hleft = c("\\scriptsize", rep("\\hfil\\scriptsize$", ncol(estnr)-1)), 
    hright = c("\\hfill", rep("$", ncol(estnr)-1)),
    headercolor = NULL, 
    adjustlineskip = "-.75ex", adjlskiprows = grep("CI", unlist(estnr[, 1]))-1,
    addseparatingcols = SepCols, separatingcolwidth = rep(.1, 2), 
    separatingcoltitle = c("\\textsf{Specification 1}", "\\textsf{Specfication 2}", "\\textsf{Specfication 3}")
  ) 
controlsexplained <- c("Demographic fixed trends & \\multicolumn{3}{c}{\\scriptsize Yes} && \\multicolumn{3}{c}{\\scriptsize Yes} && \\multicolumn{3}{c}{\\scriptsize Yes}\\\\"
    , 
    "Household fixed trends &  \\multicolumn{3}{c}{\\scriptsize } && \\multicolumn{3}{c}{\\scriptsize Yes} && \\multicolumn{3}{c}{\\scriptsize Yes} \\\\"
    , 
    "Thana fixed trends & \\multicolumn{3}{c}{\\scriptsize } && \\multicolumn{3}{c}{\\scriptsize } && \\multicolumn{3}{c}{\\scriptsize Yes}\\\\[1.5ex]")
ltb <- c(
  ltb[1, ], "\\hline",
  ltb[2:grep("cline", ltb), ],
    paste0(
      "&\\textsf{boys} & \\textsf{girls} & \\textsf{boys+girls}",
      paste(rep("&&\\textsf{boys} & \\textsf{girls} & \\textsf{boys+girls}", 2), collapse = "")
      , "\\\\"),
    "&(1) & (2) &(3) && (4) & (5) & (6) && (7) & (8) & (9)\\\\",
  ltb[(grep("cline", ltb)+2):(grep("Raw", ltb)), ],
  controlsexplained, "\\hline",
  ltb[(nrow(ltb)), ]
  )
ltb <- ltb[!grepl("Raw", ltb)]
ltb <- gsub("CI \\(.*?\\)", "", ltb)
write.tablev(ltb
  ,  paste0(pathsaveThisVer, "DaysAbsentAllAndInitialEnrollersGenderResults_Table.tex")
  ,  colnamestrue = F)
<<absent by gender with enrollers cross section results>>=
CIs <- qread(paste0(pathsaveThisVer, "FD_DaysAbsentCrossSection_CIs.qs"))
DA <- qread(paste0(pathsaveThisVer, "DaysAbsentCrossSection.qs"))
ab1 <- CIs[grepl("^agHH", Coef) & grepl(0, agdef) & grepl("4|6|7", reg) & agelb == 10, ]
ab1[, spec := factor(as.numeric(reg)-3)]
ab1[, spec := factor(spec, labels = 1:3)]
ab1[, gender := factor(gender, levels = genderitems)]
ab1[, Estimate := formatC(beta, digits = 4, format = "f")]
ab1[, ci := paste0("\\mbox{\\tiny [", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), "]}")]
ab1[grepl("^L", inference), ci := paste0("\\mbox{\\tiny (", 
  formatC(CI_L, digits = 3, format = "f"), ", ", 
  formatC(CI_U, digits = 3, format = "f"), ")}")]
setnames(ab1, "p_val", "p")
AddStar <- T
if (AddStar) {
  ab1[, est := Estimate]
  ab1[, Estimate := paste0(est, "^{\\phantom{***}}")]
  ab1[p < .1, Estimate := paste0(est, "^{*\\phantom{**}}")]
  ab1[p < .05, Estimate := paste0(est, "^{**\\phantom{*}}")]
  ab1[p < .01, Estimate := paste0(est, "^{***}")]
  ab1[, est := NULL]
}
# tabulate by specification
setorder(ab1, year, sample, gender, spec) # order in sample: all time, contemp
setorder(DA, year, sample, gender, agHH)
for (ii in 1:2) {
  sampleyears <- list(c(1999, 2002), c(2002, 2006))[[ii]]
  if (ii == 1) {
    yymax <- 2 
    ppmin <- 1
  } else {
    yymax <- 1
    ppmin <- 2
  }
  for (yy in 1:yymax) {
    ab2 <- ab1[year == sampleyears[yy] & grepl(c("m", "p")[ii], data), ]
    ab2tab <- rbind(
        ab2[grepl("B", inference), Estimate],
        ab2[grepl("^L", inference), ci],
        ab2[grepl("B", inference), ci],
        ab2[grepl("B", inference), formatC(R2, digits = 4, format = "f")],
        ab2[grepl("B", inference), n]
       )
    da <- DA[grepl(c("m", "p")[ii], data) & is.na(agHHdef) & agelb == 10 & year == sampleyears[yy], ]
    if (nrow(da) == 0) next
    damatrix <- matrix(da[, formatC(rate, digits = 3, format = "f")], byrow = F, nrow = 2)
    if (ii == 1) 
      damatrix <- damatrix[, rep(1:6, each = 3)] else
      damatrix <- damatrix[, rep(1:3, each = 3)] 
    ab3 <- data.table(rbind(
      ab2tab[1:4, ], rep(da[agHH == 1, Obs], each=3), 
      ab2tab[5, ], damatrix
     ))
    hdr <- c(paste0("Mean of ", rep(c("control", "treated"), each = 2), " in ", 
       list(rep(c(1999, 2002), 2), rep(c(2002, 2006), 2))[[ii]]), "Raw DID")[list(c(1, 3), c(2, 4))[[yy]]]
    for (pp in ppmin:2) {
      ab4 <- ab3[, list(list(c(1:9), c(10:18)), list(c(1), c(1:9)))[[ii]][[pp]], with = F]
      ab5 <- cbind(
        Covariates = rep(c("Agricultural household", 
            "\\hspace{1em} CI (LZ)", 
            "\\hspace{1em} CI (BRL)", 
            "$\\bar{R}^{2}$", "N: Agricultural households", "N", hdr), 1)
        , ab4)
      SepCols <- c(3, 6)
      ltb <- latextab(as.matrix(ab5), delimiterline = NULL, 
          hcenter = c(4, rep(1.15, ncol(ab5)-1)),
          hleft = c("\\scriptsize", rep("\\hfil\\scriptsize$", ncol(ab5)-1)), 
          hright = c("\\hfill", rep("$", ncol(ab5)-1)),
          headercolor = NULL, 
          adjustlineskip = "-.75ex", adjlskiprows = grep("CI", unlist(ab5[, 1]))-1,
          addseparatingcols = SepCols, separatingcolwidth = rep(.1, length(SepCols)), 
          separatingcoltitle = c("\\textsf{Boys}", "\\textsf{Girls}", "\\textsf{Boys+Girls}")
        ) 
      controlsexplained <- c(
        paste("Demographic fixed trends &",  
          paste(rep(paste(rep("\\mbox{\\scriptsize Yes}", 3), collapse = "&"),  3), collapse = "&&"), "\\\\")
          , 
        paste("Household fixed trends &",  
          paste(rep(paste(c(" ", rep("\\mbox{\\scriptsize Yes}", 2)), collapse = "&"),  3), collapse = "&&"), "\\\\")
          ,
        paste("Thana fixed trends &",  
          paste(rep(paste(c(" ", " ", "\\mbox{\\scriptsize Yes}"), collapse = "&"),  3), collapse = "&&"), "\\\\")
        )
      if (yy == 1) nums <- 1:9 else nums <- 19:27
      if (ii == 2) nums <- 37:45
      nums <- nums+9*(pp-1)
      ltb <- c(
        ltb[1, ], "\\hline",
        ltb[2:grep("cline", ltb), ],
        #  "&(1) & (2) &(3) && (4) & (5) & (6) && (7) & (8) & (9)\\\\",
        paste0("&", paste(c(
            paste(paste0("(", nums[0+1:3], ")"), collapse = "&"), 
            paste(paste0("(", nums[3+1:3], ")"), collapse = "&"),
            paste(paste0("(", nums[6+1:3], ")"), collapse = "&")), collapse = "&&"),
          "\\\\"),
        ltb[(grep("cline", ltb)+2):(grep("CI", ltb)[2]), ],
        controlsexplained,
        ltb[(grep("CI", ltb)[2]+1):(grep(" in ", ltb)[2]), ],
        "\\hline",
        ltb[(nrow(ltb)), ]
        )
      N1 <- gsub("N.*?&", "", ltb[grepl("N: A", ltb)])
      N1 <- gsub("\\\\", "", N1)
      N1 <- gsub(" ", "", N1)
      N1 <- unique(unlist(strsplit(N1, " ?\\& ?")))
      N1 <- N1[nchar(N1)>0]
      for (nn in 1:length(N1)) 
        ltb <- gsub(paste0(N1[nn], ".*\\& ", N1[nn], collapse = ""), 
          paste("\\\\multicolumn{3}{c}{\\\\scriptsize", N1[nn], "}"), ltb)
      N2 <- gsub("N *\\&", "", ltb[grepl("N *\\&", ltb)])
      N2 <- gsub("\\\\", "", N2)
      N2 <- gsub(" ", "", N2)
      N2 <- unique(unlist(strsplit(N2, " ?\\& ?")))
      N2 <- N2[nchar(N2)>0]
      for (nn in 1:length(N2)) 
        ltb <- gsub(paste0(N2[nn], ".*\\& ", N2[nn], collapse = ""), 
          paste("\\\\multicolumn{3}{c}{\\\\scriptsize", N2[nn], "}"), ltb)
      N3 <- gsub("Mean.*?\\&", "", ltb[grepl("Mean", ltb)])
      N3 <- gsub("\\&", "", N3)
      N3 <- gsub("\\\\\\\\", "", N3)
      N3 <- strsplit(N3, " +")
      N3 <- lapply(N3, unique)
      N3 <- lapply(N3, function(x) x[nchar(x)>0])
      for (mm in 1:2)
        for (nn in 1:3)
          ltb <- gsub(paste0(N3[[mm]][nn], ".*", N3[[mm]][nn], collapse = ""), 
            paste("\\\\multicolumn{3}{c}{\\\\scriptsize", N3[[mm]][nn], "}"), ltb)
      ltb <- gsub("CI \\(.*?\\)", "", ltb)
      assign(paste0("ltb", c("m", "p")[ii], list(c(9, 2), c(2, 6))[[ii]][yy], c("a", "c")[pp]), ltb)
    }
  }
}
ltbm9c <- ltbm9c[!grepl("fixed", ltbm9c)]
ltbm2c <- ltbm2c[!grepl("fixed", ltbm2c)]
ltbm2a <- ltbm2a[!grepl("fixed", ltbm2a)]
ltbp2c <- ltbp2c[!grepl("fixed", ltbp2c)]
ltb <- c(
  ltbm9a[1:grep("cline", ltbm9a)],
  "&\\multicolumn{11}{c}{\\small A. 1999, all time enrollers, 1999 cohort}\\\\",
  ltbm9a[(grep("cline", ltbm9a)[1]+1):(grep("Mean", ltbm9a)[2])],
  "&\\multicolumn{11}{c}{\\small B. 1999, contemporaneous enrollers, 1999 cohort}\\\\",
  ltbm9c[(grep("cline", ltbm9c)[1]+1):(grep("Mean", ltbm9c)[2])],
  "&\\multicolumn{11}{c}{\\small C. 2002, all time enrollers, 1999 cohort}\\\\",
  ltbm2a[(grep("cline", ltbm2a)[1]+1):(grep("Mean", ltbm2a)[2])],
  "&\\multicolumn{11}{c}{\\small D. 2002, contemporaneous enrollers, 1999 cohort}\\\\",
  ltbm2c[(grep("cline", ltbm2c)[1]+1):(grep("Mean", ltbm2c)[2])],
  "&\\multicolumn{11}{c}{\\small E. 2002, contemporaneous enrollers, 2002 cohort}\\\\",
  ltbp2c[(grep("cline", ltbp2c)[1]+1):length(ltbp2c)]
)
write.tablev(ltb
  ,  paste0(pathsaveThisVer, "DaysAbsentCrossSection.tex")
  ,  colnamestrue = F)
@
<<plot grade absent by initially enrolled gender, eval = T>>=
library(ggplot2)
egd <- qread(paste0(pathsaveThisVer, "GenderGradeDaysAbsentTabulated.qs"))
egd2 <- egd[grepl("enr", file) & grepl("Em", data) & grepl("^agHH", Coef) & grepl(10, agelb) &
  grepl("4|5|6|7", reg) & grepl("B", inference) & grepl(0, agdef) & grepl("di", HHtype), ]
egd2[, gender := factor(gender, levels = genderitems)]
egd2[, hr := paste0(HHtype, "-", reg)]
egd2[, fa := paste0(file, ", ", agelb)]
egd2[, yintercept := 0]
g <- 
ggplot(data = egd2, 
    aes(x = gender, y = beta, group = hr, fill = hr, shape = hr, colour = hr)) + 
  geom_pointrange(aes(ymin = CI_L, ymax = CI_U),
    stat = "identity", fatten = 1.75, 
    position = position_dodge(width = .5)) +
  scale_shape_manual(values = rep(c(0:6, 8), 2))+
  facet_grid( ~ file, scales = "free_y")+
  ThisThemeEnd+
  #scale_y_continuous(limits = c(-1, 1))+
  xlab("interaction terms") + 
  labs(color  = "regression specifications", fill = "regression specifications", 
    shape = "regression specifications") +
  guides(
    colour = guide_legend(title = "regression specifications", nrow = 1),
    fill = guide_legend(title = "regression specifications", nrow = 1),
    shape = guide_legend(title = "regression specifications", nrow = 1)
    ) +
  geom_hline(aes(yintercept = yintercept), colour = "lightgreen")
pdf(
  paste0(pathsaveThisVer, "NumGradeImpactsOfInitialEnrollersByGenderByDemeaningByAgelb.pdf")
  , width = 2*12/2.54, height = 2*8/2.54)
print(g)
whatever <- dev.off()
@


<<>>=
@


\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Grade progression and days absent results by gender\label{NumGradesDaysAbsentGenderResultsTable}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.525}
\hspace{-1.5cm}\input{\Sexpr{paste0(pathsaveThisVer, "NumGradesDaysAbsentGenderResults_Table.tex")}}

\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& Compiled from IFPRI data. All individuals aged 10-18 in households. \\[-1ex]
Notes:& \Sexpr{SEMemoForSelectedResults} 
\end{tabular}
%\end{minipage}
\end{table}


\begin{table}
\hfil\textsc{\footnotesize Table \refstepcounter{table}\thetable: Days absent, cross section estimates \label{DaysAbsent2002}}\\
\setlength{\tabcolsep}{1pt}
\renewcommand{\arraystretch}{.525}
\hspace{-1.5cm}\input{\Sexpr{paste0(pathsaveThisVer, "DaysAbsentCrossSection.tex")}}

\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& Compiled from IFPRI data. Individuals aged 10-18 in households. Contemporaneous enroller sample is all enrollers in respective years. All time enroller sample is enrollers in both rounds.\\[-1ex]
Notes:& Cross sectional estimates of being in agricultural households. \Sexpr{SEMemoForSelectedResults} 
\end{tabular}
%\end{minipage}
\end{table}


\subsection{Age wise}


\begin{itemize}
\vspace{1.0ex}\setlength{\itemsep}{1.0ex}\setlength{\baselineskip}{12pt}
\item	\textsc{\footnotesize Figure \ref{AgeWise.zEm.1999}} shows age wise impacts, \textsc{\footnotesize Figure \ref{AgeGroup1.zEm.1999}} shows impacts by age groups corresponding to school system classification, \textsc{\footnotesize Figure \ref{AgeGroup3.zEm.1999}} shows impacts by age groups corresponding to major school classification. 
\item	In \textsc{\footnotesize Figure \ref{AgeWise.zEm.1999}}, we see heterogeneity in impacts by age. 10, 12 are most affected, 15 and 16 are also affected but the estimates are imprecise due to small sample size in these age groups.
\item	This pattern broadly matches with last years of schooling phases: Primary schools of class 1 - 5 (ages 6-10), junior secondary schools of class 6 - 8 (ages 11-13), secondary schools of class 9 - 10 with SSC (secondary school certificate) exams at the end (age 15), higher secondary schools of class 11 - 12 with HSC (higher secondary school certificate) at the end (age 17). It suggests that children discontinue their schooling after the last years of each schooling phases and the exam-harvest overlap may have made this pattern stronger for ag HHs. \textsc{\footnotesize Figure \ref{AgeGroup1.zEm.1999}} and \textsc{\footnotesize Figure \ref{AgeGroup3.zEm.1999}} show the same pattern in a summarised way.
%, with plus or minus one year of age due to different ages of enrollment at the start of primary schooling.
\item	We see almost null impacts on younger cohorts below 10. Given that only few paid work is available for children of younger cohorts, we interpret this evidence as a support to our interpretation that exam-harvest overlap may drive out children, mainly of ages above 10, from school to work. 
\end{itemize}

\begin{figure}
%\hspace{-2em}\begin{minipage}[t]{13cm}
\hfil\textsc{\footnotesize Figure \refstepcounter{figure}\thefigure: Impacts by age group, 1999-2002, 6 - 17 years old\label{AgeGroup2.zEm.1999}}\\
\hfil \includegraphics[height=.2\paperheight]{\Sexpr{
paste0(pathsaveThisVer, "GenderAgeGroup2Impacts.pdf")
}}\\
\renewcommand{\arraystretch}{1}
\hfil\begin{tabular}{>{\hfill\scriptsize}p{1cm}<{}>{\scriptsize}p{12cm}<{\hfill}}
Source:& Compiled from IFPRI data. pri: 6-10, sec: 11-17  in 1999.\\[-1ex]
Notes:& 1. Coefficients on agricultural HH dummy $\times$ year 2002 dummy.'\\[-1ex]
& 2. Error bars use cluster robust standard errors at thana level with Satterthwaite correction for degree of freedom.
\end{tabular}
%\end{minipage}
\end{figure}




\begin{itemize}
\vspace{1.0ex}\setlength{\itemsep}{1.0ex}\setlength{\baselineskip}{12pt}
\item	\textsc{\footnotesize Figure \ref{ERbyAge rawdata}} shows mean enrollment rates by age. It shows ``compulsory schooling'' is not enforced strictly. 
\item	\textsc{\footnotesize Figure \ref{AgeAtClass1byAge rawdata}} shows the mean age of starting class 1. It also shows ``compulsory schooling'' is not enforced strictly. Ag HHs tend to start school later in age than nonag HHs. This may partly explain ag HH's enrollment rates are higher at some of the later ages. 
\end{itemize}




We examine other schooling outcomes available in data. Impacts on other schooling outcomes are aligned with and give certain validation to our interpretation of the main estimation results. 
\begin{itemize}
\vspace{1.0ex}\setlength{\itemsep}{1.0ex}\setlength{\baselineskip}{12pt}
\item	Number of progressed grades is fewer for ag HHs by .36 - .38 years in three years, mean annual rate of .12 - .13. This is consistent with a larger enrollment rate reduction for them.
\item	Days absent in three months prior to survey interviews show an increase in some specifications, yet the estimates are imprecise and do not statistically differ from zero. This is also consistent with the main results because days absent need not to be related to exam failures. 
\end{itemize}



{\footnotesize\bibliographystyle{aer}
\setlength{\baselineskip}{8pt}
\bibliography{c:/seiro/settings/TeX/seiro}
}
